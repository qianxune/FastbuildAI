# å°çº¢ä¹¦çˆ†æ¬¾æ–‡ç« ç”Ÿæˆåº”ç”¨ - MVPå¼€å‘è®¡åˆ’

**ç‰ˆæœ¬å·**: v1.0.0  
**åˆ›å»ºæ—¥æœŸ**: 2026-01-09  
**æœ€åæ›´æ–°**: 2026-01-09  
**é¢„è®¡å·¥æœŸ**: 3å‘¨  
**è´Ÿè´£äºº**: -

---

## ä¸€ã€é¡¹ç›®æ¡†æ¶åˆ†æ

### 1.1 åç«¯æ¡†æ¶ç‰¹ç‚¹

- **åŸºç¡€æ¶æ„**: NestJS 11ï¼Œä½¿ç”¨Module + Controller + Serviceæ¶æ„
- **æ•°æ®åº“**: TypeORM 0.3 + PostgreSQL 17
- **å®ä½“å®šä¹‰**: ä½äº `@buildingai/db/entities`
- **æ§åˆ¶å™¨åˆ†ç±»**: 
  - Consoleæ§åˆ¶å™¨ï¼ˆåå°ç®¡ç†ï¼‰
  - Webæ§åˆ¶å™¨ï¼ˆå‰å°æ¥å£ï¼‰
- **è£…é¥°å™¨**: `@ConsoleController`ã€`@WebController`
- **ç»§æ‰¿ä½“ç³»**: ç»§æ‰¿BaseServiceå’ŒBaseControllerè·å¾—é€šç”¨CRUDèƒ½åŠ›
- **å…¨å±€å®ˆå«**: AuthGuardã€PermissionsGuardã€MemberOnlyGuardç­‰

### 1.2 å‰ç«¯æ¡†æ¶ç‰¹ç‚¹

- **æ ¸å¿ƒæ¡†æ¶**: Nuxt 4 + Vue 3ï¼Œæ–‡ä»¶å³è·¯ç”±
- **ç»„ä»¶åº“**: å¤ç”¨buildingai-uiç»„ä»¶åº“ï¼ˆUButtonã€UTextareaã€UCardç­‰ï¼‰
- **APIè°ƒç”¨**: $fetchæˆ–useAsyncData
- **å›½é™…åŒ–**: i18nå¤šè¯­è¨€æ”¯æŒï¼ˆen/zh/jpï¼‰
- **é¡µé¢ç»“æ„**: pages/ + components/ + stores/ + utils/

### 1.3 æ•°æ®åº“ç®¡ç†

- **å®ä½“å®šä¹‰**: packages/@buildingai/db/entities
- **è¿ç§»ç®¡ç†**: TypeORM migrations
- **ä¸»é”®ç±»å‹**: UUID

---

## äºŒã€å¼€å‘è·¯çº¿å›¾ï¼ˆ3å‘¨å®ŒæˆMVPï¼‰

### ğŸ“… Week 1: åç«¯åŸºç¡€ + æ ¸å¿ƒç”ŸæˆåŠŸèƒ½

#### Day 1-2: æ•°æ®åº“å®ä½“å’Œæ¨¡å—æ­å»º

| æ­¥éª¤ | ä»»åŠ¡ | æ–‡ä»¶è·¯å¾„ | å·¥ä½œå†…å®¹ | éªŒæ”¶æ ‡å‡† |
|-----|------|---------|---------|---------|
| 1 | åˆ›å»ºå®ä½“ç±» | `packages/@buildingai/db/entities/` | åˆ›å»º`XhsNote.ts`ã€`XhsGroup.ts`å®ä½“ | å®ä½“å®šä¹‰ç¬¦åˆè§„èŒƒ |
| 2 | åˆ›å»ºè¿ç§»æ–‡ä»¶ | TypeORM migration | æ‰§è¡Œ`pnpm migration:generate --name=CreateXhsTables` | è¿ç§»æ–‡ä»¶ç”ŸæˆæˆåŠŸ |
| 3 | æ‰§è¡Œè¿ç§» | æ•°æ®åº“ | æ‰§è¡Œ`pnpm migration:run` | æ•°æ®åº“è¡¨åˆ›å»ºæˆåŠŸ |
| 4 | åˆ›å»ºæ¨¡å—ç›®å½• | `packages/api/src/modules/xhs/` | åˆ›å»ºå®Œæ•´æ¨¡å—æ–‡ä»¶ç»“æ„ | ç›®å½•ç»“æ„å®Œæ•´ |
| 5 | åˆ›å»ºDTO | `packages/api/src/modules/xhs/dto/` | åˆ›å»º`create-note.dto.ts`ç­‰ | DTOå®šä¹‰å®Œæ•´ |
| 6 | åˆ›å»ºService | `packages/api/src/modules/xhs/services/` | åˆ›å»º`xhs-note.service.ts`ç»§æ‰¿BaseService | Serviceå¯æ­£å¸¸æ³¨å…¥ |
| 7 | åˆ›å»ºModule | `packages/api/src/modules/xhs/` | åˆ›å»º`xhs.module.ts`æ¨¡å—å®šä¹‰ | Moduleå®šä¹‰æ­£ç¡® |
| 8 | æ³¨å†Œæ¨¡å— | `packages/api/src/modules/app.module.ts` | åœ¨AppModuleä¸­å¯¼å…¥XhsModule | åç«¯å¯åŠ¨æ— æŠ¥é”™ |

**Day 1-2 éªŒæ”¶æ ‡å‡†**:
- âœ… æ•°æ®åº“è¡¨åˆ›å»ºæˆåŠŸ
- âœ… åç«¯æœåŠ¡å¯åŠ¨æ— æŠ¥é”™
- âœ… æ¨¡å—æ­£ç¡®æ³¨å†Œåˆ°AppModule

---

#### Day 3-4: åç«¯APIå¼€å‘

| æ­¥éª¤ | ä»»åŠ¡ | æ–‡ä»¶è·¯å¾„ | å·¥ä½œå†…å®¹ | éªŒæ”¶æ ‡å‡† |
|-----|------|---------|---------|---------|
| 9 | Webæ§åˆ¶å™¨ | `controllers/web/xhs-note.web.controller.ts` | åˆ›å»ºWebç«¯æ§åˆ¶å™¨ | æ§åˆ¶å™¨å®šä¹‰æ­£ç¡® |
| 10 | ç”Ÿæˆæ¥å£ï¼ˆæµå¼ï¼‰ | åŒä¸Š | POST `/api/web/xhs/generate` | æµå¼å“åº”æ­£å¸¸ |
| 11 | ç¬”è®°åˆ—è¡¨æ¥å£ | åŒä¸Š | GET `/api/web/xhs/notes` | åˆ†é¡µæŸ¥è¯¢æ­£å¸¸ |
| 12 | ç¬”è®°è¯¦æƒ…æ¥å£ | åŒä¸Š | GET `/api/web/xhs/notes/:id` | è¯¦æƒ…è¿”å›æ­£ç¡® |
| 13 | åˆ›å»ºç¬”è®°æ¥å£ | åŒä¸Š | POST `/api/web/xhs/notes` | åˆ›å»ºæˆåŠŸ |
| 14 | æ›´æ–°ç¬”è®°æ¥å£ | åŒä¸Š | PUT `/api/web/xhs/notes/:id` | æ›´æ–°æˆåŠŸ |
| 15 | åˆ é™¤ç¬”è®°æ¥å£ | åŒä¸Š | DELETE `/api/web/xhs/notes/:id` | åˆ é™¤æˆåŠŸ |
| 16 | é›†æˆAIæœåŠ¡ | `xhs-note.service.ts` | è°ƒç”¨`@buildingai/ai-sdk` | AIç”Ÿæˆæ­£å¸¸ |
| 17 | é”™è¯¯å¤„ç† | Serviceå±‚ | ä½¿ç”¨`HttpErrorFactory` | é”™è¯¯è¿”å›å‹å¥½ |
| 18 | Postmanæµ‹è¯• | - | æµ‹è¯•æ‰€æœ‰æ¥å£ | æ‰€æœ‰æ¥å£é€šè¿‡ |

**Day 3-4 éªŒæ”¶æ ‡å‡†**:
- âœ… Postmanæµ‹è¯•æ‰€æœ‰æ¥å£é€šè¿‡
- âœ… AIç”ŸæˆåŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… æµå¼å“åº”æ­£ç¡®è¿”å›

---

#### Day 5: å‰ç«¯é¡µé¢åŸºç¡€

| æ­¥éª¤ | ä»»åŠ¡ | æ–‡ä»¶è·¯å¾„ | å·¥ä½œå†…å®¹ | éªŒæ”¶æ ‡å‡† |
|-----|------|---------|---------|---------|
| 19 | ä¸»é¡µé¢ | `pages/xhs/index.vue` | æ›¿æ¢demoå†…å®¹ï¼Œåˆ›å»ºä¸»é¡µå¸ƒå±€ | é¡µé¢å¯è®¿é—® |
| 20 | è¾“å…¥ç»„ä»¶ | åŒä¸Š | ä½¿ç”¨UTextarea + UButton | è¾“å…¥åŒºæ˜¾ç¤ºæ­£å¸¸ |
| 21 | Tabåˆ‡æ¢ | åŒä¸Š | ä½¿ç”¨UTabså®ç°ä¸‰ç§æ¨¡å¼ | åˆ‡æ¢æ­£å¸¸ |
| 22 | ç»“æœæ˜¾ç¤º | åŒä¸Š | æµå¼æ˜¾ç¤ºç»„ä»¶ï¼Œä½¿ç”¨EventSource | æ˜¾ç¤ºåŒºæ­£å¸¸ |
| 23 | APIè°ƒç”¨ | åŒä¸Š | ä½¿ç”¨$fetchè°ƒç”¨åç«¯æ¥å£ | å¯è°ƒç”¨æˆåŠŸ |
| 24 | åŸºç¡€æ ·å¼ | åŒä¸Š | æŒ‰ç…§è®¾è®¡ç¨¿è°ƒæ•´æ ·å¼ | UIç¬¦åˆè®¾è®¡ |

**Day 5 éªŒæ”¶æ ‡å‡†**:
- âœ… é¡µé¢å¯æ­£å¸¸è®¿é—®`/xhs`
- âœ… UIç¬¦åˆè®¾è®¡ç¨¿
- âœ… å¯è¾“å…¥å†…å®¹å¹¶è°ƒç”¨ç”Ÿæˆæ¥å£

---

### ğŸ“… Week 2: ç¬”è®°ç®¡ç† + ç¼–è¾‘åŠŸèƒ½

#### Day 6-7: å®Œå–„ç”ŸæˆåŠŸèƒ½

| æ­¥éª¤ | ä»»åŠ¡ | æ–‡ä»¶è·¯å¾„ | å·¥ä½œå†…å®¹ | éªŒæ”¶æ ‡å‡† |
|-----|------|---------|---------|---------|
| 25 | æµå¼UIä¼˜åŒ– | `pages/xhs/index.vue` | å®ç°æ‰“å­—æœºæ•ˆæœ | æµå¼æ˜¾ç¤ºæµç•… |
| 26 | å¤åˆ¶åŠŸèƒ½ | åŒä¸Š | å¤åˆ¶æ ‡é¢˜/æ­£æ–‡æŒ‰é’® + toast | å¤åˆ¶åŠŸèƒ½æ­£å¸¸ |
| 27 | ä¿å­˜åŠŸèƒ½ | åŒä¸Š | è°ƒç”¨ä¿å­˜æ¥å£ | ä¿å­˜æˆåŠŸ |
| 28 | åŠ è½½çŠ¶æ€ | åŒä¸Š | LoadingçŠ¶æ€ã€é”™è¯¯æç¤º | äº¤äº’å‹å¥½ |
| 29 | é‡æ–°ç”Ÿæˆ | åŒä¸Š | åŸºäºç›¸åŒè¾“å…¥å†æ¬¡ç”Ÿæˆ | é‡æ–°ç”Ÿæˆæ­£å¸¸ |
| 30 | å‰ç«¯æ„å»ºæµ‹è¯• | é¡¹ç›®æ ¹ç›®å½• | æ‰§è¡Œ`pnpm build` | æ„å»ºæˆåŠŸ |

**Day 6-7 éªŒæ”¶æ ‡å‡†**:
- âœ… å®Œæ•´çš„ç”Ÿæˆæµç¨‹å¯ç”¨
- âœ… ç”¨æˆ·ä½“éªŒæµç•…
- âœ… å‰ç«¯æ„å»ºæˆåŠŸ

---

#### Day 8-9: ç¬”è®°ç®¡ç†é¡µé¢

| æ­¥éª¤ | ä»»åŠ¡ | æ–‡ä»¶è·¯å¾„ | å·¥ä½œå†…å®¹ | éªŒæ”¶æ ‡å‡† |
|-----|------|---------|---------|---------|
| 31 | åˆ—è¡¨é¡µé¢ | `pages/xhs/notes/index.vue` | åˆ›å»ºç¬”è®°åˆ—è¡¨é¡µ | åˆ—è¡¨æ˜¾ç¤ºæ­£å¸¸ |
| 32 | ç¬”è®°å¡ç‰‡ç»„ä»¶ | `components/xhs/note-card.vue` | å¡ç‰‡ç»„ä»¶ï¼ˆç¼©ç•¥å›¾+æ ‡é¢˜+æ—¶é—´ï¼‰ | å¡ç‰‡æ˜¾ç¤ºæ­£å¸¸ |
| 33 | æœç´¢åŠŸèƒ½ | `pages/xhs/notes/index.vue` | æœç´¢æ¡† + æœç´¢API | æœç´¢åŠŸèƒ½æ­£å¸¸ |
| 34 | åˆ é™¤åŠŸèƒ½ | åŒä¸Š | åˆ é™¤æŒ‰é’® + ç¡®è®¤å¼¹çª—ï¼ˆUModalï¼‰ | åˆ é™¤åŠŸèƒ½æ­£å¸¸ |
| 35 | åˆ†é¡µå™¨ | åŒä¸Š | ä½¿ç”¨UPaginationç»„ä»¶ | åˆ†é¡µåŠŸèƒ½æ­£å¸¸ |
| 36 | ç©ºçŠ¶æ€ | åŒä¸Š | æ— ç¬”è®°æ—¶çš„ç©ºçŠ¶æ€æç¤º | ç©ºçŠ¶æ€æ˜¾ç¤º |

**Day 8-9 éªŒæ”¶æ ‡å‡†**:
- âœ… ç¬”è®°åˆ—è¡¨æ­£å¸¸æ˜¾ç¤º
- âœ… æœç´¢ã€åˆ é™¤åŠŸèƒ½æ­£å¸¸
- âœ… åˆ†é¡µåŠŸèƒ½æ­£å¸¸

---

#### Day 10: ç¬”è®°ç¼–è¾‘å™¨

| æ­¥éª¤ | ä»»åŠ¡ | æ–‡ä»¶è·¯å¾„ | å·¥ä½œå†…å®¹ | éªŒæ”¶æ ‡å‡† |
|-----|------|---------|---------|---------|
| 37 | ç¼–è¾‘å™¨é¡µé¢ | `pages/xhs/notes/[id].vue` | åŠ¨æ€è·¯ç”±ç¼–è¾‘é¡µ | é¡µé¢å¯è®¿é—® |
| 38 | æ ‡é¢˜è¾“å…¥ | åŒä¸Š | å•ç‹¬çš„æ ‡é¢˜è¾“å…¥æ¡† | æ ‡é¢˜å¯ç¼–è¾‘ |
| 39 | æ­£æ–‡ç¼–è¾‘ | åŒä¸Š | UTextareaç¼–è¾‘æ­£æ–‡ | æ­£æ–‡å¯ç¼–è¾‘ |
| 40 | å­—æ•°ç»Ÿè®¡ | åŒä¸Š | å®æ—¶è®¡ç®—å­—æ•° | ç»Ÿè®¡æ­£ç¡® |
| 41 | æ›´æ–°åŠŸèƒ½ | åŒä¸Š | è°ƒç”¨æ›´æ–°æ¥å£ä¿å­˜ä¿®æ”¹ | æ›´æ–°æˆåŠŸ |
| 42 | è¿”å›åˆ—è¡¨ | åŒä¸Š | è¿”å›æŒ‰é’® | å¯è¿”å›åˆ—è¡¨ |

**Day 10 éªŒæ”¶æ ‡å‡†**:
- âœ… å¯ç¼–è¾‘å·²ä¿å­˜çš„ç¬”è®°
- âœ… æ›´æ–°åŠŸèƒ½æ­£å¸¸

---

### ğŸ“… Week 3: å¢å¼ºåŠŸèƒ½ + æµ‹è¯•éƒ¨ç½²

#### Day 11-12: åˆ†ç»„ç®¡ç†

| æ­¥éª¤ | ä»»åŠ¡ | æ–‡ä»¶è·¯å¾„ | å·¥ä½œå†…å®¹ | éªŒæ”¶æ ‡å‡† |
|-----|------|---------|---------|---------|
| 43 | åˆ†ç»„å®ä½“ | å·²å®Œæˆï¼ˆDay 1ï¼‰ | XhsGroupå®ä½“ | - |
| 44 | åˆ†ç»„Service | `services/xhs-group.service.ts` | åˆ†ç»„CRUDæœåŠ¡ | Serviceæ­£å¸¸ |
| 45 | åˆ†ç»„Controller | `controllers/web/xhs-group.web.controller.ts` | åˆ†ç»„æ¥å£ | æ¥å£æ­£å¸¸ |
| 46 | åˆ†ç»„ç®¡ç†å¼¹çª— | `components/xhs/group-manager.vue` | åˆ†ç»„ç®¡ç†UIç»„ä»¶ | å¼¹çª—æ˜¾ç¤ºæ­£å¸¸ |
| 47 | åˆ†ç»„ç­›é€‰ | `pages/xhs/notes/index.vue` | å·¦ä¾§åˆ†ç»„åˆ—è¡¨ | ç­›é€‰åŠŸèƒ½æ­£å¸¸ |
| 48 | ç§»åŠ¨åˆ†ç»„åŠŸèƒ½ | åŒä¸Š | ç¬”è®°ç§»åŠ¨åˆ°åˆ†ç»„ | ç§»åŠ¨åŠŸèƒ½æ­£å¸¸ |

**Day 11-12 éªŒæ”¶æ ‡å‡†**:
- âœ… åˆ†ç»„ç®¡ç†åŠŸèƒ½å®Œæ•´
- âœ… å¯æŒ‰åˆ†ç»„ç­›é€‰ç¬”è®°

---

#### Day 13-14: çƒ­é—¨ä¸»é¢˜ + ç®€åŒ–é…å›¾

| æ­¥éª¤ | ä»»åŠ¡ | æ–‡ä»¶è·¯å¾„ | å·¥ä½œå†…å®¹ | éªŒæ”¶æ ‡å‡† |
|-----|------|---------|---------|---------|
| 49 | çƒ­é—¨ä¸»é¢˜è¡¨ | å®ä½“ + è¿ç§» | XhsHotTopicå®ä½“ | è¡¨åˆ›å»ºæˆåŠŸ |
| 50 | ä¸»é¢˜Service | `services/xhs-hot-topic.service.ts` | ä¸»é¢˜æŸ¥è¯¢æœåŠ¡ | Serviceæ­£å¸¸ |
| 51 | ä¸»é¢˜Controller | `controllers/web/` | ä¸»é¢˜æ¥å£ | æ¥å£æ­£å¸¸ |
| 52 | ä¸»é¢˜UI | `pages/xhs/index.vue` | æ¨ªå‘æ»šåŠ¨æ ‡ç­¾ | æ ‡ç­¾æ˜¾ç¤ºæ­£å¸¸ |
| 53 | ç‚¹å‡»å¡«å…… | åŒä¸Š | ç‚¹å‡»ä¸»é¢˜å¡«å……åˆ°è¾“å…¥æ¡† | å¡«å……åŠŸèƒ½æ­£å¸¸ |
| 54 | è‡ªåŠ¨é…å›¾æ¥å£ | `xhs-note.service.ts` | è°ƒç”¨AIç”Ÿæˆé…å›¾ | é…å›¾æ¥å£æ­£å¸¸ |
| 55 | é…å›¾UIï¼ˆç®€åŒ–ï¼‰ | `pages/xhs/notes/[id].vue` | è‡ªåŠ¨é…å›¾æŒ‰é’® | æŒ‰é’®åŠŸèƒ½æ­£å¸¸ |

**Day 13-14 éªŒæ”¶æ ‡å‡†**:
- âœ… çƒ­é—¨ä¸»é¢˜å¯ç”¨
- âœ… åŸºç¡€é…å›¾åŠŸèƒ½å¯ç”¨

---

#### Day 15: æµ‹è¯• + ä¼˜åŒ– + éƒ¨ç½²

| æ­¥éª¤ | ä»»åŠ¡ | å‘½ä»¤/è·¯å¾„ | å·¥ä½œå†…å®¹ | éªŒæ”¶æ ‡å‡† |
|-----|------|----------|---------|---------|
| 56 | ç«¯åˆ°ç«¯æµ‹è¯• | æ‰‹åŠ¨æµ‹è¯• | æµ‹è¯•æ‰€æœ‰åŠŸèƒ½æµç¨‹ | åŠŸèƒ½æ­£å¸¸ |
| 57 | Bugä¿®å¤ | æ ¹æ®æµ‹è¯•ç»“æœ | ä¿®å¤å‘ç°çš„é—®é¢˜ | Bugæ¸…é›¶ |
| 58 | æ€§èƒ½ä¼˜åŒ– | - | ä¼˜åŒ–åŠ è½½é€Ÿåº¦ | æ€§èƒ½è¾¾æ ‡ |
| 59 | å‰ç«¯æ„å»º | `pnpm build` | Full rebuildç”Ÿæˆäº§ç‰© | æ„å»ºæˆåŠŸ |
| 60 | åç«¯ç¼–è¯‘ | `pnpm build:api` | ç¼–è¯‘åç«¯ä»£ç  | ç¼–è¯‘æˆåŠŸ |
| 61 | éƒ¨ç½²æµ‹è¯• | Docker/PM2 | éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ | éƒ¨ç½²æˆåŠŸ |
| 62 | çº¿ä¸ŠéªŒè¯ | ç”Ÿäº§ç¯å¢ƒ | éªŒè¯æ‰€æœ‰åŠŸèƒ½ | éªŒè¯é€šè¿‡ |

**Day 15 éªŒæ”¶æ ‡å‡†**:
- âœ… æ‰€æœ‰åŠŸèƒ½ç¨³å®š
- âœ… æ„å»ºæˆåŠŸ
- âœ… éƒ¨ç½²ä¸Šçº¿

---

## ä¸‰ã€æŠ€æœ¯å®ç°å‚è€ƒ

### 3.1 åç«¯æ¨¡å—ç»“æ„ï¼ˆå‚è€ƒTagæ¨¡å—ï¼‰

```
packages/api/src/modules/xhs/
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ console/              # åå°ç®¡ç†æ¥å£ï¼ˆå¯é€‰ï¼‰
â”‚   â”‚   â””â”€â”€ xhs-note.controller.ts
â”‚   â””â”€â”€ web/                  # å‰å°æ¥å£
â”‚       â”œâ”€â”€ xhs-note.web.controller.ts
â”‚       â””â”€â”€ xhs-group.web.controller.ts
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ xhs-note.service.ts   # ç¬”è®°æœåŠ¡
â”‚   â””â”€â”€ xhs-group.service.ts  # åˆ†ç»„æœåŠ¡
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ create-note.dto.ts
â”‚   â”œâ”€â”€ update-note.dto.ts
â”‚   â”œâ”€â”€ query-note.dto.ts
â”‚   â””â”€â”€ index.ts
â””â”€â”€ xhs.module.ts             # æ¨¡å—å®šä¹‰
```

### 3.2 å®ä½“å®šä¹‰ç¤ºä¾‹

```typescript
// packages/@buildingai/db/entities/xhs-note.entity.ts
import { Entity, Column, ManyToOne } from 'typeorm';
import { BaseEntity } from './base.entity';
import { User } from './user.entity';
import { XhsGroup } from './xhs-group.entity';

@Entity('xhs_notes')
export class XhsNote extends BaseEntity {
    @Column({ type: 'varchar', length: 200 })
    title: string;

    @Column({ type: 'text' })
    content: string;

    @Column({ type: 'jsonb', nullable: true })
    coverImages: string[];

    @Column({ type: 'int', default: 0 })
    wordCount: number;

    @Column({ type: 'varchar', length: 50, default: 'ai-generate' })
    mode: string;

    @ManyToOne(() => User)
    user: User;

    @ManyToOne(() => XhsGroup, { nullable: true })
    group: XhsGroup;
}
```

### 3.3 æµå¼å“åº”å®ç°

```typescript
// Controller
@Post('generate')
async generate(@Body() dto: GenerateNoteDto, @Res() res: Response) {
    res.setHeader('Content-Type', 'text/event-stream');
    res.setHeader('Cache-Control', 'no-cache');
    res.setHeader('Connection', 'keep-alive');
    
    await this.xhsNoteService.generateStream(dto, res);
}

// Service
async generateStream(dto: GenerateNoteDto, res: Response) {
    const stream = await this.aiService.streamGenerate(dto.content);
    
    for await (const chunk of stream) {
        res.write(`data: ${JSON.stringify({ delta: chunk })}\n\n`);
    }
    
    res.write('data: [DONE]\n\n');
    res.end();
}
```

### 3.4 å‰ç«¯æµå¼æ¥æ”¶

```typescript
// pages/xhs/index.vue
const handleGenerate = async () => {
    const eventSource = new EventSource(
        `/api/web/xhs/generate?content=${encodeURIComponent(inputContent.value)}`
    );
    
    eventSource.onmessage = (event) => {
        if (event.data === '[DONE]') {
            eventSource.close();
            return;
        }
        
        const data = JSON.parse(event.data);
        generatedContent.value += data.delta;
    };
    
    eventSource.onerror = () => {
        eventSource.close();
        useToast().add({ title: 'ç”Ÿæˆå¤±è´¥', color: 'red' });
    };
};
```

---

## å››ã€å…³é”®æ³¨æ„äº‹é¡¹

### 4.1 å‰ç«¯å¼€å‘æ³¨æ„äº‹é¡¹

1. **å‰ç«¯ä¿®æ”¹åå¿…é¡»Full Rebuild**
   ```bash
   # ä¿®æ”¹pages/xhsä¸‹çš„æ–‡ä»¶å
   pnpm build  # å¿…é¡»å®Œæ•´æ„å»º
   ```

2. **å¤ç”¨ç°æœ‰ç»„ä»¶**
   - æŒ‰é’®ï¼š`UButton`
   - è¾“å…¥ï¼š`UTextarea`ã€`UInput`
   - å¼¹çª—ï¼š`UModal`
   - æ ‡ç­¾é¡µï¼š`UTabs`
   - å¡ç‰‡ï¼š`UCard`
   - æç¤ºï¼š`useToast()`

3. **è·¯ç”±è§„èŒƒ**
   - ä¸»é¡µï¼š`/xhs` â†’ `pages/xhs/index.vue`
   - åˆ—è¡¨ï¼š`/xhs/notes` â†’ `pages/xhs/notes/index.vue`
   - ç¼–è¾‘ï¼š`/xhs/notes/:id` â†’ `pages/xhs/notes/[id].vue`

### 4.2 åç«¯å¼€å‘æ³¨æ„äº‹é¡¹

1. **AppModuleæ³¨å†Œæ–°æ¨¡å—**
   ```typescript
   // packages/api/src/modules/app.module.ts
   imports: [
       // ... å…¶ä»–æ¨¡å—
       XhsModule,  // æ·»åŠ æ–°æ¨¡å—
   ]
   ```

2. **æ•°æ®åº“è¿ç§»å‘½ä»¤**
   ```bash
   # ç”Ÿæˆè¿ç§»
   pnpm migration:generate --name=CreateXhsTables
   
   # æ‰§è¡Œè¿ç§»
   pnpm migration:run
   ```

3. **é‰´æƒè£…é¥°å™¨**
   ```typescript
   // éœ€è¦ç™»å½•
   @WebController('xhs')
   
   // å…¬å¼€æ¥å£
   @Public()
   @Get('hot-topics')
   ```

4. **ç»§æ‰¿BaseService**
   ```typescript
   @Injectable()
   export class XhsNoteService extends BaseService<XhsNote> {
       constructor(
           @InjectRepository(XhsNote) 
           private readonly noteRepository: Repository<XhsNote>
       ) {
           super(noteRepository);
       }
   }
   ```

### 4.3 æ•°æ®åº“æ³¨æ„äº‹é¡¹

1. **å®ä½“å¯¼å‡º**
   ```typescript
   // packages/@buildingai/db/entities/index.ts
   export * from './xhs-note.entity';
   export * from './xhs-group.entity';
   ```

2. **å…³ç³»å®šä¹‰**
   - ç”¨æˆ·å…³è”ï¼š`@ManyToOne(() => User)`
   - åˆ†ç»„å…³è”ï¼š`@ManyToOne(() => XhsGroup)`

---

## äº”ã€å¹¶è¡Œå¼€å‘ç­–ç•¥

### 5.1 å¯å¹¶è¡Œä»»åŠ¡

**Group Aï¼ˆåç«¯å›¢é˜Ÿï¼‰**ï¼šDay 1-4 å®Œæˆæ‰€æœ‰åç«¯æ¥å£
**Group Bï¼ˆå‰ç«¯å›¢é˜Ÿï¼‰**ï¼šDay 3å¼€å§‹å¯ä»¥ä½¿ç”¨Mockæ•°æ®å¹¶è¡Œå¼€å‘UI
**Group Cï¼ˆè”è°ƒï¼‰**ï¼šDay 5-6 å‰åç«¯è”è°ƒ

### 5.2 ä¾èµ–å…³ç³»

```
æ•°æ®åº“å®ä½“ â†’ åç«¯Service â†’ åç«¯Controller
                              â†“
                         å‰ç«¯é¡µé¢ â†’ å‰ç«¯ç»„ä»¶
```

### 5.3 å…³é”®é‡Œç¨‹ç¢‘

- **Week 1ç»“æŸ**ï¼šæ ¸å¿ƒç”ŸæˆåŠŸèƒ½å¯ç”¨
- **Week 2ç»“æŸ**ï¼šç¬”è®°ç®¡ç†åŠŸèƒ½å®Œæ•´
- **Week 3ç»“æŸ**ï¼šMVPä¸Šçº¿

---

## å…­ã€æµ‹è¯•è®¡åˆ’

### 6.1 åŠŸèƒ½æµ‹è¯•æ¸…å•

- [ ] ç”¨æˆ·å¯ä»¥è¾“å…¥ä¸»é¢˜ç”Ÿæˆå†…å®¹
- [ ] æ”¯æŒ3ç§ç”Ÿæˆæ¨¡å¼åˆ‡æ¢
- [ ] ç”Ÿæˆçš„å†…å®¹å¯ä»¥æµå¼æ˜¾ç¤º
- [ ] å¯ä»¥å¤åˆ¶æ ‡é¢˜å’Œæ­£æ–‡
- [ ] å¯ä»¥ä¿å­˜ç¬”è®°
- [ ] å¯ä»¥æŸ¥çœ‹ç¬”è®°åˆ—è¡¨
- [ ] å¯ä»¥æœç´¢ç¬”è®°
- [ ] å¯ä»¥åˆ é™¤ç¬”è®°
- [ ] å¯ä»¥ç¼–è¾‘ç¬”è®°
- [ ] å¯ä»¥åˆ›å»ºå’Œç®¡ç†åˆ†ç»„
- [ ] çƒ­é—¨ä¸»é¢˜å¯ç‚¹å‡»ä½¿ç”¨
- [ ] åŸºç¡€çš„è‡ªåŠ¨é…å›¾åŠŸèƒ½

### 6.2 æ€§èƒ½æµ‹è¯•

- [ ] é¦–å±åŠ è½½æ—¶é—´ < 2ç§’
- [ ] AIç”Ÿæˆå“åº”æ—¶é—´ < 5ç§’
- [ ] åˆ—è¡¨åˆ†é¡µæŸ¥è¯¢ < 500ms

### 6.3 å…¼å®¹æ€§æµ‹è¯•

- [ ] Chromeæœ€æ–°ç‰ˆ
- [ ] Safariæœ€æ–°ç‰ˆ
- [ ] Edgeæœ€æ–°ç‰ˆ
- [ ] ç§»åŠ¨ç«¯å“åº”å¼

---

## ä¸ƒã€é£é™©ä¸åº”å¯¹

| é£é™© | å½±å“ | åº”å¯¹æªæ–½ | ä¼˜å…ˆçº§ |
|-----|------|---------|-------|
| AIæ¥å£ä¸ç¨³å®š | ç”Ÿæˆå¤±è´¥ç‡é«˜ | å¢åŠ é‡è¯•æœºåˆ¶ã€é™çº§æç¤º | P0 |
| æµå¼å“åº”å…¼å®¹æ€§ | éƒ¨åˆ†æµè§ˆå™¨ä¸æ”¯æŒ | é™çº§ä¸ºè½®è¯¢æ–¹æ¡ˆ | P1 |
| æ•°æ®åº“æ€§èƒ½ | ç¬”è®°é‡å¤§æ—¶æŸ¥è¯¢æ…¢ | æ·»åŠ ç´¢å¼•ã€åˆ†é¡µæŸ¥è¯¢ | P1 |
| å‰ç«¯æ„å»ºæŠ¥é”™ | æ— æ³•ç”Ÿæˆäº§ç‰© | è®°ä½ï¼šéœ€è¦full rebuild | P0 |

---

## å…«ã€ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®æ”¹å†…å®¹ | ä¿®æ”¹äºº |
|-----|------|---------|-------|
| v1.0.0 | 2026-01-09 | åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºäºé¡¹ç›®æ¡†æ¶åˆ¶å®šMVPè®¡åˆ’ | - |

---

## ä¹ã€å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ•°æ®åº“å®ä½“ï¼ˆDay 1ä¸Šåˆï¼‰

1. åˆ›å»ºæ–‡ä»¶ï¼š`packages/@buildingai/db/entities/xhs-note.entity.ts`
2. åˆ›å»ºæ–‡ä»¶ï¼š`packages/@buildingai/db/entities/xhs-group.entity.ts`
3. å¯¼å‡ºå®ä½“ï¼šåœ¨ `index.ts` ä¸­å¯¼å‡º

### ç¬¬äºŒæ­¥ï¼šç”Ÿæˆè¿ç§»ï¼ˆDay 1ä¸‹åˆï¼‰

```bash
pnpm migration:generate --name=CreateXhsTables
pnpm migration:run
```

### ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºåç«¯æ¨¡å—ï¼ˆDay 2ï¼‰

1. åˆ›å»ºç›®å½•ï¼š`packages/api/src/modules/xhs/`
2. åˆ›å»ºDTOã€Serviceã€Controller
3. æ³¨å†Œåˆ°AppModule

### ç¬¬å››æ­¥ï¼šå¼€å‘å‰ç«¯é¡µé¢ï¼ˆDay 5å¼€å§‹ï¼‰

1. ä¿®æ”¹ï¼š`packages/web/buildingai-ui/app/pages/xhs/index.vue`
2. å®ç°ç”ŸæˆåŠŸèƒ½
3. æ‰§è¡Œæ„å»ºï¼š`pnpm build`

---

**ç¥å¼€å‘é¡ºåˆ©ï¼** ğŸš€
