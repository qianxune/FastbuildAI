const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BaAmzrnM.js","./pVZZS-72.js","./EtrisF04.js","./CFMQFib2.js","./CZmFWyWl.js","./TGMj2fgS.js","./BU4xloRu.js","./BCKMtGRm.js","./z2CrSoMD.js","./DdWr1-5r.js"])))=>i.map(i=>d[i]);
import{v as D,j as G,k as Q,a3 as Y,l as Z,aS as H,a5 as J,aT as K,f as u,x as A,o as l,A as m,D as r,d,O as _,Q as c,M as e,aU as W,$ as w,R as p,E as V,aC as X,z as ee,T as h,p as te,S as se,_ as oe}from"#entry";import{_ as ne}from"./DdWr1-5r.js";import{c as re,a as C,b as ae,_ as ie}from"./DYdmwcI2.js";import{_ as le}from"./C3PBHawL.js";import{_ as me}from"./BgDSw5dl.js";import{L as ce}from"./ComoKIaa.js";import{u as ue}from"./CYlYQAu0.js";import"./CqkleIqs.js";import"./BA_H9tzV.js";import"./DAuIF7bR.js";import"./DvyFBN4o.js";import"./z2CrSoMD.js";import"./Cci7V6xo.js";import"./BU4xloRu.js";import"./BCKMtGRm.js";import"./TGMj2fgS.js";import"./By0PsbOB.js";import"./BHvPiaia.js";import"./B5nlWy8g.js";import"./j-r9zBVO.js";/* empty css        */import"./DlAUqK2U.js";import"./Dvwp2zQj.js";import"./CZmFWyWl.js";import"./CPXIjpTD.js";import"./Ch4YF7us.js";const de={class:"flex"},pe={key:0,class:"mt-2"},ge={class:"inline-flex items-center","aria-label":"Password requirements"},_e={class:"space-y-1 p-2","aria-label":"Password requirements"},fe={class:"text-xs font-light"},we={class:"sr-only"},he={key:0,class:"mt-8 mb-4 text-left"},Qe=D({__name:"login",emits:["switchComponent","success"],setup(xe,{emit:U}){const L=te(()=>oe(()=>import("./BaAmzrnM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)),x=U,{ensureAgreementAccepted:q}=ue({width:"!w-[420px]"},V),f=G(),v=Q(),z=Y(),{t}=Z(),T=re({username:C().required(t("login.validation.accountRequired")).min(3,t("login.validation.accountMinLength")),password:C().required(t("login.validation.passwordRequired")).min(6,t("login.validation.passwordMinLength")).max(25,t("login.validation.passwordMaxLength"))}),a=H({username:"",password:"",terminal:"1"}),{lockFn:F,isLock:M}=J(async()=>{if(await q())try{const o=await K(a);x("success",o)}catch(o){z.error(t("login.messages.loginFailed")),console.error(t("login.messages.loginFailed"),o)}});function N(s){return[{regex:/.{8,}/,text:t("login.requirements.minLength8")},{regex:/\d/,text:t("login.requirements.number")},{regex:/[a-z]/,text:t("login.requirements.lowercase")},{regex:/[A-Z]/,text:t("login.requirements.uppercase")}].map(g=>({met:g.regex.test(s),text:g.text}))}const y=u(()=>N(a.password)),i=u(()=>y.value.filter(s=>s.met).length),b=u(()=>i.value===0?"neutral":i.value<=1?"error":i.value<=2||i.value===3?"warning":"success"),S=u(()=>i.value===0?"":i.value<=1?t("login.strength.weak"):i.value<=3?t("login.strength.medium"):t("login.strength.strong")),B=u(()=>{const s=b.value;return s==="error"?"text-error":s==="warning"?"text-warning":s==="success"?"text-success":"text-muted"});return(s,o)=>{const g=ne,$=ae,I=le,R=W,k=V,E=me,P=se,O=ie;return l(),A(O,{schema:e(T),state:e(a),onSubmit:e(F)},{default:m(()=>[r($,{label:s.$t("login.account"),name:"username",required:""},{default:m(()=>[r(g,{modelValue:e(a).username,"onUpdate:modelValue":o[0]||(o[0]=n=>e(a).username=n),class:"w-full",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:s.$t("login.usernamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r($,{label:s.$t("login.password"),name:"password",class:"mt-2",required:""},{default:m(()=>[c("div",de,[r(I,{modelValue:e(a).password,"onUpdate:modelValue":o[1]||(o[1]=n=>e(a).password=n),class:"w-full",type:"password",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:s.$t("login.passwordPlaceholder")},null,8,["modelValue","placeholder"])]),e(a).password?(l(),d("div",pe,[r(R,{color:e(b),"model-value":e(i),max:4,size:"sm"},null,8,["color","model-value"]),e(S)?(l(),d("div",{key:0,class:w(["mt-1 flex items-center gap-1 text-xs font-medium",e(B)])},[c("span",null,p(e(S)),1),r(E,{mode:"hover","open-delay":0},{content:m(()=>[c("ul",_e,[(l(!0),d(X,null,ee(e(y),(n,j)=>(l(),d("li",{key:j,class:w(["flex items-center gap-0.5",n.met?"text-success":"text-muted"])},[r(k,{name:n.met?"i-lucide-circle-check":"i-lucide-circle-x",class:"size-4 shrink-0"},null,8,["name"]),c("span",fe,[h(p(n.text)+" ",1),c("span",we,p(n.met?e(t)("login.strength.met"):e(t)("login.strength.notMet")),1)])],2))),128))])]),default:m(()=>[c("span",ge,[r(k,{name:"i-lucide-help-circle",class:"size-3.5"})])]),_:1})],2)):_("",!0)])):_("",!0)]),_:1},8,["label"]),e(f).loginSettings?.showPolicyAgreement?(l(),d("div",he,[r(e(L),{modelValue:e(v).isAgreed,"onUpdate:modelValue":o[2]||(o[2]=n=>e(v).isAgreed=n)},null,8,["modelValue"])])):_("",!0),c("div",{class:w(["flex flex-1 gap-4 pb-8",{"mt-8":!e(f).loginSettings?.showPolicyAgreement}])},[e(f).loginSettings?.allowedRegisterMethods.includes(e(ce).ACCOUNT)?(l(),A(P,{key:0,variant:"outline",color:"primary",size:"lg",ui:{base:"flex-1 justify-center p-3"},onClick:o[3]||(o[3]=n=>x("switchComponent","account-register"))},{default:m(()=>[h(p(s.$t("login.register")),1)]),_:1})):_("",!0),r(P,{color:"primary",type:"submit",size:"lg",ui:{base:"flex-1 justify-center p-3"},loading:e(M)},{default:m(()=>[h(p(s.$t("login.loginNow")),1)]),_:1},8,["loading"])],2)]),_:1},8,["schema","state","onSubmit"])}}});export{Qe as default};
