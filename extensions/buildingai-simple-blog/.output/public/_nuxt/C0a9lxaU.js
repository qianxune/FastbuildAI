const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BaAmzrnM.js","./pVZZS-72.js","./EtrisF04.js","./CFMQFib2.js","./CZmFWyWl.js","./TGMj2fgS.js","./BU4xloRu.js","./BCKMtGRm.js","./z2CrSoMD.js","./DdWr1-5r.js"])))=>i.map(i=>d[i]);
import{v as j,j as D,k as O,l as Q,g as Z,a5 as G,aV as H,f as d,x as J,o as m,A as l,D as o,d as p,O as h,Q as c,aU as K,$ as v,R as u,E as q,aC as W,z as X,T as f,M as n,p as Y,S as ee,_ as te}from"#entry";import{_ as se}from"./DdWr1-5r.js";import{c as oe,a as x,d as ae,b as re,_ as ne}from"./DYdmwcI2.js";import{_ as le}from"./C3PBHawL.js";import{_ as ie}from"./BgDSw5dl.js";import{u as ce}from"./CYlYQAu0.js";import"./CqkleIqs.js";import"./BA_H9tzV.js";import"./DAuIF7bR.js";import"./DvyFBN4o.js";import"./z2CrSoMD.js";import"./Cci7V6xo.js";import"./BU4xloRu.js";import"./BCKMtGRm.js";import"./TGMj2fgS.js";import"./By0PsbOB.js";import"./Ch4YF7us.js";const me={key:0,class:"mt-2"},ue={class:"inline-flex cursor-help items-center","aria-label":"Password requirements"},de={class:"space-y-1 p-2","aria-label":"Password requirements"},pe={class:"text-xs font-light"},ge={class:"sr-only"},fe={class:"flex items-center gap-1 text-xs"},_e={key:0,class:"mt-8 mb-4 text-left"},Me=j({__name:"register",emits:["switchComponent","success"],setup(we,{emit:z}){const U=Y(()=>te(()=>import("./BaAmzrnM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)),b=z,$=D(),P=O(),{t:e}=Q(),{ensureAgreementAccepted:C}=ce({width:"!w-[420px]"},q),L=oe({username:x().required(e("login.validation.accountRequired")).min(3,e("login.validation.accountMinLength")).max(20,e("login.validation.accountMaxLength")),password:x().required(e("login.validation.passwordRequired")).min(6,e("login.validation.passwordMinLength")).max(25,e("login.validation.passwordMaxLength")).matches(/^(?=.*[a-z])(?=.*[0-9!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?])/,e("login.validation.passwordFormat")),confirmPassword:x().required(e("login.validation.confirmPasswordRequired")).oneOf([ae("password")],e("login.validation.passwordMismatch"))}),r=Z({username:"",password:"",confirmPassword:""}),{lockFn:F,isLock:M}=G(async()=>{if(await C())try{const s=await H({terminal:"1",...r});b("success",{...s,...s.user})}catch(s){console.log(e("login.messages.registerFailed"),s)}});function R(t){return[{regex:/.{8,}/,text:e("login.requirements.minLength8")},{regex:/\d/,text:e("login.requirements.number")},{regex:/[a-z]/,text:e("login.requirements.lowercase")},{regex:/[A-Z]/,text:e("login.requirements.uppercase")}].map(g=>({met:g.regex.test(t),text:g.text}))}const y=d(()=>R(r.password)),i=d(()=>y.value.filter(t=>t.met).length),V=d(()=>i.value===0?"neutral":i.value<=1?"error":i.value<=2||i.value===3?"warning":"success"),k=d(()=>i.value===0?"":i.value<=1?e("login.strength.weak"):i.value<=3?e("login.strength.medium"):e("login.strength.strong")),T=d(()=>{const t=V.value;return t==="error"?"text-error":t==="warning"?"text-warning":t==="success"?"text-success":"text-muted"});return(t,s)=>{const g=se,_=re,S=le,B=K,w=q,I=ie,A=ee,N=ne;return m(),J(N,{schema:n(L),state:r,onSubmit:n(F)},{default:l(()=>[o(_,{label:t.$t("login.account"),name:"username",required:""},{default:l(()=>[o(g,{modelValue:r.username,"onUpdate:modelValue":s[0]||(s[0]=a=>r.username=a),class:"w-full",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:t.$t("login.placeholders.enterAccount")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(_,{label:t.$t("login.password"),name:"password",class:"mt-2",required:""},{default:l(()=>[o(S,{modelValue:r.password,"onUpdate:modelValue":s[1]||(s[1]=a=>r.password=a),class:"w-full",type:"password",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:t.$t("login.placeholders.enterPassword")},null,8,["modelValue","placeholder"]),r.password?(m(),p("div",me,[o(B,{color:V.value,"model-value":i.value,max:4,size:"sm"},null,8,["color","model-value"]),k.value?(m(),p("div",{key:0,class:v(["mt-1 flex items-center gap-1 text-xs font-medium",T.value])},[c("span",null,u(k.value),1),o(I,{mode:"hover"},{content:l(()=>[c("ul",de,[(m(!0),p(W,null,X(y.value,(a,E)=>(m(),p("li",{key:E,class:v(["flex items-center gap-0.5",a.met?"text-success":"text-muted"])},[o(w,{name:a.met?"i-lucide-circle-check":"i-lucide-circle-x",class:"size-4 shrink-0"},null,8,["name"]),c("span",pe,[f(u(a.text)+" ",1),c("span",ge,u(a.met?n(e)("login.strength.met"):n(e)("login.strength.notMet")),1)])],2))),128))])]),default:l(()=>[c("span",ue,[o(w,{name:"i-lucide-help-circle",class:"size-3.5"})])]),_:1})],2)):h("",!0)])):h("",!0)]),_:1},8,["label"]),o(_,{label:t.$t("login.confirmPassword"),name:"confirmPassword",class:"mt-2",required:""},{help:l(()=>[c("div",fe,[o(w,{name:"tabler:alert-circle",size:"14"}),f(" "+u(t.$t("login.passwordRule")),1)])]),default:l(()=>[o(S,{modelValue:r.confirmPassword,"onUpdate:modelValue":s[2]||(s[2]=a=>r.confirmPassword=a),class:"w-full",type:"password",size:"lg",ui:{base:"bg-transparent p-3"},placeholder:t.$t("login.placeholders.enterPasswordAgain")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n($).loginSettings?.showPolicyAgreement?(m(),p("div",_e,[o(n(U),{modelValue:n(P).isAgreed,"onUpdate:modelValue":s[3]||(s[3]=a=>n(P).isAgreed=a)},null,8,["modelValue"])])):h("",!0),c("div",{class:v(["flex flex-1 gap-4 pb-8",{"mt-8":!n($).loginSettings?.showPolicyAgreement}])},[o(A,{variant:"outline",color:"primary",size:"lg",ui:{base:"flex-1 justify-center p-3"},onClick:s[4]||(s[4]=a=>b("switchComponent","account-login"))},{default:l(()=>[f(u(t.$t("login.backToLogin")),1)]),_:1}),o(A,{color:"primary",type:"submit",size:"lg",loading:n(M),ui:{base:"flex-1 justify-center p-3"}},{default:l(()=>[f(u(t.$t("login.registerNow")),1)]),_:1},8,["loading"])],2)]),_:1},8,["schema","state","onSubmit"])}}});export{Me as default};
