const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CmXzYKV7.js","./DdWr1-5r.js","./pVZZS-72.js","./DYdmwcI2.js","./CqkleIqs.js","./Djep58hR.js","./BJDY5_Md.js","./BA_H9tzV.js","./DAuIF7bR.js","./DvyFBN4o.js","./z2CrSoMD.js","./Cci7V6xo.js","./BU4xloRu.js","./BCKMtGRm.js","./TGMj2fgS.js","./By0PsbOB.js","./f0n4UPto.js","./C9ze5RlS.js","./BMSQkwth.js","./NQisrkBv.js","./Dvwp2zQj.js","./CZmFWyWl.js","./CnmASW3b.js","./DlAUqK2U.js","./bHLwCD_d.js","./CkFSApSf.js"])))=>i.map(i=>d[i]);
import{v as A,b6 as D,a3 as F,l as S,g as R,a5 as p,h as j,d as y,Q as d,x as w,D as u,A as B,M as t,R as b,S as C,a4 as E,o as m,E as I,p as L,_ as U}from"#entry";import{b as $,c as z}from"./BqooJc1P.js";import{A as M}from"./bHLwCD_d.js";function O(i,r){return Object.keys(i).forEach(c=>{const s=c,e=r[s];e!==void 0&&(typeof e=="object"&&e!==null?Object.keys(e).length>0&&(i[s]=e):i[s]=e)}),i}const P={class:"article-edit-container relative"},T={class:"bg-background sticky top-0 z-10 mb-4 flex w-full items-center justify-baseline pb-2"},V={class:"text-base font-medium"},N={class:"ml-4 text-xl font-bold"},Q={key:0,class:"flex items-center justify-center py-10"},H=A({__name:"edit",setup(i){const r=L(()=>U(()=>import("./CmXzYKV7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url)),{query:c}=D(),s=E(),e=F(),{t:n}=S(),_=R({title:"",content:"",summary:"",cover:"",status:M.DRAFT,sort:0,categoryId:void 0}),l=c.id,{lockFn:k,isLock:v}=p(async()=>{if(c.id)try{const a=await $(l);O(_,a)}catch(a){console.error("获取详情失败:",a),e.error(n("article.edit.messages.fetchDetailFailed"))}}),{lockFn:h}=p(async a=>{try{await z(l,a),e.success(n("article.edit.messages.updateSuccess")),setTimeout(()=>s.back(),1e3)}catch(o){console.error("更新失败:",o),e.error(n("article.edit.messages.updateFailed"))}});return j(()=>k()),(a,o)=>{const f=I,g=C;return m(),y("div",P,[d("div",T,[u(g,{color:"neutral",variant:"soft",onClick:o[0]||(o[0]=x=>t(s).back())},{default:B(()=>[u(f,{name:"i-lucide-arrow-left",class:"size-5 cursor-pointer"}),d("span",V,b(t(n)("article.edit.navigation.back")),1)]),_:1}),d("h1",N,b(t(n)("article.edit.title")),1)]),t(v)?(m(),y("div",Q,[u(f,{name:"i-lucide-loader-2",class:"size-8 animate-spin"})])):(m(),w(t(r),{key:1,id:t(l),"initial-data":t(_),onSubmit:t(h),onCancel:o[1]||(o[1]=x=>t(s).back())},null,8,["id","initial-data","onSubmit"]))])}}});export{H as default};
