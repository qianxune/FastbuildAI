import{v as B,l as S,k as A,s as y,a_ as d,b1 as D,x as h,o as a,A as f,d as c,M as e,U as j,r as N,b2 as x,$ as V,Q as s,O as b,D as r,ak as O,R as l,S as E,E as L,T as M,aC as P,z as R,b3 as q}from"#entry";import{_ as F}from"./BHvPiaia.js";import{_ as Q}from"./CcXcNz9k.js";import{_ as G}from"./BgDSw5dl.js";import"./CnmASW3b.js";import"./CPXIjpTD.js";import"./DlAUqK2U.js";import"./BA_H9tzV.js";import"./DAuIF7bR.js";import"./DvyFBN4o.js";import"./z2CrSoMD.js";import"./Cci7V6xo.js";import"./BU4xloRu.js";import"./BCKMtGRm.js";import"./TGMj2fgS.js";import"./By0PsbOB.js";const H={class:"flex flex-1 items-center justify-center gap-2"},J={key:0,class:"flex w-[100px] flex-col"},K={class:"truncate text-sm font-medium"},W={class:"text-secondary-foreground truncate text-xs"},X={key:0},Y={class:"flex flex-col"},Z={class:"max-w-32 truncate text-sm"},ee={class:"text-foreground/60 max-w-32 truncate text-xs"},te={class:"bg-primary/10 mt-4 flex items-center justify-between rounded-xl p-3"},se={class:"flex items-center gap-2 text-sm"},oe={class:"font-medium"},ne={class:"text-primary"},ie={class:"mt-4 grid w-72 grid-cols-4 gap-6"},ae=["onClick"],re={class:"bg-foreground/5 hover:bg-foreground/10 active:bg-foreground/15 flex h-8 w-8 items-center justify-center rounded-full"},le={class:"max-w-full truncate text-center text-xs"},ce={class:"flex justify-between"},de={class:"select-none"},Te=B({__name:"user-profile",props:{size:{default:"md"},collapsed:{type:Boolean,default:!1},content:{}},setup(I){const u=I,{t:m}=S(),t=A(),p=y(!1),$=y([{id:1,icon:"i-lucide-settings",title:"layouts.menu.system",click:()=>d(`/profile/${t.userInfo?.id}/general-settings`)},{id:2,title:"layouts.powerDetail",icon:"i-lucide-database-zap",click:()=>d(`/profile/${t.userInfo?.id}/power-detail`)},{id:3,title:"layouts.userAgreement",icon:"i-lucide-file-text",target:"_blank",path:"/agreement?type=agreement&item=service"},{id:4,title:"layouts.privacyPolicy",icon:"i-lucide-shield-check",target:"_blank",path:"/agreement?type=agreement&item=privacy"}]),w=o=>{o.click?o.click():o.path&&(o.target==="_blank"?d(o.path,{external:!0}):d(o.path)),p.value=!1};return(o,n)=>{const _=O,k=E,g=L,z=F,C=Q,T=G,U=q,v=D("ripple");return a(),h(U,null,{default:f(()=>[e(t).isLogin?(a(),h(T,{key:0,open:e(p),"onUpdate:open":n[4]||(n[4]=i=>j(p)?p.value=i:null),class:"flex",mode:"click",ui:{content:"rounded-2xl"},content:u.content,"close-delay":300},{content:f(()=>[s("div",{class:"p-3",onClick:n[3]||(n[3]=i=>p.value=!1)},[s("div",{class:"hover:bg-muted flex cursor-pointer items-center gap-4 rounded-lg p-3",onClick:n[0]||(n[0]=i=>("navigateTo"in o?o.navigateTo:e(d))(`/profile/${e(t).userInfo?.id}`))},[r(_,{src:e(t).userInfo?.avatar,alt:"Avatar",size:"md","img-class":"bg-foreground/30"},null,8,["src"]),s("div",Y,[s("span",Z,l(e(t).userInfo?.nickname),1),s("span",ee,l(e(t).userInfo?.username),1)]),r(g,{name:"i-lucide-chevron-right",class:"text-foreground/60 ml-auto",size:"20"})]),s("div",te,[s("div",se,[s("span",oe,l(e(m)("layouts.power"))+":",1),s("span",ne,l(e(t).userInfo?.power),1)]),r(k,{size:"xs",onClick:n[1]||(n[1]=i=>("navigateTo"in o?o.navigateTo:e(d))(`/profile/${e(t).userInfo?.id}/personal-rights/member-center`))},{default:f(()=>[M(l(e(m)("layouts.memberSubscription")),1)]),_:1})]),s("div",ie,[(a(!0),c(P,null,R(e($),i=>(a(),c("div",{key:i.id,class:"group flex w-full flex-1 cursor-pointer flex-col items-center gap-2",onClick:ue=>w(i)},[x((a(),c("div",re,[r(g,{name:i.icon},null,8,["name"])])),[[v]]),s("p",le,l(e(m)(i.title)),1)],8,ae))),128))]),r(z,{class:"py-4"}),s("div",ce,[x((a(),c("div",{class:"flex cursor-pointer items-center gap-1 rounded-md px-2 text-sm text-red-500 transition-colors hover:bg-red-50 dark:hover:bg-red-500/10",onClick:n[2]||(n[2]=i=>e(t).logout())},[r(g,{name:"i-lucide-log-out",size:"18"}),s("p",de,l(e(m)("layouts.logout")),1)])),[[v]]),r(C)])])]),default:f(()=>[N(o.$slots,"default",{},()=>[x((a(),c("div",{class:V(["hover:bg-muted flex items-center gap-1 rounded-lg p-1.5",{"p-3":!u.collapsed}])},[s("div",H,[r(_,{src:e(t).userInfo?.avatar,alt:e(t).userInfo?.nickname,icon:e(t).userInfo?.nickname?"tabler:user":void 0,size:u.size,ui:{root:"rounded-lg"}},null,8,["src","alt","icon","size"]),u.collapsed?b("",!0):(a(),c("div",J,[s("span",K,l(e(t).userInfo?.nickname),1),s("span",W,l(e(t).userInfo?.email||e(t).userInfo?.phone),1)]))]),u.collapsed?b("",!0):(a(),c("div",X,[r(k,{icon:"i-lucide-chevrons-up-down",color:"neutral",variant:"link",ui:{leadingIcon:"size-4"}})]))],2)),[[v]])])]),_:3},8,["open","content"])):(a(),c("div",{key:1,class:"flex items-center gap-1 rounded-lg",onClick:n[5]||(n[5]=i=>("navigateTo"in o?o.navigateTo:e(d))("/login"))},[r(_,{icon:"i-lucide-user",alt:"未登录",size:u.size,ui:{root:"rounded-lg"}},null,8,["size"])]))]),_:3})}}});export{Te as default};
