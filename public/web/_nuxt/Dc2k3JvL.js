import{_ as N}from"./DO9M7gn1.js";import q from"./cd55qm53.js";import{_ as z}from"./D_3bTjYR.js";import{_ as D}from"./BFbGFa2O.js";import{d as E,i as R,at as W,s as g,aQ as A,aN as T,q as G,c as u,o as d,x as V,t as a,g as t,D as I,w as l,y as M,F as f,_ as Q,A as U,z as k}from"#entry";import{_ as j}from"./B5gsc-Ax.js";import{_ as H}from"./DD8ySyt7.js";import{a as J,b as K}from"./C1E-FicH.js";import"./CtosDvS0.js";import"./CuVAPZQ8.js";import"./BCcN9pii.js";import"./CMKSl-Ng.js";import"./DBEJUH-Z.js";import"./o4ws_w_T.js";import"./D9sX2Qi6.js";import"./CBTz8tdX.js";import"./DMoqg0Fd.js";import"./kRIii9yh.js";import"./DNSLGqNg.js";import"./Z7qkLoXK.js";import"./C6Y-ieo6.js";import"./BFo3vNrE.js";import"./DeCyaT7k.js";import"./D4e4FYoF.js";import"./psimjGaX.js";import"./B3rWqoNg.js";import"./EK7Wbu3-.js";import"./BjKIBNOf.js";import"./9Q2Y_nd6.js";import"./td2xDKru.js";import"./BMSQkwth.js";import"./DaWZu8wl.js";const O={class:"agreement-container relative"},P={class:"mb-4 inline-block w-auto"},X={class:"flex space-x-3 pt-4"},$e=E({__name:"index",setup(Y){const{t:s}=R(),p=W(),r=g("0"),x=g([{label:s("system.website.agreement.privacy")},{label:s("system.website.agreement.service")},{label:s("system.website.agreement.payment")}]),e=A({privacyTitle:"",privacyContent:"",serviceTitle:"",serviceContent:"",paymentTitle:"",paymentContent:""}),m=g(null),{lockFn:C,isLock:_}=T(async()=>{try{const n=await J();m.value=n,e.privacyTitle=n.agreement.privacyTitle||s("system.website.agreement.privacy"),e.privacyContent=n.agreement.privacyContent||"",e.serviceTitle=n.agreement.serviceTitle||s("system.website.agreement.service"),e.serviceContent=n.agreement.serviceContent||"",e.paymentTitle=n.agreement.paymentTitle||s("system.website.agreement.payment"),e.paymentContent=n.agreement.paymentContent||""}catch(n){console.error("Get website config failed:",n),p.error(s("system.website.messages.loadFailed"))}}),{lockFn:F,isLock:y}=T(async()=>{try{const n={agreement:{privacyTitle:e.privacyTitle,privacyContent:e.privacyContent,serviceTitle:e.serviceTitle,serviceContent:e.serviceContent,paymentTitle:e.paymentTitle,paymentContent:e.paymentContent}};await K(n),p.success(s("system.website.messages.saveSuccess")),await C()}catch(n){console.error("Save failed:",n),p.error(s("system.website.messages.saveFailed"))}}),L=()=>{m.value?(e.privacyTitle=m.value.agreement.privacyTitle||s("system.website.agreement.privacy"),e.privacyContent=m.value.agreement.privacyContent||"",e.serviceTitle=m.value.agreement.serviceTitle||s("system.website.agreement.service"),e.serviceContent=m.value.agreement.serviceContent||"",e.paymentTitle=m.value.agreement.paymentTitle||s("system.website.agreement.payment"),e.paymentContent=m.value.agreement.paymentContent||"",p.info(s("system.website.messages.resetSuccess"))):(e.privacyTitle=s("system.website.agreement.privacy"),e.privacyContent="",e.serviceTitle=s("system.website.agreement.service"),e.serviceContent="",e.paymentTitle=s("system.website.agreement.payment"),e.paymentContent="",p.info(s("system.website.messages.resetEmpty")))};return G(()=>C()),(n,i)=>{const S=N,v=q,c=z,b=D,w=Q,$=j,B=H;return d(),u("div",O,[V("div",P,[a(S,{modelValue:t(r),"onUpdate:modelValue":i[0]||(i[0]=o=>I(r)?r.value=o:null),items:t(x)},null,8,["modelValue","items"])]),a(B,{state:t(e),onSubmit:t(F)},{default:l(()=>[t(r)==="0"?(d(),u(f,{key:0},[a(c,{name:"privacyTitle",label:t(s)("system.website.agreement.titleLabel"),required:""},{default:l(()=>[a(v,{modelValue:t(e).privacyTitle,"onUpdate:modelValue":i[1]||(i[1]=o=>t(e).privacyTitle=o),size:"xl",ui:{root:"w-full"}},null,8,["modelValue"])]),_:1},8,["label"]),a(c,{name:"privacyContent",label:t(s)("system.website.agreement.contentLabel"),class:"mt-4"},{default:l(()=>[a(b,{modelValue:t(e).privacyContent,"onUpdate:modelValue":i[2]||(i[2]=o=>t(e).privacyContent=o)},null,8,["modelValue"])]),_:1},8,["label"])],64)):t(r)==="1"?(d(),u(f,{key:1},[a(c,{name:"serviceTitle",label:t(s)("system.website.agreement.titleLabel"),required:""},{default:l(()=>[a(v,{modelValue:t(e).serviceTitle,"onUpdate:modelValue":i[3]||(i[3]=o=>t(e).serviceTitle=o),size:"xl",ui:{root:"w-full"}},null,8,["modelValue"])]),_:1},8,["label"]),a(c,{name:"serviceContent",label:t(s)("system.website.agreement.contentLabel"),class:"mt-4"},{default:l(()=>[a(b,{modelValue:t(e).serviceContent,"onUpdate:modelValue":i[4]||(i[4]=o=>t(e).serviceContent=o)},null,8,["modelValue"])]),_:1},8,["label"])],64)):t(r)==="2"?(d(),u(f,{key:2},[a(c,{name:"paymentTitle",label:t(s)("system.website.agreement.titleLabel"),required:""},{default:l(()=>[a(v,{modelValue:t(e).paymentTitle,"onUpdate:modelValue":i[5]||(i[5]=o=>t(e).paymentTitle=o),size:"xl",ui:{root:"w-full"}},null,8,["modelValue"])]),_:1},8,["label"]),a(c,{name:"paymentContent",label:t(s)("system.website.agreement.contentLabel"),class:"mt-4"},{default:l(()=>[a(b,{modelValue:t(e).paymentContent,"onUpdate:modelValue":i[6]||(i[6]=o=>t(e).paymentContent=o)},null,8,["modelValue"])]),_:1},8,["label"])],64)):M("",!0),V("div",X,[a($,{codes:["system-website:setConfig"]},{default:l(()=>[a(w,{type:"submit",color:"primary",loading:t(y),disabled:t(y)||t(_)},{default:l(()=>[U(k(t(y)?t(s)("system.website.actions.saving"):t(s)("system.website.actions.saveChanges")),1)]),_:1},8,["loading","disabled"])]),_:1}),a(w,{type:"reset",color:"neutral",variant:"outline",disabled:t(y)||t(_),onClick:L},{default:l(()=>[U(k(t(s)("system.website.actions.reset")),1)]),_:1},8,["disabled"])])]),_:1},8,["state","onSubmit"])])}}});export{$e as default};
