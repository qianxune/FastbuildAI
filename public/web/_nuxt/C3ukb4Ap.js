import{u as L,d as N,c as v,o as u,x as e,t as l,aZ as P,z as i,B as W,f as I,y as G,w as f,G as O,av as X,i as Y,aQ as ee,s as $,b2 as T,p as te,g as t,F as j,E as D,K as se,_ as ae,b3 as z,A as w}from"#entry";import oe from"./cd55qm53.js";import{_ as ne}from"./B8dIIAdq.js";import{_ as le}from"./Cie-o9Wa.js";import{n as V}from"./DUoaAyrs.js";import{_ as ie}from"./DBiaUVBh.js";import{_ as re}from"./DbqqhwXM.js";import"./jsPNKUA0.js";import"./abPSHzII.js";import"./DNSLGqNg.js";import"./psimjGaX.js";import"./CuVAPZQ8.js";import"./B3rWqoNg.js";import"./EK7Wbu3-.js";function M(o){return L("/ai-agents",o)}function ce(){return L("/agent-decorate")}function de(o){return L("/tag",o)}const ue={class:"mb-3 flex items-start gap-3"},me={class:"border-default bg-muted flex size-10 flex-none items-center justify-center rounded-lg border"},fe={class:"flex min-w-0 flex-1 flex-col"},ge={class:"text-foreground truncate text-sm font-medium"},pe={class:"text-muted-foreground mt-1 text-xs"},_e={class:"text-muted-foreground h-10 pr-8 text-xs"},ve={class:"line-clamp-2 overflow-hidden"},he={class:"flex items-center justify-between pt-2"},xe={class:"text-muted-foreground flex items-center gap-3"},be={class:"flex items-center gap-1"},ye={class:"text-xs"},ke={class:"flex items-center gap-1"},$e={class:"text-xs"},we={class:"flex items-center gap-1"},Be=N({__name:"square-card",props:{agent:{},showStats:{type:Boolean,default:!0},variant:{default:"default"}},emits:["click"],setup(o,{emit:r}){const g=o,B=r,C=()=>{B("click",g.agent)};return(a,h)=>{const p=P,_=ie,m=W,x=O,b=re;return u(),v("div",{class:"group bg-muted border-border cursor-pointer rounded-lg border p-4 transition-all duration-200 hover:shadow-md",onClick:C},[e("div",ue,[e("div",me,[l(p,{src:o.agent.avatar,alt:"avatar",class:"size-10 rounded-lg object-contain"},null,8,["src"])]),e("div",fe,[e("h3",ge,i(o.agent.name),1),e("div",pe,[e("span",null,i(a.$t("ai-agent.backend.create.edit")),1),l(_,{datetime:o.agent.updatedAt,mode:"datetime"},null,8,["datetime"])])])]),e("div",_e,[e("p",ve,i(o.agent.description),1)]),e("div",he,[e("div",xe,[e("div",be,[l(m,{name:"i-lucide-message-square-text",class:"size-3"}),e("span",ye,i(o.agent.conversationCount),1)]),e("div",ke,[l(m,{name:"i-lucide-users",class:"size-3"}),e("span",$e,i(o.agent.userCount),1)])]),e("div",we,[o.agent.requiredMembershipLevel?(u(),I(b,{key:0,text:o.agent.requiredMembershipLevel.name,"delay-duration":0},{default:f(()=>[l(x,{src:o.agent.requiredMembershipLevel.icon,class:"size-4"},null,8,["src"])]),_:1},8,["text"])):G("",!0),l(b,{text:o.agent.provider?.name,"delay-duration":0},{default:f(()=>[l(x,{src:o.agent.provider?.iconUrl,class:"size-4"},null,8,["src"])]),_:1},8,["text"])])])])}}}),Ce={class:"container mx-auto flex h-full flex-col"},qe={class:"bg-background sticky top-0 z-10 flex flex-col gap-3 p-4"},Te={class:"flex items-center justify-between"},ze={class:"hidden flex-none font-bold sm:block sm:text-base lg:text-lg"},Ie={class:"relative mx-auto flex w-full max-w-3xl justify-center"},Le={class:"dark:bg-background/30 flex flex-none gap-2 rounded-lg bg-neutral-100 p-1"},Ae={class:"flex flex-wrap gap-2"},Ue={class:"h-full min-h-0"},Se={class:"flex h-full min-h-0 flex-col"},je={key:0,class:"flex flex-col items-center justify-between gap-4 px-4 pb-8 lg:flex-row"},De={class:"flex flex-col gap-6"},Ve={class:"flex flex-col gap-2 pr-10"},Me={class:"line-clamp-2 font-bold sm:text-2xl sm:text-xl lg:text-4xl"},Ne={class:"text-muted-foreground pr-4 text-base"},Pe={class:"absolute right-0 bottom-0 left-0 p-4"},We={class:"text-background text-lg font-bold"},Ge={class:"text-background text-sm"},Fe={key:1,class:"grid grid-cols-1 gap-6 px-4 pt-2 pb-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},Re={key:2},Ee={class:"flex h-[70vh] w-full items-center justify-center"},Qe={class:"flex flex-col items-center gap-3"},Ke={class:"text-muted-foreground"},ct=N({__name:"index",async setup(o){let r,g;const B=X(),{t:C}=Y(),a=ee({keyword:"",sortBy:"latest",page:1,pageSize:20}),h=$(!1),p=$(!0),_=$(void 0),m=$([]),x=()=>({keyword:a.keyword,sortBy:a.sortBy,page:a.page,pageSize:a.pageSize,tagIds:_.value?[_.value]:void 0}),{data:b}=([r,g]=T(()=>z("tags",()=>de(),{transform:s=>[{name:C("ai-agent.frontend.square.recommended"),id:void 0},...s]})),r=await r,g(),r),{data:d}=([r,g]=T(()=>z("agent-decorate",()=>ce())),r=await r,g(),r),{data:q,pending:F}=([r,g]=T(()=>z("public-agents-initial",()=>M(x()))),r=await r,g(),r);q.value&&(m.value=q.value.items||[],p.value=q.value.totalPages>(a.page||1));const y=async(s=!1)=>{if(!h.value){h.value=!0,s&&(a.page=1,m.value=[],p.value=!0);try{const n=await M(x());s?m.value=n.items||[]:m.value.push(...n.items||[]),p.value=n.totalPages>(a.page||1)}catch(n){console.error("获取智能体列表失败:",n),p.value=!1}finally{h.value=!1}}},R=async()=>{!p.value||h.value||(a.page=(a.page||1)+1,await y())},A=se(()=>y(!0),500);te(()=>a.keyword,A);const U=s=>{a.sortBy=s,y(!0)},E=s=>{_.value=s,y(!0)},Q=s=>{s.publishToken&&B.push(`/public/agent/explore/${s.publishToken}`)};return(s,n)=>{const K=W,Z=oe,k=ae,S=P,H=ne,J=le;return u(),v("div",Ce,[e("div",qe,[e("div",Te,[e("h2",ze,i(s.$t("ai-agent.frontend.square.square")),1),e("div",Ie,[l(Z,{modelValue:t(a).keyword,"onUpdate:modelValue":n[0]||(n[0]=c=>t(a).keyword=c),placeholder:s.$t("ai-agent.frontend.square.searchPlaceholder"),class:"sm:w-full lg:w-md",variant:"soft",onInput:t(A)},{leading:f(()=>[l(K,{name:"i-lucide-search"})]),_:1},8,["modelValue","placeholder","onInput"])]),e("div",Le,[l(k,{color:t(a).sortBy==="latest"?"primary":"neutral",variant:t(a).sortBy==="latest"?"solid":"ghost",onClick:n[1]||(n[1]=c=>U("latest"))},{default:f(()=>[w(i(s.$t("ai-agent.frontend.square.sortByLatest")),1)]),_:1},8,["color","variant"]),l(k,{color:t(a).sortBy==="popular"?"primary":"neutral",variant:t(a).sortBy==="popular"?"solid":"ghost",onClick:n[2]||(n[2]=c=>U("popular"))},{default:f(()=>[w(i(s.$t("ai-agent.frontend.square.sortByPopular")),1)]),_:1},8,["color","variant"])])]),e("div",Ae,[(u(!0),v(j,null,D(t(b),c=>(u(),I(k,{key:c.id??"recommended",color:t(_)===c.id?"primary":"neutral",variant:t(_)===c.id?"soft":"ghost",class:"px-3 py-1",onClick:Ze=>E(c.id)},{default:f(()=>[w(i(c.name),1)]),_:2},1032,["color","variant","onClick"]))),128))])]),e("div",Ue,[e("section",Se,[l(J,{class:"min-0 h-full"},{default:f(()=>[l(H,{loading:t(h)||t(F),"has-more":t(p),"no-more-text":t(a).page===1?" ":"",onLoadMore:R},{default:f(()=>[t(d)?.enabled?(u(),v("div",je,[e("div",De,[e("div",Ve,[e("h1",Me,[e("span",null,i(t(d)?.title),1)]),e("p",Ne,[e("span",null,i(t(d)?.description),1)])]),e("div",null,[l(k,{color:"neutral",variant:"solid",size:"xl",class:"rounded-full px-6",onClick:n[3]||(n[3]=c=>t(d)?.link&&("navigateToWeb"in s?s.navigateToWeb:t(V))(t(d).link))},{default:f(()=>[w(i(s.$t("ai-agent.frontend.square.ctaLabel")),1)]),_:1})])]),e("div",{class:"relative flex-none overflow-hidden rounded-lg",style:{width:"520px",height:"280px"},onClick:n[4]||(n[4]=c=>t(d)?.link&&("navigateToWeb"in s?s.navigateToWeb:t(V))(t(d).link))},[l(S,{src:t(d)?.heroImageUrl,alt:"square",class:"h-full w-full object-cover"},null,8,["src"]),e("div",Pe,[l(S,{src:t(d)?.overlayIconUrl,class:"mb-3 size-16 rounded-lg"},null,8,["src"]),e("h3",We,i(t(d)?.overlayTitle),1),e("p",Ge,i(t(d)?.overlayDescription),1)])])])):G("",!0),t(m).length>0?(u(),v("div",Fe,[(u(!0),v(j,null,D(t(m),c=>(u(),I(Be,{key:c.id,agent:c,onClick:Q},null,8,["agent"]))),128))])):(u(),v("div",Re,[e("div",Ee,[e("div",Qe,[e("span",Ke,i(s.$t("ai-agent.frontend.square.noResults")),1)])])]))]),_:1},8,["loading","has-more","no-more-text"])]),_:1})])])])}}});export{ct as default};
