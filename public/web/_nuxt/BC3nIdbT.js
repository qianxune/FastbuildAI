import{_ as C}from"./Da83zglB.js";import{_ as q}from"./D_3bTjYR.js";import x from"./cd55qm53.js";import P from"./4jjeIyfe.js";import{d as N,i as j,at as z,av as D,aQ as I,aN as M,q as R,f as S,o as T,w as r,t as n,x as _,g as t,A as p,z as d,_ as A}from"#entry";import{_ as L}from"./DD8ySyt7.js";import{_ as Q}from"./Ghlq83yM.js";import{s as E}from"./Dm8J87dm.js";import{c as G,b as g}from"./FTderXKt.js";import{u as H}from"./CxvgZo8z.js";import"./9Q2Y_nd6.js";import"./td2xDKru.js";import"./RPflLnqr.js";import"./TrJvDfxI.js";import"./jsPNKUA0.js";import"./abPSHzII.js";import"./D9sX2Qi6.js";import"./DQMjdCEn.js";import"./OUYfsp1i.js";import"./BFo3vNrE.js";import"./CuVAPZQ8.js";import"./Z7qkLoXK.js";import"./CjE5iPSn.js";import"./D9UsdH-b.js";import"./MCK2d4XT.js";import"./EK7Wbu3-.js";import"./DaWZu8wl.js";const J={class:"flex flex-col gap-4"},K={class:"mt-6 flex justify-end gap-2"},he=N({__name:"template-create-modal",props:{template:{}},emits:["close"],setup(u,{emit:b}){const{t:l}=j(),k=z(),$=D(),s=u,m=b,e=I({name:"",description:"",avatar:""}),v=G({description:g().required(l("ai-agent.backend.create.descriptionPlaceholder")),name:g().required(l("ai-agent.backend.create.namePlaceholder"))}),{lockFn:V,isLock:h}=M(async()=>{try{const a=await E({templateId:s.template.id,name:e.name,description:e.description,avatar:e.avatar});m("close",!0),k.success(l("ai-agent.backend.template.create.success")),$.push(H("ai-agent:detail",{id:a.id}))}catch(a){console.error(l("ai-agent.backend.template.create.failed"),a)}});return R(()=>{s.template&&(e.avatar=s.template.avatar||"",e.name=s.template.name,e.description=s.template.description||"")}),(a,o)=>{const w=C,c=q,U=x,y=P,f=A,F=L,B=Q;return T(),S(B,{title:t(l)("ai-agent.backend.template.create.title",{name:u.template?.name}),description:t(l)("ai-agent.backend.template.create.description"),ui:{content:"max-w-lg"},onClose:o[4]||(o[4]=i=>m("close"))},{default:r(()=>[n(F,{schema:t(v),state:t(e),class:"space-y-4",onSubmit:t(V)},{default:r(()=>[_("div",J,[n(c,{label:a.$t("ai-agent.backend.create.avatar"),name:"avatar"},{hint:r(()=>[p(d(a.$t("ai-agent.backend.create.avatarDefault")),1)]),default:r(()=>[n(w,{modelValue:t(e).avatar,"onUpdate:modelValue":o[0]||(o[0]=i=>t(e).avatar=i),class:"h-24 w-24",text:a.$t("ai-agent.backend.create.avatarUpload"),icon:"i-lucide-upload",accept:".jpg,.png,.jpeg,.gif,.webp",maxCount:1,single:!0,multiple:!1},null,8,["modelValue","text"])]),_:1},8,["label"]),n(c,{label:a.$t("ai-agent.backend.create.name"),name:"name",required:""},{default:r(()=>[n(U,{modelValue:t(e).name,"onUpdate:modelValue":o[1]||(o[1]=i=>t(e).name=i),placeholder:a.$t("ai-agent.backend.create.namePlaceholder"),ui:{root:"w-full"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(c,{label:a.$t("ai-agent.backend.create.description"),name:"description",required:""},{default:r(()=>[n(y,{modelValue:t(e).description,"onUpdate:modelValue":o[2]||(o[2]=i=>t(e).description=i),placeholder:a.$t("ai-agent.backend.create.descriptionPlaceholder"),rows:6,ui:{root:"w-full"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_("div",K,[n(f,{color:"neutral",variant:"soft",size:"lg",onClick:o[3]||(o[3]=i=>m("close"))},{default:r(()=>[p(d(a.$t("console-common.cancel")),1)]),_:1}),n(f,{color:"primary",size:"lg",loading:t(h),type:"submit"},{default:r(()=>[p(d(a.$t("console-common.create")),1)]),_:1},8,["loading"])])]),_:1},8,["schema","state","onSubmit"])]),_:1},8,["title","description"])}}});export{he as default};
