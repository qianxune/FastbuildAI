import{cc as g,l as A,d as w,e as C,a2 as k,am as y,aq as K,cd as m,J as x,ao as h,ce as F,cf as I,cg as P,ch as T,ci as b,f as U,o as N,w as R,r as Y,g as B,P as D,cj as M}from"#entry";const q=g(()=>A([]));function j(){const e=q();return{add(t){const a=e.value[0];t!==a&&a?.pause(),e.value=L(e.value,t),e.value.unshift(t)},remove(t){e.value=L(e.value,t),e.value[0]?.resume()}}}function L(e,t){const a=[...e],c=a.indexOf(t);return c!==-1&&a.splice(c,1),a}function G(e){return e.filter(t=>t.tagName!=="A")}var H=w({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:t}){const a=e,c=t,{currentRef:v,currentElement:d}=C(),f=A(null),S=j(),i=k({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});y(n=>{if(!K)return;const s=d.value;if(!a.trapped)return;function o(l){if(i.paused||!s)return;const p=l.target;s.contains(p)?f.value=p:m(f.value,{select:!0})}function E(l){if(i.paused||!s)return;const p=l.relatedTarget;p!==null&&(s.contains(p)||m(f.value,{select:!0}))}function r(l){s.contains(f.value)||m(s)}document.addEventListener("focusin",o),document.addEventListener("focusout",E);const u=new MutationObserver(r);s&&u.observe(s,{childList:!0,subtree:!0}),n(()=>{document.removeEventListener("focusin",o),document.removeEventListener("focusout",E),u.disconnect()})}),y(async n=>{const s=d.value;if(await x(),!s)return;S.add(i);const o=h();if(!s.contains(o)){const r=new CustomEvent(F,b);s.addEventListener(F,u=>c("mountAutoFocus",u)),s.dispatchEvent(r),r.defaultPrevented||(I(G(P(s)),{select:!0}),h()===o&&m(s))}n(()=>{s.removeEventListener(F,l=>c("mountAutoFocus",l));const r=new CustomEvent(T,b),u=l=>{c("unmountAutoFocus",l)};s.addEventListener(T,u),s.dispatchEvent(r),setTimeout(()=>{r.defaultPrevented||m(o??document.body,{select:!0}),s.removeEventListener(T,u),S.remove(i)},0)})});function _(n){if(!a.loop&&!a.trapped||i.paused)return;const s=n.key==="Tab"&&!n.altKey&&!n.ctrlKey&&!n.metaKey,o=h();if(s&&o){const E=n.currentTarget,[r,u]=M(E);r&&u?!n.shiftKey&&o===u?(n.preventDefault(),a.loop&&m(r,{select:!0})):n.shiftKey&&o===r&&(n.preventDefault(),a.loop&&m(u,{select:!0})):o===E&&n.preventDefault()}}return(n,s)=>(N(),U(B(D),{ref_key:"currentRef",ref:v,tabindex:"-1","as-child":n.asChild,as:n.as,onKeydown:_},{default:R(()=>[Y(n.$slots,"default")]),_:3},8,["as-child","as"]))}}),Q=H;const W="menu.itemSelect",O=["Enter"," "],V=["ArrowDown","PageUp","Home"],$=["ArrowUp","PageDown","End"],Z=[...V,...$],ee={ltr:[...O,"ArrowRight"],rtl:[...O,"ArrowLeft"]},te={ltr:["ArrowLeft"],rtl:["ArrowRight"]};function se(e){return e?"open":"closed"}function J(e){return e==="indeterminate"}function ne(e){return J(e)?"indeterminate":e?"checked":"unchecked"}function ae(e){const t=h();for(const a of e)if(a===t||(a.focus(),h()!==t))return}function X(e,t){const{x:a,y:c}=e;let v=!1;for(let d=0,f=t.length-1;d<t.length;f=d++){const S=t[d].x,i=t[d].y,_=t[f].x,n=t[f].y;i>c!=n>c&&a<(_-S)*(c-i)/(n-i)+S&&(v=!v)}return v}function oe(e,t){if(!t)return!1;const a={x:e.clientX,y:e.clientY};return X(a,t)}function re(e){return e.pointerType==="mouse"}export{Q as F,W as I,$ as L,O as S,Z as a,re as b,ne as c,J as d,te as e,ae as f,se as g,ee as h,oe as i};
