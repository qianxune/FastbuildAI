const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CP6E7Hqt.js","./cd55qm53.js","./Cgyg1gJC.js","./D_3bTjYR.js","./D9sX2Qi6.js","./Co1Njv5N.js","./CtosDvS0.js","./CAQVAH0V.js","./BCcN9pii.js","./CMKSl-Ng.js","./Deu6qIfg.js","./DBEJUH-Z.js","./CuVAPZQ8.js","./DD8ySyt7.js","./Ghlq83yM.js","./DQMjdCEn.js","./OUYfsp1i.js","./BFo3vNrE.js","./Z7qkLoXK.js","./CjE5iPSn.js","./D9UsdH-b.js","./MCK2d4XT.js","./EK7Wbu3-.js","./FTderXKt.js","./DaWZu8wl.js","./Dx_n0gYb.js","./DQQ3dYHz.js","./Dh3Mo9T6.js","./DNSLGqNg.js","./sTbVUDyT.js","./kRIii9yh.js","./D4e4FYoF.js","./B9ZIqvFb.js","./CnGIiRp6.js","./BKOplUOH.js","./DbqqhwXM.js","./psimjGaX.js","./B3rWqoNg.js","./o4ws_w_T.js","./DBiaUVBh.js","./Ce6s6j9m.js","./CBTz8tdX.js","./DMoqg0Fd.js","./C6Y-ieo6.js","./DeCyaT7k.js","./Y67jy4iF.js","./CjasYwqF.js","./BlyoSzaa.js","./CxvgZo8z.js","./DkPfmXS5.js","./JxyxsHxp.js"])))=>i.map(i=>d[i]);
import{d as ee,av as te,at as se,i as oe,V as ae,aQ as ne,l as re,s as ie,bS as le,n as y,q as ce,c as g,o as _,x as c,f as E,y as de,t as r,g as e,z as d,w as f,_ as me,A as P,D as ue,H as T,I as V,F as pe,E as _e,W as v,B as fe,X as b,bT as he,bU as ge}from"#entry";import ve from"./cd55qm53.js";import{_ as be}from"./B4OpYolY.js";import{_ as we}from"./Y67jy4iF.js";import{_ as ye}from"./B3rWqoNg.js";import{_ as ke}from"./B5gsc-Ax.js";import{_ as Ue}from"./DO9M7gn1.js";import{_ as xe}from"./Cie-o9Wa.js";import{_ as Ae}from"./D4ebF709.js";import{u as De}from"./CxvgZo8z.js";import{u as Re}from"./ZDOPDbaX.js";import{u as Se}from"./CSy6ZCzT.js";import"./C5Ha_WGa.js";import"./DMoqg0Fd.js";import"./CtosDvS0.js";import"./kRIii9yh.js";import"./DNSLGqNg.js";import"./Z7qkLoXK.js";import"./C6Y-ieo6.js";import"./BFo3vNrE.js";import"./DeCyaT7k.js";import"./D4e4FYoF.js";import"./BCcN9pii.js";import"./CMKSl-Ng.js";import"./CuVAPZQ8.js";import"./psimjGaX.js";import"./hsuWSsy6.js";import"./MCK2d4XT.js";import"./EK7Wbu3-.js";import"./jsPNKUA0.js";import"./CjasYwqF.js";import"./CAQVAH0V.js";import"./DBEJUH-Z.js";import"./Deu6qIfg.js";import"./D9sX2Qi6.js";import"./o4ws_w_T.js";import"./abPSHzII.js";import"./o0-e7Rye.js";const Ce={class:"user-list-container pb-5"},Ee={class:"bg-background sticky top-0 z-10 flex flex-wrap gap-4 pb-2"},Pe={class:"flex items-center gap-2 md:ml-auto"},Te={class:"flex items-center gap-2"},Ve={class:"text-accent-foreground text-sm"},Ie={class:"grid grid-cols-1 gap-6 py-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4"},$e={key:1,class:"flex h-[calc(100vh-10rem)] items-center justify-center"},ze={class:"flex items-center gap-3"},Be={class:"text-accent-foreground"},Me={key:2,class:"flex h-[calc(100vh-10rem)] flex-col items-center justify-center"},Le={class:"text-accent-foreground"},je={key:3,class:"bg-background sticky bottom-0 z-10 flex items-center justify-between gap-3 py-4"},Oe={class:"text-muted text-sm"},Fe={class:"flex items-center gap-1.5"},St=ee({__name:"list",setup(Ne){const I=v(()=>b(()=>import("./CP6E7Hqt.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url)),$=v(()=>b(()=>import("./Dx_n0gYb.js"),__vite__mapDeps([25,26,2,27,28,12,17,29,6,7,30,31,9,10,18,1,3,4,5,8,11,13,14,15,16,19,20,21,22,32,33,23,24]),import.meta.url)),z=v(()=>b(()=>import("./BKOplUOH.js"),__vite__mapDeps([34,2,35,28,36,12,37,22,38,39,40,41,42,6,30,18,43,17,44,31,8,9,45,46,7,11,10,4,47,48]),import.meta.url)),B=v(()=>b(()=>import("./DkPfmXS5.js"),__vite__mapDeps([49,2,39,41,42,6,30,28,18,43,17,44,31,8,9,12,36,37,22,38,45,46,7,11,10,4,50,47,48]),import.meta.url)),M=te(),L=se(),{t:m}=oe(),k=ae(),u=ne({keyword:"",startTime:"",endTime:""}),h=re(2),j=[{value:2,icon:"i-tabler-list"},{value:1,icon:"i-tabler-layout-grid"}],n=ie(new Set),{paging:o,getLists:p}=Re({fetchFun:le,params:u}),w=y(()=>o.items.filter(t=>t.isRoot!==1)),O=(t,s)=>{if(typeof s!="boolean")return;const i=t.id,l=new Set(n.value);s?l.add(i):l.delete(i),n.value=l},F=t=>{const s=t===!0,i=new Set(n.value);s?w.value.forEach(l=>{l.id&&i.add(l.id)}):i.clear(),n.value=i},N=t=>{n.value=t},U=async t=>{try{await Se({title:m("user.backend.deleteTitle"),description:m("user.backend.deleteMsg"),color:"error"}),Array.isArray(t)?await he(t.map(String)):await ge(String(t)),n.value.clear(),p(),L.success(m("user.backend.success"))}catch(s){console.error("Delete failed:",s)}},x=t=>{t.id&&U(t.id)},q=async t=>{await k.create(I).open({user:t}).result&&p()},A=t=>{q(t)},G=async t=>{await k.create($).open({user:t}).result&&p()},D=t=>{G(t)},H=()=>{const t=Array.from(n.value);t.length!==0&&U(t)},K=y(()=>w.value.length>0&&w.value.every(t=>t.id&&n.value.has(t.id))),Q=y(()=>{const t=o.items.filter(s=>s.id&&n.value.has(s.id)).length;return t>0&&t<o.items.length});return ce(()=>p()),(t,s)=>{const i=ve,l=be,W=we,X=ye,R=me,S=ke,J=Ue,Y=xe,C=fe,Z=Ae;return _(),g("div",Ce,[c("div",Ee,[r(i,{modelValue:e(u).keyword,"onUpdate:modelValue":s[0]||(s[0]=a=>e(u).keyword=a),placeholder:e(m)("user.backend.keywordInput"),class:"w-80",onChange:e(p)},null,8,["modelValue","placeholder","onChange"]),r(l,{start:e(u).startTime,"onUpdate:start":s[1]||(s[1]=a=>e(u).startTime=a),end:e(u).endTime,"onUpdate:end":s[2]||(s[2]=a=>e(u).endTime=a),"show-time":!0,ui:{root:"w-auto sm:w-xs"},onChange:e(p)},null,8,["start","end","onChange"]),c("div",Pe,[c("div",Te,[r(W,{"model-value":e(K)?!0:e(Q)?"indeterminate":!1,"onUpdate:modelValue":F},null,8,["model-value"]),c("span",Ve,d(e(n).size)+" / "+d(e(o).items.length)+" "+d(e(m)("console-common.selected")),1)]),r(S,{codes:["users:batch-delete"]},{default:f(()=>[r(R,{color:"error",variant:"subtle",label:e(m)("console-common.batchDelete"),icon:"i-heroicons-trash",disabled:e(n).size===0,onClick:H},{trailing:f(()=>[r(X,null,{default:f(()=>[P(d(e(n).size),1)]),_:1})]),_:1},8,["label","disabled"])]),_:1}),r(S,{codes:["users:create"]},{default:f(()=>[r(R,{icon:"i-heroicons-plus",color:"primary",onClick:s[3]||(s[3]=a=>e(M).push(("useRoutePath"in t?t.useRoutePath:e(De))("users:create")))},{default:f(()=>[P(d(e(m)("user.backend.add")),1)]),_:1})]),_:1}),r(J,{modelValue:e(h),"onUpdate:modelValue":s[4]||(s[4]=a=>ue(h)?h.value=a:null),items:j,size:"xs",ui:{root:"gap-0",indicator:"bg-background dark:bg-primary",leadingIcon:"bg-black dark:bg-white"}},null,8,["modelValue"])])]),!e(o).loading&&e(o).items.length>0?(_(),E(Y,{key:0,class:"h-[calc(100vh-13rem)]",shadow:!1},{default:f(()=>[T(c("div",Ie,[(_(!0),g(pe,null,_e(e(o).items,a=>(_(),E(e(z),{key:a.id,user:a,selected:e(n).has(a.id),onEditPower:A,onAdjustMembership:D,onSelect:O,onDelete:x},null,8,["user","selected"]))),128))],512),[[V,e(h)===1]]),T(r(e(B),{usersList:e(o).items,"selected-users":e(n),"onUpdate:selectedUsers":N,onDelete:x,onEditPower:A,onAdjustMembership:D},null,8,["usersList","selected-users"]),[[V,e(h)===2]])]),_:1})):e(o).loading?(_(),g("div",$e,[c("div",ze,[r(C,{name:"i-lucide-loader-2",class:"text-primary-500 h-6 w-6 animate-spin"}),c("span",Be,d(t.$t("common.loading")),1)])])):(_(),g("div",Me,[r(C,{name:"i-lucide-users",class:"text-muted-foreground mb-4 h-16 w-16"}),c("p",Le,d(t.$t("user.backend.noUsers")),1)])),e(o).total>0?(_(),g("div",je,[c("div",Oe,d(t.$t("console-common.total"))+" "+d(e(o).total)+" "+d(t.$t("console-common.items")),1),c("div",Fe,[r(Z,{page:e(o).page,"onUpdate:page":s[5]||(s[5]=a=>e(o).page=a),size:e(o).pageSize,"onUpdate:size":s[6]||(s[6]=a=>e(o).pageSize=a),total:e(o).total,onChange:e(p)},null,8,["page","size","total","onChange"])])])):de("",!0)])}}});export{St as default};
