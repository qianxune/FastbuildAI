import{d as N,l as f,n as l,q as P,p as W,f as H,o as u,w as V,x as s,a0 as o,c as v,y as g,t as w,B as j,z as m}from"#entry";import{W as A}from"./BJfIXs0j.js";import{_ as O}from"./abPSHzII.js";const U=["src","autoplay","loop","muted","preload"],q=["onMouseover","onMouseleave"],D={class:"audio-controls",style:{flex:"1",display:"flex","align-items":"center",gap:"8px"}},F={key:1,class:"audio-placeholder",style:{display:"flex","align-items":"center","justify-content":"center",height:"80px",color:"#9ca3af"}},X={style:{"text-align":"center"}},G=N({__name:"content",props:{src:{},title:{},artist:{},controls:{type:Boolean},autoplay:{type:Boolean},loop:{type:Boolean},muted:{type:Boolean},preload:{},volume:{},showInfo:{type:Boolean},themeColor:{},playerSize:{},borderRadius:{},style:{}},setup(_){const e=_,a=f(),p=f(!1),y=f(0),c=f(0),b=l(()=>({backgroundColor:e.style.bgColor,borderRadius:`${e.borderRadius}px`,border:`1px solid ${e.style.borderColor}`,padding:`${e.style.paddingTop}px ${e.style.paddingRight}px ${e.style.paddingBottom}px ${e.style.paddingLeft}px`,width:"100%",overflow:"hidden"})),C={small:"60px",medium:"80px",large:"100px"},k=l(()=>({height:C[e.playerSize],display:"flex",alignItems:"center",gap:"12px"})),B=l(()=>({backgroundColor:e.themeColor,color:"#ffffff",borderRadius:"50%",width:e.playerSize==="small"?"36px":e.playerSize==="medium"?"40px":"44px",height:e.playerSize==="small"?"36px":e.playerSize==="medium"?"40px":"44px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",flexShrink:0})),z=l(()=>({flex:1,height:"4px",backgroundColor:"#e5e7eb",borderRadius:"2px",overflow:"hidden",cursor:"pointer"})),$=l(()=>({height:"100%",backgroundColor:e.themeColor,width:`${c.value>0?y.value/c.value*100:0}%`,transition:"width 0.1s ease"})),x=l(()=>({fontSize:"12px",color:"#64748b",minWidth:"40px",textAlign:"center"})),R=l(()=>({flex:1,minWidth:0,paddingLeft:"8px"})),L=l(()=>({fontSize:e.playerSize==="small"?"12px":"14px",fontWeight:"600",color:"#1f2937",lineHeight:"1.4",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginBottom:"2px"})),M=l(()=>({fontSize:e.playerSize==="small"?"10px":"12px",color:"#64748b",lineHeight:"1.3",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})),S=t=>{if(isNaN(t))return"0:00";const i=Math.floor(t/60),n=Math.floor(t%60);return`${i}:${n.toString().padStart(2,"0")}`},T=async()=>{if(a.value)try{p.value?a.value.pause():await a.value.play()}catch(t){console.warn("Audio play failed:",t)}},E=t=>{if(!a.value||c.value===0)return;const n=t.currentTarget.getBoundingClientRect(),r=(t.clientX-n.left)/n.width*c.value;a.value.currentTime=r,y.value=r};P(()=>{if(!a.value)return;const t=a.value,i=()=>{p.value=!0},n=()=>{p.value=!1},h=()=>{y.value=t.currentTime},r=()=>{c.value=t.duration},d=()=>{p.value=!1,y.value=0};t.addEventListener("play",i),t.addEventListener("pause",n),t.addEventListener("timeupdate",h),t.addEventListener("loadedmetadata",r),t.addEventListener("ended",d),t.volume=e.volume}),W(()=>e.volume,t=>{a.value&&(a.value.volume=t)});const I=l(()=>p.value?"i-heroicons-pause":"i-heroicons-play");return(t,i)=>{const n=j;return u(),H(A,{style:o(e.style),"override-bg-color":!0,"custom-class":"audio-content"},{default:V(({style:h})=>[s("div",{style:o(b.value),class:"audio-wrapper"},[s("audio",{ref_key:"audioRef",ref:a,src:e.src,controls:!1,autoplay:e.autoplay,loop:e.loop,muted:e.muted,preload:e.preload,style:{display:"none"}},null,8,U),e.src?(u(),v("div",{key:0,style:o(k.value),class:"audio-player"},[s("div",{style:o(B.value),class:"play-button",onClick:T,onMouseover:r=>{const d=r.target;d&&(d.style.opacity="0.9")},onMouseleave:r=>{const d=r.target;d&&(d.style.opacity="1")}},[w(n,{name:I.value,class:"h-5 w-5"},null,8,["name"])],44,q),e.showInfo?(u(),v("div",{key:0,style:o(R.value),class:"audio-info"},[e.title?(u(),v("div",{key:0,style:o(L.value),class:"audio-title"},m(e.title),5)):g("",!0),e.artist?(u(),v("div",{key:1,style:o(M.value),class:"audio-artist"},m(e.artist),5)):g("",!0)],4)):g("",!0),s("div",D,[s("div",{style:o(x.value),class:"current-time"},m(S(y.value)),5),s("div",{style:o(z.value),class:"progress-bar",onClick:E},[s("div",{style:o($.value),class:"progress-fill"},null,4)],4),s("div",{style:o(x.value),class:"duration"},m(S(c.value)),5)])],4)):(u(),v("div",F,[s("div",X,[w(n,{name:"i-heroicons-musical-note",class:"mx-auto mb-2 h-8 w-8"}),i[0]||(i[0]=s("div",{style:{"font-size":"12px"}},"请选择音频文件",-1))])]))],4)]),_:1},8,["style"])}}}),Y=O(G,[["__scopeId","data-v-19d8d6c0"]]);export{Y as default};
