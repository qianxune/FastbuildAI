import{d as S,i as j,at as B,a_ as q,aQ as N,s as z,aN as _,q as A,c as D,o as W,t,w as n,x as d,g as e,B as E,_ as G,A as w,z as y,a$ as M}from"#entry";import R from"./cd55qm53.js";import{_ as T}from"./D_3bTjYR.js";import H from"./4jjeIyfe.js";import{_ as Q}from"./Da83zglB.js";import{_ as J}from"./B5gsc-Ax.js";import{_ as K}from"./DD8ySyt7.js";import{a as O,b as P}from"./C1E-FicH.js";import{c as X,b as x}from"./FTderXKt.js";import{u as h}from"./UqhBTNL6.js";import"./D9sX2Qi6.js";import"./9Q2Y_nd6.js";import"./td2xDKru.js";import"./RPflLnqr.js";import"./TrJvDfxI.js";import"./jsPNKUA0.js";import"./abPSHzII.js";import"./DaWZu8wl.js";const Y={class:"information-container py-8"},Z={class:"flex items-start gap-4"},ee={class:"flex items-start gap-4"},oe={class:"flex items-start gap-4"},se={class:"bg-background sticky bottom-0 flex space-x-3 py-4"},Ve=S({__name:"information",setup(te){const{t:s}=j(),r=B(),p=q(),V=X({name:x().required(s("system.website.information.name.required")),description:x().optional()}),o=N({name:"",description:"",icon:"",logo:"",spaLoadingIcon:""}),u=z(null),{lockFn:v,isLock:g}=_(async()=>{try{const a=await O();u.value=a,h(o,a.webinfo)}catch(a){console.error("Get website config failed:",a),r.error(s("system.website.messages.loadFailed"))}}),{lockFn:C,isLock:c}=_(async()=>{try{const a={webinfo:{name:o.name,description:o.description,icon:o.icon||"",logo:o.logo||"",spaLoadingIcon:o.spaLoadingIcon||""}};await P(a),r.success(s("system.website.messages.saveSuccess")),await p.getConfig(),M({title:o.name,link:[{rel:"icon",href:p.siteConfig?.webinfo?.icon||"/favicon.ico"},{rel:"apple-touch-icon",href:p.siteConfig?.webinfo?.logo||"/favicon.ico"}]})}catch(a){console.error("Save failed:",a)}}),L=()=>{u.value?(h(o,u.value.webinfo),r.info(s("system.website.messages.resetSuccess"))):(o.name="",o.description="",o.icon="",o.logo="",o.spaLoadingIcon="",r.info(s("system.website.messages.resetEmpty")))};return A(()=>v()),(a,i)=>{const I=E,U=R,m=T,k=H,f=Q,b=G,$=J,F=K;return W(),D("div",Y,[t(F,{schema:e(V),state:e(o),class:"space-y-6",onSubmit:e(C)},{default:n(()=>[t(m,{label:e(s)("system.website.information.name.label"),name:"name",description:e(s)("system.website.information.name.description"),required:""},{default:n(()=>[t(U,{modelValue:e(o).name,"onUpdate:modelValue":i[0]||(i[0]=l=>e(o).name=l),placeholder:e(s)("system.website.information.name.placeholder"),size:"lg",ui:{root:"w-full sm:w-xs"}},{leading:n(()=>[t(I,{name:"i-heroicons-globe-alt"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","description"]),t(m,{label:e(s)("system.website.information.description.label"),name:"description",description:e(s)("system.website.information.description.description")},{default:n(()=>[t(k,{modelValue:e(o).description,"onUpdate:modelValue":i[1]||(i[1]=l=>e(o).description=l),placeholder:e(s)("system.website.information.description.placeholder"),rows:3,size:"lg",ui:{root:"w-full sm:w-xs"}},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),t(m,{label:e(s)("system.website.information.icon.label"),name:"icon",description:e(s)("system.website.information.icon.description")},{default:n(()=>[d("div",Z,[t(f,{modelValue:e(o).icon,"onUpdate:modelValue":i[2]||(i[2]=l=>e(o).icon=l),class:"h-24 w-24",text:e(s)("system.website.information.icon.upload"),icon:"i-lucide-upload",accept:".jpg,.png,.jpeg,.ico",maxCount:1,single:!0},null,8,["modelValue","text"])])]),_:1},8,["label","description"]),t(m,{label:e(s)("system.website.information.logo.label"),name:"logo",description:e(s)("system.website.information.logo.description")},{default:n(()=>[d("div",ee,[t(f,{modelValue:e(o).logo,"onUpdate:modelValue":i[3]||(i[3]=l=>e(o).logo=l),class:"h-24 w-24",text:e(s)("system.website.information.logo.upload"),icon:"i-lucide-upload",accept:".jpg,.png,.jpeg",maxCount:1,single:!0},null,8,["modelValue","text"])])]),_:1},8,["label","description"]),t(m,{label:e(s)("system.website.information.spaLoadingIcon.label"),name:"spaLoadingIcon",description:e(s)("system.website.information.spaLoadingIcon.description")},{default:n(()=>[d("div",oe,[t(f,{modelValue:e(o).spaLoadingIcon,"onUpdate:modelValue":i[4]||(i[4]=l=>e(o).spaLoadingIcon=l),class:"h-24 w-24",text:e(s)("system.website.information.spaLoadingIcon.upload"),icon:"i-lucide-upload",accept:".jpg,.png,.jpeg",maxCount:1,single:!0},null,8,["modelValue","text"])])]),_:1},8,["label","description"]),d("div",se,[t($,{codes:["system-website:setConfig"]},{default:n(()=>[t(b,{type:"submit",color:"primary",loading:e(c),disabled:e(c)||e(g)},{default:n(()=>[w(y(e(c)?e(s)("system.website.actions.saving"):e(s)("system.website.actions.save")),1)]),_:1},8,["loading","disabled"])]),_:1}),t(b,{type:"reset",loading:e(c),disabled:e(c)||e(g),color:"neutral",variant:"outline",onClick:L},{default:n(()=>[w(y(e(s)("system.website.actions.reset")),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["schema","state","onSubmit"])])}}});export{Ve as default};
