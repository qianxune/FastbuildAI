import{d as V,l as g,p as k,a2 as w,k as R,f as j,o as q,w as o,t as i,A as c,z as d,_ as B,g as a,D,aj as F}from"#entry";import{_ as G}from"./Co1Njv5N.js";import{_ as N}from"./D_3bTjYR.js";import{_ as O}from"./bvMLy1sv.js";import{_ as z}from"./DD8ySyt7.js";import{_ as M}from"./DQMjdCEn.js";import{a as E,b as H}from"./B9BC8iq9.js";import{c as I,a as J,b as K}from"./FTderXKt.js";const x=V({__name:"local-config",props:{data:{type:Object,required:!0}},emits:["update"],setup(_,{emit:y}){const b=y,f=_,r=g(!1),l=g(!1);k(r,e=>{e&&$()});const $=async()=>{const e=await E(f.data.id);s.isActive=e.isActive},p=R("form"),v=I({storageType:K().required(),isActive:J().required()}),s=w({...f.data,config:null});async function T(){try{l.value=!0,await H(s),s.isActive&&F().updateStorageType(s.storageType),r.value=!1,b("update")}finally{l.value=!1}}return(e,t)=>{const m=B,U=G,u=N,A=O,S=z,C=M;return q(),j(C,{open:a(r),"onUpdate:open":t[3]||(t[3]=n=>D(r)?r.value=n:null),title:e.$t("storage-config.storage.local"),ui:{footer:"justify-end"},dismissible:a(l)},{body:o(()=>[i(S,{ref_key:"form",ref:p,schema:a(v),state:a(s),class:"space-y-4",onSubmit:T},{default:o(()=>[i(u,{name:"storageType",label:e.$t("storage-config.form.storageType.label"),ui:{description:"py-2"},description:e.$t("storage-config.form.storageType.desc")},{default:o(()=>[i(U,{modelValue:a(s).storageType,"onUpdate:modelValue":t[0]||(t[0]=n=>a(s).storageType=n),items:[{label:e.$t("storage-config.storage.local"),value:"local"}]},null,8,["modelValue","items"])]),_:1},8,["label","description"]),i(u,{label:e.$t("storage-config.form.status"),name:"isActive"},{default:o(()=>[i(A,{modelValue:a(s).isActive,"onUpdate:modelValue":t[1]||(t[1]=n=>a(s).isActive=n),disabled:f.data.isActive},null,8,["modelValue","disabled"])]),_:1},8,["label"])]),_:1},8,["schema","state"])]),footer:o(({close:n})=>[i(m,{color:"neutral",variant:"outline",disabled:a(l),onClick:n},{default:o(()=>[c(d(e.$t("storage-config.cancel")),1)]),_:1},8,["disabled","onClick"]),i(m,{color:"primary",loading:a(l),onClick:t[2]||(t[2]=()=>a(p)?.submit())},{default:o(()=>[c(d(e.$t("storage-config.confirm")),1)]),_:1},8,["loading"])]),description:o(()=>[...t[4]||(t[4]=[])]),default:o(()=>[i(m,{variant:"ghost"},{default:o(()=>[c(d(e.$t("storage-config.table.setting")),1)]),_:1})]),_:1},8,["open","title","dismissible"])}}});export{x as _};
