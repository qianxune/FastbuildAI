import{d as A,i as B,n as c,p as I,J as Q,f as h,o as i,w as x,x as a,c as p,y as d,g as e,aZ as $,t as l,B as E,z as r,A as N,_ as q}from"#entry";import{_ as F}from"./Ghlq83yM.js";import{P as k}from"./CClQHGwT.js";import"./DQMjdCEn.js";import"./OUYfsp1i.js";import"./BFo3vNrE.js";import"./CuVAPZQ8.js";import"./Z7qkLoXK.js";import"./CjE5iPSn.js";import"./D9UsdH-b.js";import"./MCK2d4XT.js";import"./EK7Wbu3-.js";const V={class:"flex flex-col items-center justify-center gap-2"},j={key:0,class:"relative h-52 w-52"},z={key:1,class:"absolute inset-0 z-30 flex flex-col items-center justify-center bg-white/40 backdrop-blur-sm dark:bg-gray-800/60"},W={class:"mb-2 text-sm text-gray-700 dark:text-gray-300"},M={key:1,class:"flex w-full flex-col items-center justify-center space-y-4 py-8"},R={class:"space-y-2 text-center"},U={class:"text-lg font-medium"},H={class:"text-muted-foreground text-sm"},J={class:"bg-muted w-full space-y-2 rounded-lg p-4 text-left"},L={class:"font-medium"},S={class:"text-muted-foreground space-y-1 text-sm"},Y={class:"text-lg font-medium"},Z={class:"text-xl font-bold text-red-500"},G={class:"text-center text-lg"},K={class:"text-muted-foreground pt-2 text-center text-sm"},pe=A({__name:"payment-qr-modal",props:{prepaidData:{},orderInfo:{},isQrCodeExpired:{type:Boolean}},emits:["close","refreshQrCode"],setup(s,{emit:w}){const o=s,m=w,{t}=B(),f=c(()=>o.prepaidData?.payType===k.ALIPAY),b=c(()=>o.prepaidData?.payType===k.WECHAT),C=()=>{m("refreshQrCode")},u=c(()=>o.prepaidData?o.prepaidData.payType===1?t("marketing.frontend.recharge.wxPay"):t("marketing.frontend.recharge.alipayPay"):""),T=c(()=>o.prepaidData?o.prepaidData.payType===1?t("marketing.frontend.recharge.wxPay"):t("marketing.frontend.recharge.alipayPay"):""),v=()=>{if(!o.prepaidData?.payForm){console.error("Payment form not found");return}try{const n=window.open("about:blank","_blank");n?(n.document.writeln(o.prepaidData.payForm),n.document.close()):alert("backup window")}catch(n){console.error("Failed to submit Alipay payment form:",n)}};return I(()=>o.prepaidData,n=>{n&&f.value&&n.payForm&&Q(()=>{v()})},{immediate:!0}),(n,y)=>{const g=$,_=E,D=q,P=F;return i(),h(P,{ui:{content:"max-w-sm overflow-y-auto h-fit"},title:e(u),onClose:y[0]||(y[0]=O=>m("close",!0))},{default:x(()=>[a("div",V,[e(b)?(i(),p("div",j,[s.prepaidData?.qrCode?.code_url?(i(),h(g,{key:0,class:"w-full",src:s.prepaidData.qrCode.code_url,alt:`${e(u)} QR Code`},null,8,["src","alt"])):d("",!0),s.isQrCodeExpired?(i(),p("div",z,[l(_,{name:"i-lucide-alert-triangle",class:"mb-2 text-5xl text-yellow-500"}),a("p",W,r(e(t)("marketing.frontend.recharge.qrCodeExpired")),1),l(D,{class:"cursor-pointer",size:"xs",onClick:C},{default:x(()=>[N(r(e(t)("marketing.frontend.recharge.refreshQrCode")),1)]),_:1})])):d("",!0)])):d("",!0),e(f)?(i(),p("div",M,[l(g,{src:"https://cdn.aptoide.com/imgs/6/8/4/684670b993da48b85ed2d32d4f56bbfc_icon.png",alt:"Alipay",class:"h-16 w-16"}),l(_,{name:"i-lucide-loader-2",class:"text-primary h-12 w-12 animate-spin"}),a("div",R,[a("p",U,r(e(t)("marketing.frontend.recharge.alipayTips.tip1")),1),a("p",H,r(e(t)("marketing.frontend.recharge.alipayTips.tip2")),1)]),a("div",J,[a("p",L,r(e(t)("marketing.frontend.recharge.alipayTips.stepTitle")),1),a("ol",S,[a("li",null,r(e(t)("marketing.frontend.recharge.alipayTips.step1")),1),a("li",null,r(e(t)("marketing.frontend.recharge.alipayTips.step2")),1),a("li",null,r(e(t)("marketing.frontend.recharge.alipayTips.step3")),1)])])])):d("",!0),a("div",null,[a("span",Y,r(e(t)("marketing.frontend.recharge.total"))+"： ",1),a("span",Z," ¥"+r(s.orderInfo?.orderAmount),1)]),a("div",G,r(e(t)("marketing.frontend.recharge.use"))+" "+r(e(T))+" "+r(e(t)("marketing.frontend.recharge.pay")),1),a("div",K,r(e(t)("marketing.frontend.recharge.contact")),1)])]),_:1},8,["title"])}}});export{pe as default};
