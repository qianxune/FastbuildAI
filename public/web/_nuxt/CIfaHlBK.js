import{d as z,i as S,l as B,n as y,q as I,c as n,o as r,x as s,t as _,B as Q,z as i,g as u,F as g,E as v,C as G,y as j}from"#entry";import{k as q}from"./C0KOn7yN.js";import{L as k}from"./BherOyCc.js";import"./cd55qm53.js";const E={class:"plugin-page-provider flex h-full flex-col"},F={key:0,class:"flex flex-1 items-center justify-center"},U={class:"mx-auto max-w-md text-center"},V={class:"from-muted/50 to-muted/20 mx-auto mb-6 flex h-24 w-24 items-center justify-center rounded-3xl bg-linear-to-br"},A={class:"text-foreground mb-3 text-xl font-bold"},M={class:"text-muted-foreground text-base leading-relaxed"},$={key:1,class:"flex-1 overflow-y-auto p-6"},D={class:"mb-4 flex items-center gap-3"},K={class:"text-foreground text-lg font-semibold"},O={class:"bg-primary/10 text-primary rounded-full px-3 py-1 text-xs font-medium"},T={class:"mb-4 flex flex-wrap gap-2"},H=["onClick"],J={class:"min-w-0 flex-1"},R={class:"text-foreground truncate text-base font-semibold"},W={key:0,class:"absolute top-0 right-0 flex-none"},oe=z({__name:"plugin-page-provider",props:{searchQuery:{default:""},selected:{default:null}},emits:["select"],setup(f,{emit:P}){const m=f,b=P,{t:l}=S(),c=B([]),h=y(()=>{if(!m.searchQuery)return c.value;const e=m.searchQuery.toLowerCase();return c.value.filter(t=>t.name?.toLowerCase().includes(e)||t.path?.toLowerCase().includes(e))}),w=y(()=>{const e={};for(const t of h.value){const o=t.pluginName||C(t.path??"");e[o]||(e[o]=[]),e[o].push(t)}return e}),C=e=>e.replace(/^\//,"").split("/")[0]||l("console-common.linkPicker.emptyState.unknownGroup"),N=async()=>{try{const e=await q();if(e&&e.error){console.error("Failed to load plugin pages:",e.error),c.value=[];return}if(!e||!e.data){console.error("Invalid response format:",e),c.value=[];return}const t=e.data.map(o=>({type:k.PLUGIN,pluginName:o.pluginName,name:o.linkName,path:o.linkPath,query:{}}));t.sort((o,d)=>{const p=o.name||"",a=d.name||"";return p.localeCompare(a)}),c.value=t}catch(e){console.error("Error loading plugin pages:",e),c.value=[]}},L=e=>{b("select",e)},x=e=>m.selected?.path===e.path&&m.selected?.type===k.PLUGIN;return I(()=>N()),(e,t)=>{const o=Q;return r(),n("div",E,[h.value.length===0?(r(),n("div",F,[s("div",U,[s("div",V,[_(o,{name:"i-heroicons-puzzle-piece",class:"text-muted-foreground h-12 w-12"})]),s("h3",A,i(f.searchQuery?u(l)("console-common.linkPicker.emptyState.noMatchingPages"):u(l)("console-common.linkPicker.emptyState.noPluginPages")),1),s("p",M,i(f.searchQuery?u(l)("console-common.linkPicker.emptyState.tryOtherKeywords"):u(l)("console-common.linkPicker.emptyState.contactAdmin")),1)])])):(r(),n("div",$,[(r(!0),n(g,null,v(w.value,(d,p)=>(r(),n(g,{key:p},[s("div",D,[_(o,{name:"i-heroicons-puzzle-piece",class:"text-primary h-5 w-5"}),s("h4",K,i(p),1),s("span",O,i(d.length)+" "+i(u(l)("console-common.linkPicker.pageCount")),1)]),s("div",T,[(r(!0),n(g,null,v(d,a=>(r(),n("div",{key:a.path,class:G(["group relative flex cursor-pointer items-center gap-4 rounded-xl px-4 py-3 transition-all duration-200",x(a)?"bg-primary/5 shadow-sm":"bg-accent hover:bg-primary/5"]),onClick:X=>L(a)},[s("div",J,[s("div",R,i(a.name),1)]),x(a)?(r(),n("div",W,[...t[0]||(t[0]=[s("div",{class:"bg-primary flex size-3 items-center justify-center rounded-full"},null,-1)])])):j("",!0)],10,H))),128))])],64))),128))]))])}}});export{oe as default};
