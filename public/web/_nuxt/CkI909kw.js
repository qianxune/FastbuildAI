import z from"./cd55qm53.js";import{_ as E}from"./o4ws_w_T.js";import{d as K,s as c,i as M,q as F,f as p,o as n,w as T,x as u,t as d,c as k,bD as B,D as L,g as f,F as $,E as R,_ as q,z as C}from"#entry";import{_ as A}from"./Ghlq83yM.js";import{a as G,b as I,c as S,d as j}from"./BZx839BO.js";import{u as H}from"./CSy6ZCzT.js";import"./DQMjdCEn.js";import"./OUYfsp1i.js";import"./BFo3vNrE.js";import"./CuVAPZQ8.js";import"./Z7qkLoXK.js";import"./CjE5iPSn.js";import"./D9UsdH-b.js";import"./MCK2d4XT.js";import"./EK7Wbu3-.js";const J={class:"flex flex-wrap gap-2"},re=K({__name:"manage-popup",props:{type:{}},emits:["close"],setup(V,{emit:h}){const x=h,i=V,_=c([]),o=c(""),r=c(-1),s=async()=>{const e=await G({type:i.type});_.value=e},m=async()=>{o.value.trim()&&(await I({name:o.value,type:i.type}),o.value="",s())},U=async e=>{e.name.trim()&&(await S(e.id,{name:e.name,type:i.type}),r.value=-1,s())},{t:g}=M(),D=async e=>{await H({title:g("common.tag.deleteTag"),description:g("common.tag.confirmDeleteTag"),color:"error"})&&(await j(e.id),s())};return F(()=>{s()}),(e,t)=>{const y=z,v=E,b=q,N=A;return n(),p(N,{title:e.$t("common.tag.manageTags"),ui:{content:"max-w-xl"},onClose:t[1]||(t[1]=a=>x("close"))},{default:T(()=>[u("div",J,[d(y,{modelValue:f(o),"onUpdate:modelValue":t[0]||(t[0]=a=>L(o)?o.value=a:null),placeholder:e.$t("common.tag.createNewTag"),onKeydown:B(m,["enter"]),onBlur:m},null,8,["modelValue","placeholder"]),(n(!0),k($,null,R(f(_),(a,w)=>(n(),k($,{key:a.id},[f(r)!==w?(n(),p(b,{key:0,color:"neutral",variant:"outline",ui:{base:"gap-2"}},{default:T(()=>[u("span",null,C(a.name),1),u("span",null,C(a.bindingCount),1),d(v,{color:"neutral",icon:"i-lucide-pen-line",variant:"soft",size:"xs",onClick:l=>r.value=w},null,8,["onClick"]),d(v,{color:"neutral",icon:"i-lucide-trash",variant:"soft",size:"xs",onClick:l=>D(a)},null,8,["onClick"])]),_:2},1024)):(n(),p(y,{key:1,modelValue:a.name,"onUpdate:modelValue":l=>a.name=l,autofocus:"",color:"primary",onKeydown:B(m,["enter"]),onBlur:l=>U(a)},null,8,["modelValue","onUpdate:modelValue","onBlur"]))],64))),128))])]),_:1},8,["title"])}}});export{re as default};
