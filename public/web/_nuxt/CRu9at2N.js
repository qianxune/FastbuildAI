import{aj as l,ak as c}from"#entry";import{S as s}from"./td2xDKru.js";import{f as p}from"./9Q2Y_nd6.js";async function g(t){const o=l();try{let e=o.storageType;switch(e||(e=await o.checkStorageType()),e){case s.OSS:{const r=await(await fetch(t.url)).blob(),i=n=>{const a=new URL(n).pathname;return a.substring(a.lastIndexOf("/")+1)};return await p({file:r,size:r.size,name:i(t.url)})}case s.LOCAL:return c(t)}return Promise.reject("Invalid storage type")}catch(e){throw console.error("[Upload] upload failed:",e),e}}export{g as u};
