const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./4jjeIyfe.js","./Cgyg1gJC.js","./cd55qm53.js"])))=>i.map(i=>d[i]);
import{at as w,i as k,aM as y,n as i,l as u,aX as b,h as r,W as h,aO as x,X as D}from"#entry";import{a as T,b as M,c as _,d as A,e as I,f as R,g as E,h as U}from"./gu2_Ts15.js";import{u as m}from"./CSy6ZCzT.js";const f=h(()=>D(()=>import("./4jjeIyfe.js"),__vite__mapDeps([0,1]),import.meta.url)),V=h(()=>D(()=>import("./cd55qm53.js"),__vite__mapDeps([2,1]),import.meta.url));function P(c,e){const n=u(new Set),o=i(()=>{const a=c.value??[];return a.length>0&&n.value.size===a.length}),g=i(()=>{const a=c.value??[];return n.value.size>0&&n.value.size<a.length});return{selected:n,isAll:o,isIndeterminate:g,toggle:a=>{n.value.has(a)?n.value.delete(a):n.value.add(a)},toggleAll:()=>{const a=c.value??[];n.value=o.value?new Set:new Set(a.map(e))},clear:()=>{n.value.clear()}}}function L(){const c=w(),{t:e}=k(),{params:n}=y(),o=i(()=>n.id);return{deleteDocument:async(a,t)=>{try{await m({color:"error",title:e("ai-datasets.backend.documents.delete.title"),content:e("ai-datasets.backend.documents.delete.desc"),confirmText:e("console-common.delete"),ui:{content:"!w-sm"}}),await A(a,o.value),c.success(e("common.message.deleteSuccess")),x(`dataset-detail-${o.value}`),t?.()}catch(s){console.error("删除失败:",s)}},renameDocument:async(a,t)=>{try{const s=u(a.fileName),d=b({setup(){return()=>r("div",{class:"py-2"},[r("div",{class:"text-sm text-gray-600 mb-3"},e("ai-datasets.backend.documents.renameModal.desc")),r(V,{modelValue:s.value,"onUpdate:modelValue":S=>{s.value=S},placeholder:e("ai-datasets.backend.documents.renameModal.placeholder"),class:"w-full",size:"md"})])}});await m({title:e("ai-datasets.backend.documents.renameModal.title"),content:d,confirmText:e("console-common.confirm"),cancelText:e("console-common.cancel"),ui:{content:"!w-sm"}}),s.value&&s.value!==a.fileName&&(await _(a.id,{fileName:s.value,datasetId:o.value}),c.success(e("ai-datasets.backend.documents.renameModal.success")),t?.())}catch(s){console.error("重命名失败:",s)}},retryDocument:async(a,t)=>{try{await m({title:e("ai-datasets.backend.documents.retry.title"),content:e("ai-datasets.backend.documents.retry.desc"),confirmText:e("console-common.confirm"),cancelText:e("console-common.cancel"),ui:{content:"!w-sm"}}),await M(a),c.success(e("ai-datasets.backend.documents.retry.success")),t?.()}catch(s){console.error("重试失败:",s)}},toggleDocumentEnabled:async(a,t,s)=>{try{await m({title:e(t?"ai-datasets.backend.documents.enable.title":"ai-datasets.backend.documents.disable.title"),content:e(t?"ai-datasets.backend.documents.enable.desc":"ai-datasets.backend.documents.disable.desc"),confirmText:e("console-common.confirm"),cancelText:e("console-common.cancel"),ui:{content:"!w-sm"}}),await T(a,t,o.value),c.success(e(t?"ai-datasets.backend.documents.enable.success":"ai-datasets.backend.documents.disable.success")),s?.()}catch(d){console.error("切换启用状态失败:",d)}}}}function F(){const c=w(),{t:e}=k(),{params:n}=y(),o=i(()=>n.id);return{deleteSegments:async(l,a)=>{try{const t=Array.isArray(l);await m({color:"error",title:e(t?"ai-datasets.backend.segments.batchDelete.title":"ai-datasets.backend.segments.delete.title"),content:e(t?"ai-datasets.backend.segments.batchDelete.confirmDesc":"ai-datasets.backend.segments.batchDelete.confirmDesc2"),confirmText:e(t?"ai-datasets.backend.segments.batchDelete.confirmText":"console-common.delete"),ui:{content:"!w-sm"}}),t?await E(l,o.value):await U(l,o.value),c.success(e("ai-datasets.backend.segments.batchDelete.success")),a?.()}catch(t){console.error("删除失败:",t)}},createSegment:async(l,a)=>{if(!l){c.error(e("ai-datasets.backend.segments.createSegmentModal.tip"));return}try{const t=u(""),s=b({setup(){return()=>r("div",{class:"py-2"},[r("div",{class:"text-sm text-gray-600 mb-3"},e("ai-datasets.backend.segments.createSegmentModal.desc")),r(f,{modelValue:t.value,"onUpdate:modelValue":d=>t.value=d,placeholder:e("ai-datasets.backend.segments.createSegmentModal.placeholder"),class:"w-full",size:"md",rows:10})])}});await m({title:e("ai-datasets.backend.segments.createSegment"),content:s,confirmText:e("console-common.create"),cancelText:e("console-common.cancel"),ui:{content:"!w-lg"}}),t.value.trim()&&(await R({documentId:l,content:t.value.trim(),datasetId:o.value}),c.success(e("ai-datasets.backend.segments.createSegmentModal.success")),a?.())}catch(t){console.error("创建失败:",t)}},editSegment:async(l,a)=>{try{const t=u(l.content),s=b({setup(){return()=>r("div",{class:"py-2"},[r("div",{class:"text-sm text-gray-600 mb-3"},e("ai-datasets.backend.segments.editSegmentModal.desc")),r(f,{modelValue:t.value,"onUpdate:modelValue":d=>t.value=d,placeholder:e("ai-datasets.backend.segments.editSegmentModal.placeholder"),class:"w-full",size:"md",rows:10})])}});await m({title:e("ai-datasets.backend.segments.editSegmentModal.title"),content:s,confirmText:e("console-common.confirm"),cancelText:e("console-common.cancel"),ui:{content:"!w-lg"}}),t.value&&t.value!==l.content&&(await I(l.id,{content:t.value,datasetId:o.value}),c.success(e("ai-datasets.backend.segments.editSegmentModal.success")),a?.())}catch(t){console.error("编辑失败:",t)}}}}export{F as a,P as b,L as u};
