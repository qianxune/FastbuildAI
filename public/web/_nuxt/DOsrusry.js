import{d as N,i as M,at as j,s as g,q as F,f as I,o,w as _,x as t,c as n,g as e,t as c,B as L,y as m,z as i,F as h,E as v,A as b,_ as q}from"#entry";import{_ as A}from"./Ghlq83yM.js";import{l as D}from"./CsRstiIM.js";import"./DQMjdCEn.js";import"./OUYfsp1i.js";import"./BFo3vNrE.js";import"./CuVAPZQ8.js";import"./Z7qkLoXK.js";import"./CjE5iPSn.js";import"./D9UsdH-b.js";import"./MCK2d4XT.js";import"./EK7Wbu3-.js";const R={class:"space-y-4"},S={key:0,class:"flex items-center justify-center py-12"},T={key:1,class:"space-y-4"},G={class:"text-foreground mb-1 text-sm font-medium"},H={class:"text-muted-foreground text-sm"},J={key:0,class:"bg-warning/10 border-warning/30 rounded-lg border p-3"},K={class:"mb-1 flex items-center gap-1.5"},O={class:"text-warning text-sm font-medium"},Q={class:"text-warning text-sm whitespace-pre-line"},W={key:1},X={class:"mb-2 flex items-center gap-1.5"},Y={class:"text-foreground text-sm font-medium"},Z={class:"text-muted-foreground space-y-1 pl-5 text-sm"},ee={key:2},te={class:"mb-2 flex items-center gap-1.5"},se={class:"text-foreground text-sm font-medium"},oe={class:"text-muted-foreground space-y-1 pl-5 text-sm"},ne={key:3},ie={class:"mb-2 flex items-center gap-1.5"},re={class:"text-foreground text-sm font-medium"},ae={class:"text-muted-foreground space-y-1 pl-5 text-sm"},ce={key:4,class:"text-muted-foreground py-4 text-center text-sm"},de={key:2,class:"text-muted-foreground py-8 text-center text-sm"},le={class:"flex items-center justify-end gap-3"},be=N({__name:"upgrade-preview",props:{extension:{}},emits:["close","confirmUpgrade"],setup(z,{emit:C}){const f=C,P=z,{t:r}=M(),U=j(),p=g(!0),B=g(!1),s=g(null),$=async()=>{try{p.value=!0;const a=await D(P.extension.identifier);s.value=a}catch(a){console.error("获取更新内容失败:",a),U.error(r("extensions.upgradePreview.fetchError"))}finally{p.value=!1}};function x(a){return a?a.split(`
`).filter(w=>w.trim()):[]}const E=async()=>{f("confirmUpgrade"),f("close")};function y(){f("close")}return F(()=>{$()}),(a,w)=>{const d=L,k=q,V=A;return o(),I(V,{title:e(r)("extensions.upgradePreview.title"),ui:{content:"max-w-lg"},onClose:y},{footer:_(()=>[t("div",le,[c(k,{color:"neutral",variant:"outline",onClick:y},{default:_(()=>[b(i(e(r)("console-common.cancel")),1)]),_:1}),c(k,{color:"primary",loading:e(B),disabled:e(p)||!e(s),onClick:E},{default:_(()=>[b(i(e(r)("extensions.upgradePreview.confirmUpgrade")),1)]),_:1},8,["loading","disabled"])])]),default:_(()=>[t("div",R,[e(p)?(o(),n("div",S,[c(d,{name:"i-lucide-loader-2",class:"size-6 animate-spin"})])):e(s)?(o(),n("div",T,[t("div",null,[t("h4",G,i(e(r)("extensions.upgradePreview.newVersion")),1),t("p",H,"v"+i(e(s).version),1)]),e(s).notes?(o(),n("div",J,[t("div",K,[c(d,{name:"i-lucide-triangle-alert",class:"text-warning size-4"}),t("span",O,i(e(r)("extensions.upgradePreview.notice")),1)]),t("p",Q,i(e(s).notes),1)])):m("",!0),e(s).features?(o(),n("div",W,[t("div",X,[c(d,{name:"i-tabler-check",class:"text-success size-4"}),t("span",Y,i(e(r)("extensions.upgradePreview.features")),1)]),t("ul",Z,[(o(!0),n(h,null,v(x(e(s).features),(l,u)=>(o(),n("li",{key:`feature-${u}`,class:"list-disc"},i(l),1))),128))])])):m("",!0),e(s).optimize?(o(),n("div",ee,[t("div",te,[c(d,{name:"i-lucide-zap",class:"text-info size-4"}),t("span",se,i(e(r)("extensions.upgradePreview.optimizes")),1)]),t("ul",oe,[(o(!0),n(h,null,v(x(e(s).optimize),(l,u)=>(o(),n("li",{key:`optimize-${u}`,class:"list-disc"},i(l),1))),128))])])):m("",!0),e(s).fixs?(o(),n("div",ne,[t("div",ie,[c(d,{name:"i-lucide-bug",class:"text-error size-4"}),t("span",re,i(e(r)("extensions.upgradePreview.fixes")),1)]),t("ul",ae,[(o(!0),n(h,null,v(x(e(s).fixs),(l,u)=>(o(),n("li",{key:`fix-${u}`,class:"list-disc"},i(l),1))),128))])])):m("",!0),!e(s).features&&!e(s).optimize&&!e(s).fixs&&!e(s).notes?(o(),n("div",ce,i(e(r)("extensions.upgradePreview.noContent")),1)):m("",!0)])):(o(),n("div",de,i(e(r)("extensions.upgradePreview.fetchError")),1))])]),_:1},8,["title"])}}});export{be as default};
