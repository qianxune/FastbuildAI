import{d as E,i as N,at as F,n as I,aN as K,f as M,o as f,w as t,t as o,g as r,x as m,_ as T,A as h,z as c,c as v,aZ as j,B as z}from"#entry";import D from"./cd55qm53.js";import{_ as J}from"./D_3bTjYR.js";import{_ as L}from"./bvMLy1sv.js";import{_ as O}from"./JxyxsHxp.js";import{_ as R}from"./DD8ySyt7.js";import{_ as Z}from"./Ghlq83yM.js";import{d as q}from"./CqRfGXQR.js";import"./D9sX2Qi6.js";import"./CAQVAH0V.js";import"./Deu6qIfg.js";import"./DQMjdCEn.js";import"./OUYfsp1i.js";import"./BFo3vNrE.js";import"./CuVAPZQ8.js";import"./Z7qkLoXK.js";import"./CjE5iPSn.js";import"./D9UsdH-b.js";import"./MCK2d4XT.js";import"./EK7Wbu3-.js";import"./Y67jy4iF.js";import"./CjasYwqF.js";import"./DBEJUH-Z.js";import"./CMKSl-Ng.js";import"./BCcN9pii.js";import"./CtosDvS0.js";import"./CvI6s-qz.js";import"./DNSLGqNg.js";import"./DeCyaT7k.js";import"./D4e4FYoF.js";import"./BstbYvQo.js";import"./CBTz8tdX.js";import"./DMoqg0Fd.js";import"./kRIii9yh.js";import"./C6Y-ieo6.js";import"./psimjGaX.js";import"./B3rWqoNg.js";import"./B5gsc-Ax.js";import"./o4ws_w_T.js";import"./Cub7JM7Q.js";import"./hsuWSsy6.js";import"./BEKWrOog.js";import"./3nrh3-Gq.js";import"./DaWZu8wl.js";import"./BlyoSzaa.js";import"./CSy6ZCzT.js";const G={class:"text-lg font-semibold"},H={class:"text-muted-foreground flex items-center gap-2 text-sm"},P={key:0,class:"flex-none"},Q={key:1,class:"flex-none"},W={class:"flex w-full justify-end gap-2 pt-3.5"},Re=E({__name:"model-batch-edit",props:{models:{},provider:{}},emits:["close"],setup(l,{emit:g}){const b=l,p=g,{t:i}=N(),y=F(),V=[{accessorKey:"name",header:i("ai-provider.backend.model.batchEdit.name")},{accessorKey:"model",header:i("ai-provider.backend.model.batchEdit.model")},{accessorKey:"maxContext",header:i("ai-provider.backend.model.batchEdit.maxContext")},{accessorKey:"isActive",header:i("ai-provider.backend.model.batchEdit.isActive")}],u=I(()=>b.models.size===0?[]:JSON.parse(JSON.stringify([...b.models]))),{lockFn:U,isLock:k}=K(async()=>{try{const s=u.value.map(a=>({id:a.id,name:a.name,model:a.model,maxContext:a.maxContext,isActive:a.isActive,billingRule:a.billingRule}));await q(s),y.success(i("console-common.batchEditSuccess")),p("close",!0)}catch(s){console.error("批量编辑失败:",s)}});return(s,a)=>{const $=j,C=z,_=D,d=J,A=L,w=O,x=T,B=R,S=Z;return f(),M(S,{ui:{content:"max-w-4xl overflow-y-auto h-fit"},onClose:a[1]||(a[1]=e=>p("close",!1))},{title:t(()=>[m("div",null,[m("h3",G,c(r(i)("ai-provider.backend.model.batchEditTitle")),1),m("div",H,[l.provider?.iconUrl?(f(),v("div",P,[o($,{src:l.provider.iconUrl,alt:l.provider.name,class:"h-4 w-4 rounded object-cover"},null,8,["src","alt"])])):(f(),v("div",Q,[o(C,{name:"i-lucide-building-office",class:"h-4 w-4"})])),m("span",null,c(l.provider?.name),1)])])]),default:t(()=>[o(B,{state:r(u),onSubmit:r(U)},{default:t(()=>[o(w,{columns:V,data:r(u),sticky:"",class:"h-120",ui:{base:"table-fixed border-separate border-spacing-0",thead:"[&>tr]:bg-elevated/50 [&>tr]:after:content-none",tbody:"[&>tr]:last:[&>td]:border-b-0",th:"py-2 first:rounded-l-lg last:rounded-r-lg border-y border-default first:border-l last:border-r [&:nth-child(4)]:min-w-22",td:"border-b border-default cursor-pointer [&:nth-child(4)]:min-w-22",tr:"[&:has(>td[colspan])]:hidden"}},{"name-cell":t(({row:e})=>[o(d,{name:`rows.${e.index}.name`},{default:t(()=>[o(_,{modelValue:e.original.name,"onUpdate:modelValue":n=>e.original.name=n},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["name"])]),"model-cell":t(({row:e})=>[o(d,{name:`rows.${e.index}.model`},{default:t(()=>[o(_,{modelValue:e.original.model,"onUpdate:modelValue":n=>e.original.model=n},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["name"])]),"maxContext-cell":t(({row:e})=>[o(d,{name:`rows.${e.index}.maxContext`},{default:t(()=>[o(_,{modelValue:e.original.maxContext,"onUpdate:modelValue":n=>e.original.maxContext=n,ui:{base:"w-18"},type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["name"])]),"isActive-cell":t(({row:e})=>[o(d,{name:`rows.${e.index}.isActive`},{default:t(()=>[o(A,{modelValue:e.original.isActive,"onUpdate:modelValue":n=>e.original.isActive=n},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["name"])]),_:1},8,["data"]),m("div",W,[o(x,{color:"neutral",variant:"soft",onClick:a[0]||(a[0]=e=>p("close",!1))},{default:t(()=>[h(c(r(i)("console-common.cancel")),1)]),_:1}),o(x,{color:"primary",type:"submit",loading:r(k)},{default:t(()=>[h(c(r(i)("console-common.save")),1)]),_:1},8,["loading"])])]),_:1},8,["state","onSubmit"])]),_:1})}}});export{Re as default};
