const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BgnpzpkE.js","./Cgyg1gJC.js","./DBiaUVBh.js","./mTXQFtMl.js","./D9UsdH-b.js","./OUYfsp1i.js","./BFo3vNrE.js","./CuVAPZQ8.js","./Z7qkLoXK.js","./DXt_wpdg.js","./CsRstiIM.js","./BIrsugPU.js","./o4ws_w_T.js","./C_Nw1JQK.js","./G6pl5rbt.js","./cd55qm53.js","./D_3bTjYR.js","./D9sX2Qi6.js","./Da83zglB.js","./9Q2Y_nd6.js","./td2xDKru.js","./RPflLnqr.js","./TrJvDfxI.js","./jsPNKUA0.js","./abPSHzII.js","./4jjeIyfe.js","./Co1Njv5N.js","./CtosDvS0.js","./CAQVAH0V.js","./BCcN9pii.js","./CMKSl-Ng.js","./Deu6qIfg.js","./DBEJUH-Z.js","./BOX2fHuw.js","./Y67jy4iF.js","./CjasYwqF.js","./DD8ySyt7.js","./Ghlq83yM.js","./DQMjdCEn.js","./CjE5iPSn.js","./MCK2d4XT.js","./EK7Wbu3-.js","./FTderXKt.js","./DaWZu8wl.js","./Bo3m0FpY.js","./CqHeDhj0.js","./Cie-o9Wa.js","./hsuWSsy6.js","./DMoqg0Fd.js","./kRIii9yh.js","./DNSLGqNg.js","./C6Y-ieo6.js","./DeCyaT7k.js","./D4e4FYoF.js","./psimjGaX.js","./B0g9CpkI.js","./DOsrusry.js","./BMsQn-vT.js"])))=>i.map(i=>d[i]);
import{d as de,i as me,V as pe,at as ue,l as ge,aQ as _e,p as fe,n as he,a2 as M,aN as ve,q as xe,c as f,o as r,x as o,z as c,g as e,t as l,K as be,B as ye,w as h,F as P,E as O,f as g,y as _,G as we,_ as Ee,bI as ke,W as b,X as y,h as R}from"#entry";import Ae from"./cd55qm53.js";import{_ as Ie}from"./CvI6s-qz.js";import{_ as Ce}from"./DbqqhwXM.js";import{_ as Le}from"./o4ws_w_T.js";import{_ as De}from"./CBTz8tdX.js";import{_ as ze}from"./B8dIIAdq.js";import{_ as Be}from"./Cie-o9Wa.js";import{a as p,E as v,b as F}from"./C_Nw1JQK.js";import{c as Te,m as $e,n as Ue,o as Ne,p as Se,q as Ve}from"./CsRstiIM.js";import{u as Me}from"./ZDOPDbaX.js";import{u as Pe}from"./CSy6ZCzT.js";import"./CtosDvS0.js";import"./CAQVAH0V.js";import"./DNSLGqNg.js";import"./BFo3vNrE.js";import"./DeCyaT7k.js";import"./D4e4FYoF.js";import"./Z7qkLoXK.js";import"./BstbYvQo.js";import"./CuVAPZQ8.js";import"./psimjGaX.js";import"./B3rWqoNg.js";import"./EK7Wbu3-.js";import"./DMoqg0Fd.js";import"./kRIii9yh.js";import"./C6Y-ieo6.js";import"./BCcN9pii.js";import"./CMKSl-Ng.js";import"./jsPNKUA0.js";import"./abPSHzII.js";const Oe={class:"extension-manage-container flex h-full flex-col pb-5"},Re={class:"header bg-background sticky top-0 z-10 pb-6"},Fe={class:"space-y-4"},We={class:"flex w-full flex-wrap justify-between gap-4"},je={class:"flex items-end justify-end"},qe={class:"text-lg font-medium"},Xe={class:"flex items-center gap-4"},Ge={key:0,class:"relative grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},He={class:"z-10 h-[170px] rounded-lg border border-dashed p-4"},Ke={class:"flex flex-col"},Qe={class:"text-muted-foreground pb-2 pl-2 text-xs font-bold"},Je={class:"absolute top-0 right-0 bottom-0 left-0 flex h-[calc(100vh-12rem)] items-center justify-center"},Ye={class:"text-muted-foreground text-sm font-medium"},Ze={key:1,class:"grid h-[calc(100vh-12rem)]"},et={class:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},tt={class:"h-[170px] rounded-lg border border-dashed p-4"},at={class:"flex flex-col"},st={class:"text-muted-foreground pb-2 pl-2 text-xs font-bold"},ot={class:"flex h-full w-full cursor-pointer flex-col p-4"},it={class:"flex justify-between"},nt={class:"flex w-[calc(100%-76px)] flex-col gap-1"},lt={class:"flex items-center gap-1"},rt={class:"text-foreground truncate text-[16px] leading-[22px] font-[500]"},ct={class:"text-muted-foreground line-clamp-1 text-[14px] leading-[20px] font-normal wrap-break-word"},dt={class:"mt-1.5 flex items-center gap-2"},mt={class:"ml-[12px] h-[64px] w-[64px] flex-none overflow-hidden rounded-[10px]"},pt={class:"mt-auto flex items-center justify-between"},ut={class:"flex items-center gap-1 text-xs"},gt={class:"text-nowrap"},_t={class:"bg-background flex items-center gap-2"},ft={key:0,class:"text-error flex items-center gap-1"},ht={class:"text-xs leading-none"},Qt=de({__name:"list",setup(vt){const W=b(()=>y(()=>import("./BgnpzpkE.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),j=b(()=>y(()=>import("./BIrsugPU.js"),__vite__mapDeps([11,1,12,2,3,4,5,6,7,8,9,13,10]),import.meta.url)),q=b(()=>y(()=>import("./G6pl5rbt.js"),__vite__mapDeps([14,15,1,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,7,33,34,35,36,37,38,5,6,8,39,4,40,41,13,10,42,43]),import.meta.url)),X=b(()=>y(()=>import("./Bo3m0FpY.js"),__vite__mapDeps([44,1,12,45,15,46,23,24,47,48,27,49,50,8,51,6,52,53,29,30,7,54,55,37,38,5,39,4,40,41,10]),import.meta.url)),G=b(()=>y(()=>import("./DOsrusry.js"),__vite__mapDeps([56,1,37,38,5,6,7,8,39,4,40,41,10]),import.meta.url)),H=b(()=>y(()=>import("./BMsQn-vT.js"),__vite__mapDeps([57,1,15,16,17,36,37,38,5,6,7,8,39,4,40,41,10,42,43]),import.meta.url)),{t:s}=me(),x=pe(),w=ue(),C=ge({total:0,installed:0,uninstalled:0}),E=_e({type:void 0}),K=a=>({[v.WEB]:s("extensions.modal.terminalTypes.web"),[v.WEIXIN]:s("extensions.modal.terminalTypes.weixin"),[v.H5]:s("extensions.modal.terminalTypes.h5"),[v.MP]:s("extensions.modal.terminalTypes.mp"),[v.API]:s("extensions.modal.terminalTypes.api")})[a]||s("extensions.manage.unknown"),{paging:n,getLists:m}=Me({fetchFun:Te,params:E});fe(()=>n.extend,a=>{a?.statistics?C.value=a.statistics:C.value={total:0,installed:0,uninstalled:0}},{deep:!0});const Q=he(()=>n.items.length<n.total),J=()=>{n.loading||(n.page++,m({append:!0}))},T=be(()=>{n.page=1,m()},500),Y=a=>{window.open(`${ke.EXTENSION}/${a.identifier}/buildingai-middleware`,"_blank")},I=M({}),k=M({}),Z=async a=>{if(!I[a.identifier])try{I[a.identifier]=!0,await Se(a.identifier),n.page=1,await m(),w.success(s("console-common.messages.success"))}catch(i){console.error("安装插件失败:",i)}finally{I[a.identifier]=!1}},ee=a=>{x.create(G).open({extension:a,onConfirmUpgrade:()=>{te(a)}})},te=async a=>{if(!k[a.identifier])try{k[a.identifier]=!0,await Ve(a.identifier),n.page=1,await m(),w.success(s("console-common.messages.success"))}catch(i){console.error("更新插件失败:",i)}finally{k[a.identifier]=!1}},{lockFn:ae}=ve(async a=>{try{await Pe({title:s("extensions.manage.uninstall.title"),content:R("div",{class:"text-sm text-muted-foreground"},[s("extensions.manage.uninstall.description"),R("span",{style:{color:"red",fontWeight:"bold"}},s("extensions.manage.uninstall.descriptionWarning"))]),color:"error"}),await Ne(a.identifier),n.page=1,await m(),w.success(s("console-common.messages.success"))}catch(i){console.error("卸载插件失败:",i)}}),$=async a=>{try{await $e(a.id),n.page=1,await m(),w.success(s("console-common.messages.success"))}catch(i){console.error("启用插件失败:",i)}},se=async a=>{try{await Ue(a.id),n.page=1,await m(),w.success(s("console-common.messages.success"))}catch(i){console.error("禁用插件失败:",i)}},oe=a=>{x.create(X).open({extension:a})},L=async(a,i)=>{await x.create(q).open({isEdit:i,id:a.id,initialData:{name:a.name,packName:a.identifier,description:a.description,version:a.version,icon:a.icon,type:a.type,supportTerminal:a.supportTerminal||[],author:a.author||{avatar:"",name:"",homepage:""}}}).result&&(n.page=1,m())},U=()=>{window.open("https://buildingai.cc/plugin")},ie=a=>{x.create(j).open({isIdentifier:a.isLocal,extensionId:a.id,identifier:a.identifier})},ne=a=>{x.create(W).open({extension:a,identifier:a.identifier})},N=async()=>{await x.create(H).open().result&&(n.page=1,await m())};return xe(()=>m()),(a,i)=>{const D=Ae,S=Ie,u=ye,z=Ce,B=Le,V=we,A=Ee,le=De,re=ze,ce=Be;return r(),f("div",Oe,[o("div",Re,[o("div",Fe,[o("div",We,[o("div",je,[o("h3",qe,c(e(s)("extensions.manage.myApps"))+" ("+c(e(C).total)+") ",1)]),o("div",Xe,[l(D,{modelValue:e(E).name,"onUpdate:modelValue":[i[0]||(i[0]=t=>e(E).name=t),e(T)],placeholder:e(s)("extensions.manage.search")},null,8,["modelValue","placeholder","onUpdate:modelValue"]),l(S,{modelValue:e(E).status,"onUpdate:modelValue":[i[1]||(i[1]=t=>e(E).status=t),e(T)],items:[{label:e(s)("extensions.manage.status.all"),value:void 0},{label:e(s)("extensions.manage.status.enabled"),value:e(p).ENABLED},{label:e(s)("extensions.manage.status.disabled"),value:e(p).DISABLED}],class:"block w-auto",placeholder:e(s)("extensions.manage.status.all")},null,8,["modelValue","items","placeholder","onUpdate:modelValue"])])])])]),!e(n).loading&&e(n).items.length===0?(r(),f("div",Ge,[o("div",He,[o("div",Ke,[o("h3",Qe,c(e(s)("extensions.manage.add")),1),o("div",{class:"text-primary hover:bg-primary-50 flex cursor-pointer items-center rounded-lg px-2 py-2 text-sm",onClick:N},[l(u,{name:"i-lucide-hard-drive-download",class:"mr-2 size-4"}),o("span",null,c(e(s)("extensions.manage.installApp")),1)]),o("div",{class:"text-primary hover:bg-primary-50 flex cursor-pointer items-center rounded-lg px-2 py-2 text-sm",onClick:U},[l(u,{name:"i-tabler-api-app",class:"mr-2 size-4"}),o("span",null,c(e(s)("extensions.manage.store")),1)]),o("div",{class:"text-primary hover:bg-primary-50 flex cursor-pointer items-center rounded-lg px-2 py-2 text-sm",onClick:i[2]||(i[2]=t=>L({},!1))},[l(u,{name:"i-lucide-square-terminal",class:"mr-2 size-4"}),o("span",null,c(e(s)("extensions.manage.developApp")),1)])])]),o("div",Je,[o("span",Ye,c(e(s)("extensions.manage.empty.description")),1)])])):(r(),f("div",Ze,[l(ce,{class:"h-full",shadow:!1},{default:h(()=>[l(re,{loading:e(n).loading,"has-more":e(Q),"loading-text":e(s)("extensions.manage.loadingText"),"no-more-text":e(n).page!==1?e(s)("extensions.manage.noMoreText"):" ",onLoadMore:J},{default:h(()=>[o("div",et,[o("div",tt,[o("div",at,[o("h3",st,c(e(s)("extensions.manage.add")),1),o("div",{class:"text-primary hover:bg-primary-50 flex cursor-pointer items-center rounded-lg px-2 py-2 text-sm",onClick:N},[l(u,{name:"i-lucide-hard-drive-download",class:"mr-2 size-4"}),o("span",null,c(e(s)("extensions.manage.installApp")),1)]),o("div",{class:"text-primary hover:bg-primary-50 dark:hover:bg-primary/15 flex cursor-pointer items-center rounded-lg px-2 py-2 text-sm",onClick:U},[l(u,{name:"i-tabler-api-app",class:"mr-2 size-4"}),o("span",null,c(e(s)("extensions.manage.store")),1)]),o("div",{class:"text-primary hover:bg-primary-50 dark:hover:bg-primary/15 flex cursor-pointer items-center rounded-lg px-2 py-2 text-sm",onClick:i[3]||(i[3]=t=>L({},!1))},[l(u,{name:"i-lucide-square-terminal",class:"mr-2 size-4"}),o("span",null,c(e(s)("extensions.manage.developApp")),1)])])]),(r(!0),f(P,null,O(e(n).items,t=>(r(),f("div",{key:t.id,class:"bg-background border-muted relative h-[170px] overflow-hidden rounded-[6px] border border-solid transition duration-150 ease-out hover:shadow-[0_6px_8px_0_rgba(28,31,35,6%)]"},[o("div",ot,[o("div",it,[o("div",nt,[o("div",lt,[l(z,{text:t.name},{default:h(()=>[o("span",rt,c(t.name),1)]),_:2},1032,["text"])]),o("span",ct,c(t.description||e(s)("extensions.manage.noDescription")),1),o("div",dt,[t.version?(r(),g(B,{key:0,color:"neutral",variant:"soft",label:`v${t.version}`},null,8,["label"])):_("",!0),t.isInstalled?(r(),g(B,{key:1,color:t.status===e(p).ENABLED?"success":"neutral",variant:"soft",label:t.status===e(p).ENABLED?e(s)("extensions.manage.enable"):e(s)("extensions.manage.disable")},null,8,["color","label"])):_("",!0),(r(!0),f(P,null,O(t.supportTerminal,d=>(r(),g(B,{color:d===e(v).WEB?"success":d===e(v).API?"info":"neutral",variant:"soft",label:K(d)},null,8,["color","label"]))),256))])]),o("div",mt,[l(V,{src:t.icon,alt:t.name,icon:"i-lucide-puzzle",ui:{root:`size-full rounded-md ${t.icon?"":"bg-primary"}`,icon:"size-7 text-white"}},null,8,["src","alt","ui"])])]),o("div",pt,[o("div",ut,[l(V,{color:"primary",size:"xs",src:t.author?.avatar,ui:{root:"rounded-full bg-primary size-5"}},{default:h(()=>[l(u,{name:"i-lucide-user",class:"size-3 text-white"})]),_:1},8,["src"]),o("div",gt,c(t.author.name||e(s)("extensions.manage.unknownAuthor")),1)]),o("div",_t,[t.isCompatible?_("",!0):(r(),f("div",ft,[l(u,{name:"i-lucide-circle-alert",class:"size-3.5 cursor-pointer"}),o("span",ht,c(a.$t("extensions.manage.incompatible")),1)])),t.type===e(F).APPLICATION&&t.isInstalled&&t.status===e(p).ENABLED&&t.isCompatible?(r(),g(z,{key:1,text:e(s)("extensions.manage.manage")},{default:h(()=>[l(A,{color:"primary",icon:"i-lucide-settings",variant:"soft",size:"sm",label:e(s)("extensions.manage.manage"),onClick:d=>Y(t)},null,8,["label","onClick"])]),_:2},1032,["text"])):_("",!0),t.type===e(F).APPLICATION&&t.isInstalled&&t.status===e(p).DISABLED&&t.isCompatible?(r(),g(z,{key:2,text:e(s)("extensions.manage.enable")},{default:h(()=>[l(A,{color:"primary",icon:"i-lucide-power",variant:"soft",size:"sm",label:e(s)("extensions.manage.enable"),onClick:d=>$(t)},null,8,["label","onClick"])]),_:2},1032,["text"])):_("",!0),!t.isInstalled&&t.isCompatible?(r(),g(A,{key:3,color:"primary",variant:"solid",icon:"i-lucide-download",size:"sm",loading:e(I)[t.identifier],label:a.$t("extensions.manage.install"),onClick:d=>Z(t)},null,8,["loading","label","onClick"])):_("",!0),t.hasUpdate?(r(),g(A,{key:4,color:"info",variant:"subtle",icon:"i-lucide-circle-fading-arrow-up",size:"sm",label:a.$t("extensions.manage.upgrade"),loading:e(k)[t.identifier],disabled:e(k)[t.identifier],onClick:d=>ee(t)},null,8,["label","loading","disabled","onClick"])):_("",!0),t.isInstalled?(r(),g(le,{key:5,items:[[{label:e(s)("extensions.manage.detail"),icon:"i-lucide-info",onSelect:()=>ie(t)},t.isLocal?void 0:{label:e(s)("extensions.manage.logs"),icon:"i-lucide-file-text",onSelect:()=>ne(t)},{label:e(s)("extensions.manage.featureConfig"),icon:"i-lucide-settings",onSelect:()=>oe(t)}].filter(d=>d!==void 0),[{label:t.status===e(p).ENABLED?e(s)("extensions.manage.disable"):e(s)("extensions.manage.enable"),icon:t.status===e(p).ENABLED?"i-lucide-power-off":"i-lucide-power",color:t.status===e(p).ENABLED?"warning":"success",disabled:!t.isCompatible,onSelect:()=>{t.status===e(p).ENABLED?se(t):$(t)}}],[t.isLocal?{label:e(s)("console-common.edit"),icon:"i-lucide-pen-line",onSelect:()=>L(t,!0)}:void 0,{label:e(s)("extensions.manage.uninstall.btn"),icon:"i-lucide-trash-2",color:"error",onSelect:()=>{e(ae)(t)}}].filter(d=>d!==void 0)],content:{align:"end",side:"bottom",sideOffset:4},ui:{content:"w-32",itemLeadingIcon:"size-4"}},{default:h(()=>[l(A,{icon:"i-lucide-ellipsis-vertical",color:"neutral",variant:"ghost",size:"sm"})]),_:1},8,["items"])):_("",!0)])])])]))),128))])]),_:1},8,["loading","has-more","loading-text","no-more-text"])]),_:1})]))])}}});export{Qt as default};
