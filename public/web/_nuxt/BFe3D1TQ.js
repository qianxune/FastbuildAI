import{_ as je}from"./CvI6s-qz.js";import _e from"./cd55qm53.js";import{d as Se,f as D,o as k,w as F,r as V,m as O,g as f,P as Ke,l as De,p as ee,Z as U,n as G,bw as Ae,aU as He,bx as Ue,bm as Ge,b7 as qe,aT as We,bn as ye,bG as Ye,bg as xe,bp as Qe,k as Je,t as T,c as N,y as j,bD as Xe,az as Ze,_ as de,C as _,F as oe,E as ue,bA as ie,A as te,z as Y,bH as et,c3 as tt,c4 as st,c5 as it,x as Q,B as X,G as nt,aY as at,i as rt,at as lt,aQ as ot,s as ne,cQ as ut,aN as ct,v as Ce,D as Ee,cR as dt}from"#entry";import{i as ht,L as ft,a as mt,b as gt,c as pt,d as bt,e as vt}from"./sTbVUDyT.js";import{_ as At}from"./B3rWqoNg.js";import{_ as yt}from"./Ghlq83yM.js";import{B as xt}from"./gu2_Ts15.js";import"./CtosDvS0.js";import"./CAQVAH0V.js";import"./DNSLGqNg.js";import"./BFo3vNrE.js";import"./DeCyaT7k.js";import"./D4e4FYoF.js";import"./Z7qkLoXK.js";import"./BstbYvQo.js";import"./CuVAPZQ8.js";import"./kRIii9yh.js";import"./CMKSl-Ng.js";import"./Deu6qIfg.js";import"./EK7Wbu3-.js";import"./DQMjdCEn.js";import"./OUYfsp1i.js";import"./CjE5iPSn.js";import"./D9UsdH-b.js";import"./MCK2d4XT.js";var Ct=Se({__name:"ListboxGroupLabel",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(s){const e=s,t=ht({id:""});return(a,i)=>(k(),D(f(Ke),O(e,{id:f(t).id}),{default:F(()=>[V(a.$slots,"default")]),_:3},16,["id"]))}}),Et=Ct;function K(s){return Array.isArray?Array.isArray(s):Te(s)==="[object Array]"}function kt(s){if(typeof s=="string")return s;let e=s+"";return e=="0"&&1/s==-1/0?"-0":e}function Bt(s){return s==null?"":kt(s)}function P(s){return typeof s=="string"}function we(s){return typeof s=="number"}function Mt(s){return s===!0||s===!1||Ft(s)&&Te(s)=="[object Boolean]"}function $e(s){return typeof s=="object"}function Ft(s){return $e(s)&&s!==null}function R(s){return s!=null}function ce(s){return!s.trim().length}function Te(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}const It="Incorrect 'index' type",Lt=s=>`Invalid value for key ${s}`,_t=s=>`Pattern length exceeds max of ${s}.`,St=s=>`Missing ${s} property in key`,Dt=s=>`Property 'weight' in key '${s}' must be a positive integer`,ke=Object.prototype.hasOwnProperty;class wt{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(a=>{let i=Re(a);this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(a=>{a.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Re(s){let e=null,t=null,a=null,i=1,n=null;if(P(s)||K(s))a=s,e=Be(s),t=he(s);else{if(!ke.call(s,"name"))throw new Error(St("name"));const r=s.name;if(a=r,ke.call(s,"weight")&&(i=s.weight,i<=0))throw new Error(Dt(r));e=Be(r),t=he(r),n=s.getFn}return{path:e,id:t,weight:i,src:a,getFn:n}}function Be(s){return K(s)?s:s.split(".")}function he(s){return K(s)?s.join("."):s}function $t(s,e){let t=[],a=!1;const i=(n,r,l)=>{if(R(n))if(!r[l])t.push(n);else{let c=r[l];const d=n[c];if(!R(d))return;if(l===r.length-1&&(P(d)||we(d)||Mt(d)))t.push(Bt(d));else if(K(d)){a=!0;for(let o=0,g=d.length;o<g;o+=1)i(d[o],r,l+1)}else r.length&&i(d,r,l+1)}};return i(s,P(e)?e.split("."):e,0),a?t:t[0]}const Tt={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Rt={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(s,e)=>s.score===e.score?s.idx<e.idx?-1:1:s.score<e.score?-1:1},Ot={location:0,threshold:.6,distance:100},Pt={useExtendedSearch:!1,getFn:$t,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var m={...Rt,...Tt,...Ot,...Pt};const zt=/[^ ]+/g;function Nt(s=1,e=3){const t=new Map,a=Math.pow(10,e);return{get(i){const n=i.match(zt).length;if(t.has(n))return t.get(n);const r=1/Math.pow(n,.5*s),l=parseFloat(Math.round(r*a)/a);return t.set(n,l),l},clear(){t.clear()}}}class ve{constructor({getFn:e=m.getFn,fieldNormWeight:t=m.fieldNormWeight}={}){this.norm=Nt(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,a)=>{this._keysMap[t.id]=a})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,P(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();P(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,a=this.size();t<a;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!R(e)||ce(e))return;let a={v:e,i:t,n:this.norm.get(e)};this.records.push(a)}_addObject(e,t){let a={i:t,$:{}};this.keys.forEach((i,n)=>{let r=i.getFn?i.getFn(e):this.getFn(e,i.path);if(R(r)){if(K(r)){let l=[];const c=[{nestedArrIndex:-1,value:r}];for(;c.length;){const{nestedArrIndex:d,value:o}=c.pop();if(R(o))if(P(o)&&!ce(o)){let g={v:o,i:d,n:this.norm.get(o)};l.push(g)}else K(o)&&o.forEach((g,h)=>{c.push({nestedArrIndex:h,value:g})})}a.$[n]=l}else if(P(r)&&!ce(r)){let l={v:r,n:this.norm.get(r)};a.$[n]=l}}}),this.records.push(a)}toJSON(){return{keys:this.keys,records:this.records}}}function Oe(s,e,{getFn:t=m.getFn,fieldNormWeight:a=m.fieldNormWeight}={}){const i=new ve({getFn:t,fieldNormWeight:a});return i.setKeys(s.map(Re)),i.setSources(e),i.create(),i}function Vt(s,{getFn:e=m.getFn,fieldNormWeight:t=m.fieldNormWeight}={}){const{keys:a,records:i}=s,n=new ve({getFn:e,fieldNormWeight:t});return n.setKeys(a),n.setIndexRecords(i),n}function ae(s,{errors:e=0,currentLocation:t=0,expectedLocation:a=0,distance:i=m.distance,ignoreLocation:n=m.ignoreLocation}={}){const r=e/s.length;if(n)return r;const l=Math.abs(a-t);return i?r+l/i:l?1:r}function jt(s=[],e=m.minMatchCharLength){let t=[],a=-1,i=-1,n=0;for(let r=s.length;n<r;n+=1){let l=s[n];l&&a===-1?a=n:!l&&a!==-1&&(i=n-1,i-a+1>=e&&t.push([a,i]),a=-1)}return s[n-1]&&n-a>=e&&t.push([a,n-1]),t}const W=32;function Kt(s,e,t,{location:a=m.location,distance:i=m.distance,threshold:n=m.threshold,findAllMatches:r=m.findAllMatches,minMatchCharLength:l=m.minMatchCharLength,includeMatches:c=m.includeMatches,ignoreLocation:d=m.ignoreLocation}={}){if(e.length>W)throw new Error(_t(W));const o=e.length,g=s.length,h=Math.max(0,Math.min(a,g));let A=n,x=h;const I=l>1||c,w=I?Array(g):[];let $;for(;($=s.indexOf(e,x))>-1;){let S=ae(e,{currentLocation:$,expectedLocation:h,distance:i,ignoreLocation:d});if(A=Math.min(S,A),x=$+o,I){let p=0;for(;p<o;)w[$+p]=1,p+=1}}x=-1;let E=[],v=1,y=o+g;const J=1<<o-1;for(let S=0;S<o;S+=1){let p=0,C=y;for(;p<C;)ae(e,{errors:S,currentLocation:h+C,expectedLocation:h,distance:i,ignoreLocation:d})<=A?p=C:y=C,C=Math.floor((y-p)/2+p);y=C;let b=Math.max(1,h-C+1),u=r?g:Math.min(h+C,g)+o,B=Array(u+2);B[u+1]=(1<<S)-1;for(let L=u;L>=b;L-=1){let H=L-1,se=t[s.charAt(H)];if(I&&(w[H]=+!!se),B[L]=(B[L+1]<<1|1)&se,S&&(B[L]|=(E[L+1]|E[L])<<1|1|E[L+1]),B[L]&J&&(v=ae(e,{errors:S,currentLocation:H,expectedLocation:h,distance:i,ignoreLocation:d}),v<=A)){if(A=v,x=H,x<=h)break;b=Math.max(1,2*h-x)}}if(ae(e,{errors:S+1,currentLocation:h,expectedLocation:h,distance:i,ignoreLocation:d})>A)break;E=B}const z={isMatch:x>=0,score:Math.max(.001,v)};if(I){const S=jt(w,l);S.length?c&&(z.indices=S):z.isMatch=!1}return z}function Ht(s){let e={};for(let t=0,a=s.length;t<a;t+=1){const i=s.charAt(t);e[i]=(e[i]||0)|1<<a-t-1}return e}const re=String.prototype.normalize?(s=>s.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(s=>s);class Pe{constructor(e,{location:t=m.location,threshold:a=m.threshold,distance:i=m.distance,includeMatches:n=m.includeMatches,findAllMatches:r=m.findAllMatches,minMatchCharLength:l=m.minMatchCharLength,isCaseSensitive:c=m.isCaseSensitive,ignoreDiacritics:d=m.ignoreDiacritics,ignoreLocation:o=m.ignoreLocation}={}){if(this.options={location:t,threshold:a,distance:i,includeMatches:n,findAllMatches:r,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:o},e=c?e:e.toLowerCase(),e=d?re(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const g=(A,x)=>{this.chunks.push({pattern:A,alphabet:Ht(A),startIndex:x})},h=this.pattern.length;if(h>W){let A=0;const x=h%W,I=h-x;for(;A<I;)g(this.pattern.substr(A,W),A),A+=W;if(x){const w=h-W;g(this.pattern.substr(w),w)}}else g(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:a,includeMatches:i}=this.options;if(e=t?e:e.toLowerCase(),e=a?re(e):e,this.pattern===e){let I={isMatch:!0,score:0};return i&&(I.indices=[[0,e.length-1]]),I}const{location:n,distance:r,threshold:l,findAllMatches:c,minMatchCharLength:d,ignoreLocation:o}=this.options;let g=[],h=0,A=!1;this.chunks.forEach(({pattern:I,alphabet:w,startIndex:$})=>{const{isMatch:E,score:v,indices:y}=Kt(e,I,w,{location:n+$,distance:r,threshold:l,findAllMatches:c,minMatchCharLength:d,includeMatches:i,ignoreLocation:o});E&&(A=!0),h+=v,E&&y&&(g=[...g,...y])});let x={isMatch:A,score:A?h/this.chunks.length:1};return A&&i&&(x.indices=g),x}}class q{constructor(e){this.pattern=e}static isMultiMatch(e){return Me(e,this.multiRegex)}static isSingleMatch(e){return Me(e,this.singleRegex)}search(){}}function Me(s,e){const t=s.match(e);return t?t[1]:null}class Ut extends q{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Gt extends q{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const a=e.indexOf(this.pattern)===-1;return{isMatch:a,score:a?0:1,indices:[0,e.length-1]}}}class qt extends q{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Wt extends q{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Yt extends q{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Qt extends q{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class ze extends q{constructor(e,{location:t=m.location,threshold:a=m.threshold,distance:i=m.distance,includeMatches:n=m.includeMatches,findAllMatches:r=m.findAllMatches,minMatchCharLength:l=m.minMatchCharLength,isCaseSensitive:c=m.isCaseSensitive,ignoreDiacritics:d=m.ignoreDiacritics,ignoreLocation:o=m.ignoreLocation}={}){super(e),this._bitapSearch=new Pe(e,{location:t,threshold:a,distance:i,includeMatches:n,findAllMatches:r,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:o})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Ne extends q{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,a;const i=[],n=this.pattern.length;for(;(a=e.indexOf(this.pattern,t))>-1;)t=a+n,i.push([a,t-1]);const r=!!i.length;return{isMatch:r,score:r?0:1,indices:i}}}const fe=[Ut,Ne,qt,Wt,Qt,Yt,Gt,ze],Fe=fe.length,Jt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Xt="|";function Zt(s,e={}){return s.split(Xt).map(t=>{let a=t.trim().split(Jt).filter(n=>n&&!!n.trim()),i=[];for(let n=0,r=a.length;n<r;n+=1){const l=a[n];let c=!1,d=-1;for(;!c&&++d<Fe;){const o=fe[d];let g=o.isMultiMatch(l);g&&(i.push(new o(g,e)),c=!0)}if(!c)for(d=-1;++d<Fe;){const o=fe[d];let g=o.isSingleMatch(l);if(g){i.push(new o(g,e));break}}}return i})}const es=new Set([ze.type,Ne.type]);class ts{constructor(e,{isCaseSensitive:t=m.isCaseSensitive,ignoreDiacritics:a=m.ignoreDiacritics,includeMatches:i=m.includeMatches,minMatchCharLength:n=m.minMatchCharLength,ignoreLocation:r=m.ignoreLocation,findAllMatches:l=m.findAllMatches,location:c=m.location,threshold:d=m.threshold,distance:o=m.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:a,includeMatches:i,minMatchCharLength:n,findAllMatches:l,ignoreLocation:r,location:c,threshold:d,distance:o},e=t?e:e.toLowerCase(),e=a?re(e):e,this.pattern=e,this.query=Zt(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:a,isCaseSensitive:i,ignoreDiacritics:n}=this.options;e=i?e:e.toLowerCase(),e=n?re(e):e;let r=0,l=[],c=0;for(let d=0,o=t.length;d<o;d+=1){const g=t[d];l.length=0,r=0;for(let h=0,A=g.length;h<A;h+=1){const x=g[h],{isMatch:I,indices:w,score:$}=x.search(e);if(I){if(r+=1,c+=$,a){const E=x.constructor.type;es.has(E)?l=[...l,...w]:l.push(w)}}else{c=0,r=0,l.length=0;break}}if(r){let h={isMatch:!0,score:c/r};return a&&(h.indices=l),h}}return{isMatch:!1,score:1}}}const me=[];function ss(...s){me.push(...s)}function ge(s,e){for(let t=0,a=me.length;t<a;t+=1){let i=me[t];if(i.condition(s,e))return new i(s,e)}return new Pe(s,e)}const le={AND:"$and",OR:"$or"},pe={PATH:"$path",PATTERN:"$val"},be=s=>!!(s[le.AND]||s[le.OR]),is=s=>!!s[pe.PATH],ns=s=>!K(s)&&$e(s)&&!be(s),Ie=s=>({[le.AND]:Object.keys(s).map(e=>({[e]:s[e]}))});function Ve(s,e,{auto:t=!0}={}){const a=i=>{let n=Object.keys(i);const r=is(i);if(!r&&n.length>1&&!be(i))return a(Ie(i));if(ns(i)){const c=r?i[pe.PATH]:n[0],d=r?i[pe.PATTERN]:i[c];if(!P(d))throw new Error(Lt(c));const o={keyId:he(c),pattern:d};return t&&(o.searcher=ge(d,e)),o}let l={children:[],operator:n[0]};return n.forEach(c=>{const d=i[c];K(d)&&d.forEach(o=>{l.children.push(a(o))})}),l};return be(s)||(s=Ie(s)),a(s)}function as(s,{ignoreFieldNorm:e=m.ignoreFieldNorm}){s.forEach(t=>{let a=1;t.matches.forEach(({key:i,norm:n,score:r})=>{const l=i?i.weight:null;a*=Math.pow(r===0&&l?Number.EPSILON:r,(l||1)*(e?1:n))}),t.score=a})}function rs(s,e){const t=s.matches;e.matches=[],R(t)&&t.forEach(a=>{if(!R(a.indices)||!a.indices.length)return;const{indices:i,value:n}=a;let r={indices:i,value:n};a.key&&(r.key=a.key.src),a.idx>-1&&(r.refIndex=a.idx),e.matches.push(r)})}function ls(s,e){e.score=s.score}function os(s,e,{includeMatches:t=m.includeMatches,includeScore:a=m.includeScore}={}){const i=[];return t&&i.push(rs),a&&i.push(ls),s.map(n=>{const{idx:r}=n,l={item:e[r],refIndex:r};return i.length&&i.forEach(c=>{c(n,l)}),l})}class Z{constructor(e,t={},a){this.options={...m,...t},this.options.useExtendedSearch,this._keyStore=new wt(this.options.keys),this.setCollection(e,a)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof ve))throw new Error(It);this._myIndex=t||Oe(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){R(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let a=0,i=this._docs.length;a<i;a+=1){const n=this._docs[a];e(n,a)&&(this.removeAt(a),a-=1,i-=1,t.push(n))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:a,includeScore:i,shouldSort:n,sortFn:r,ignoreFieldNorm:l}=this.options;let c=P(e)?P(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return as(c,{ignoreFieldNorm:l}),n&&c.sort(r),we(t)&&t>-1&&(c=c.slice(0,t)),os(c,this._docs,{includeMatches:a,includeScore:i})}_searchStringList(e){const t=ge(e,this.options),{records:a}=this._myIndex,i=[];return a.forEach(({v:n,i:r,n:l})=>{if(!R(n))return;const{isMatch:c,score:d,indices:o}=t.searchIn(n);c&&i.push({item:n,idx:r,matches:[{score:d,value:n,norm:l,indices:o}]})}),i}_searchLogical(e){const t=Ve(e,this.options),a=(l,c,d)=>{if(!l.children){const{keyId:g,searcher:h}=l,A=this._findMatches({key:this._keyStore.get(g),value:this._myIndex.getValueForItemAtKeyId(c,g),searcher:h});return A&&A.length?[{idx:d,item:c,matches:A}]:[]}const o=[];for(let g=0,h=l.children.length;g<h;g+=1){const A=l.children[g],x=a(A,c,d);if(x.length)o.push(...x);else if(l.operator===le.AND)return[]}return o},i=this._myIndex.records,n={},r=[];return i.forEach(({$:l,i:c})=>{if(R(l)){let d=a(t,l,c);d.length&&(n[c]||(n[c]={idx:c,item:l,matches:[]},r.push(n[c])),d.forEach(({matches:o})=>{n[c].matches.push(...o)}))}}),r}_searchObjectList(e){const t=ge(e,this.options),{keys:a,records:i}=this._myIndex,n=[];return i.forEach(({$:r,i:l})=>{if(!R(r))return;let c=[];a.forEach((d,o)=>{c.push(...this._findMatches({key:d,value:r[o],searcher:t}))}),c.length&&n.push({idx:l,item:r,matches:c})}),n}_findMatches({key:e,value:t,searcher:a}){if(!R(t))return[];let i=[];if(K(t))t.forEach(({v:n,i:r,n:l})=>{if(!R(n))return;const{isMatch:c,score:d,indices:o}=a.searchIn(n);c&&i.push({score:d,key:e,value:n,idx:r,norm:l,indices:o})});else{const{v:n,n:r}=t,{isMatch:l,score:c,indices:d}=a.searchIn(n);l&&i.push({score:c,key:e,value:n,norm:r,indices:d})}return i}}Z.version="7.1.0";Z.createIndex=Oe;Z.parseIndex=Vt;Z.config=m;Z.parseQuery=Ve;ss(ts);function us(s,e,t){const a=()=>{var r,l;return new Z((r=U(e))!=null?r:[],(l=U(t))==null?void 0:l.fuseOptions)},i=De(a());ee(()=>{var r;return(r=U(t))==null?void 0:r.fuseOptions},()=>{i.value=a()},{deep:!0}),ee(()=>U(e),r=>{i.value.setCollection(r)},{deep:!0});const n=G(()=>{const r=U(t);if(r?.matchAllWhenSearchEmpty&&!U(s))return U(e).map((c,d)=>({item:c,refIndex:d}));const l=r?.resultLimit;return i.value.search(U(s),l?{limit:l}:void 0)});return{fuse:i,results:n}}function cs(s,e){let t="",a=0,i=!1;for(let n=s.length-1;n>=0;n--){if(s[n]===">")i=!0;else if(s[n]==="<"){i=!1,t=s[n]+t;continue}if(i||a++,a<=e)t=s[n]+t;else{t="..."+t;break}}return t}function Le(s,e,t,a){function i(n,r=[]){n=n||"";let l="",c=0;r.forEach(o=>{if(o.length===2&&o[0]===o[1])return;const g=o[1]+1,h=g-o[0]>=e.length;l+=[n.substring(c,o[0]),h&&"<mark>",n.substring(o[0],g),h&&"</mark>"].filter(Boolean).join(""),c=g}),l+=n.substring(c);const d=l.indexOf("<mark>");return d!==-1&&(l=cs(l,l.length-d)),l}if(s.matches?.length){for(const n of s.matches)if(!(t&&n.key!==t)&&!a?.includes(n.key))return i(n.value,n.indices)}}const ds={slots:{root:"flex flex-col min-h-0 min-w-0 divide-y divide-default",input:"[&>input]:h-12",close:"",back:"p-0",content:"relative overflow-hidden flex flex-col",footer:"p-1",viewport:"relative divide-y divide-default scroll-py-1 overflow-y-auto flex-1 focus:outline-none",group:"p-1 isolate",empty:"py-6 text-center text-sm text-muted",label:"p-1.5 text-xs font-semibold text-highlighted",item:"group relative w-full flex items-center gap-1.5 p-1.5 text-sm select-none outline-none before:absolute before:z-[-1] before:inset-px before:rounded-md data-disabled:cursor-not-allowed data-disabled:opacity-75",itemLeadingIcon:"shrink-0 size-5",itemLeadingAvatar:"shrink-0",itemLeadingAvatarSize:"2xs",itemLeadingChip:"shrink-0 size-5",itemLeadingChipSize:"md",itemTrailing:"ms-auto inline-flex gap-1.5 items-center",itemTrailingIcon:"shrink-0 size-5",itemTrailingHighlightedIcon:"shrink-0 size-5 text-dimmed hidden group-data-highlighted:inline-flex",itemTrailingKbds:"hidden lg:inline-flex items-center shrink-0 gap-0.5",itemTrailingKbdsSize:"md",itemLabel:"truncate space-x-1 text-dimmed",itemLabelBase:"text-highlighted [&>mark]:text-inverted [&>mark]:bg-primary",itemLabelPrefix:"text-default",itemLabelSuffix:"text-dimmed [&>mark]:text-inverted [&>mark]:bg-primary"},variants:{active:{true:{item:"text-highlighted before:bg-elevated",itemLeadingIcon:"text-default"},false:{item:["text-default data-highlighted:not-data-disabled:text-highlighted data-highlighted:not-data-disabled:before:bg-elevated/50","transition-colors before:transition-colors"],itemLeadingIcon:["text-dimmed group-data-highlighted:not-group-data-disabled:text-default","transition-colors"]}},loading:{true:{itemLeadingIcon:"animate-spin"}}}},hs=["innerHTML"],fs=["innerHTML"],ms={__name:"CommandPalette",props:Ae({as:{type:null,required:!1},icon:{type:String,required:!1},selectedIcon:{type:String,required:!1},trailingIcon:{type:String,required:!1},placeholder:{type:String,required:!1},autofocus:{type:Boolean,required:!1,default:!0},close:{type:[Boolean,Object],required:!1},closeIcon:{type:String,required:!1},back:{type:[Boolean,Object],required:!1,default:!0},backIcon:{type:String,required:!1},groups:{type:Array,required:!1},fuse:{type:Object,required:!1},labelKey:{type:String,required:!1,default:"label"},class:{type:null,required:!1},ui:{type:null,required:!1},multiple:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},modelValue:{type:null,required:!1,default:""},defaultValue:{type:null,required:!1},highlightOnHover:{type:Boolean,required:!1,default:!0},selectionBehavior:{type:String,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1}},{searchTerm:{type:String,default:""},searchTermModifiers:{}}),emits:Ae(["update:modelValue","highlight","entryFocus","leave","update:open"],["update:searchTerm"]),setup(s,{emit:e}){const t=s,a=e,i=He(),n=Ue(s,"searchTerm",{type:String,default:""}),{t:r}=Ge(),l=qe(),c=We(ye(t,"as","disabled","multiple","modelValue","defaultValue","highlightOnHover","selectionBehavior"),a),d=Ye(ye(t,"loading","loadingIcon")),o=G(()=>xe({extend:xe(ds),...l.ui?.commandPalette||{}})()),g=G(()=>Qe({},t.fuse,{fuseOptions:{ignoreLocation:!0,threshold:.1,keys:[t.labelKey,"suffix"]},resultLimit:12,matchAllWhenSearchEmpty:!0})),h=De([]),A=G(()=>h.value[h.value.length-1]?.placeholder||t.placeholder||r("commandPalette.placeholder")),x=G(()=>h.value?.length?[h.value[h.value.length-1]]:t.groups),I=G(()=>x.value?.filter(p=>p.id?!p.ignoreFilter:(console.warn("[@nuxt/ui] CommandPalette group is missing an `id` property"),!1))?.flatMap(p=>p.items?.map(C=>({...C,group:p.id}))||[])||[]),{results:w}=us(n,I,g);function $(p,C){return p?.postFilter&&typeof p.postFilter=="function"&&(C=p.postFilter(n.value,C)),{...p,items:C.slice(0,g.value.resultLimit).map(b=>({...b,labelHtml:Le(b,n.value,t.labelKey),suffixHtml:Le(b,n.value,void 0,[t.labelKey])}))}}const E=G(()=>{const p=w.value.reduce((u,B)=>{const{item:M,matches:L}=B;return M.group&&(u[M.group]||=[],u[M.group]?.push({...M,matches:L})),u},{}),C=Object.entries(p).map(([u,B])=>{const M=x.value?.find(L=>L.id===u);if(M)return $(M,B)}).filter(u=>!!u);return(x.value?.map((u,B)=>({...u,index:B}))?.filter(u=>u.ignoreFilter&&u.items?.length)?.map(u=>({...$(u,u.items||[]),index:u.index}))||[]).reduce((u,B)=>(u.splice(B.index,0,B),u),[...C])}),v=Je("listboxRootRef");function y(p){p.children?.length&&(h.value.push({id:`history-${h.value.length}`,label:p.label,slot:p.slot,placeholder:p.placeholder,items:p.children}),n.value="",v.value?.highlightFirstItem())}function J(){h.value.length&&(h.value.pop(),n.value="",v.value?.highlightFirstItem())}function z(){n.value||J()}function S(p,C){C.children?.length?(p.preventDefault(),y(C)):C.onSelect?.(p)}return(p,C)=>(k(),D(f(vt),O(f(c),{ref_key:"listboxRootRef",ref:v,class:o.value.root({class:[t.ui?.root,t.class]})}),{default:F(()=>[T(f(ft),{modelValue:n.value,"onUpdate:modelValue":C[1]||(C[1]=b=>n.value=b),"as-child":""},{default:F(()=>[T(_e,O({placeholder:A.value,variant:"none",autofocus:s.autofocus},f(d),{icon:s.icon||f(l).ui.icons.search,class:o.value.input({class:t.ui?.input}),onKeydown:Xe(z,["backspace"])}),Ze({_:2},[h.value?.length&&(s.back||i.back)?{name:"leading",fn:F(()=>[V(p.$slots,"back",{ui:o.value},()=>[T(de,O({icon:s.backIcon||f(l).ui.icons.arrowLeft,color:"neutral",variant:"link","aria-label":f(r)("commandPalette.back")},typeof s.back=="object"?s.back:{},{class:o.value.back({class:t.ui?.back}),onClick:J}),null,16,["icon","aria-label","class"])])]),key:"0"}:void 0,s.close||i.close?{name:"trailing",fn:F(()=>[V(p.$slots,"close",{ui:o.value},()=>[s.close?(k(),D(de,O({key:0,icon:s.closeIcon||f(l).ui.icons.close,color:"neutral",variant:"ghost","aria-label":f(r)("commandPalette.close")},typeof s.close=="object"?s.close:{},{class:o.value.close({class:t.ui?.close}),onClick:C[0]||(C[0]=b=>a("update:open",!1))}),null,16,["icon","aria-label","class"])):j("",!0)])]),key:"1"}:void 0]),1040,["placeholder","autofocus","icon","class"])]),_:3},8,["modelValue"]),T(f(mt),{class:_(o.value.content({class:t.ui?.content}))},{default:F(()=>[E.value?.length?(k(),N("div",{key:0,role:"presentation",class:_(o.value.viewport({class:t.ui?.viewport}))},[(k(!0),N(oe,null,ue(E.value,b=>(k(),D(f(gt),{key:`group-${b.id}`,class:_(o.value.group({class:t.ui?.group}))},{default:F(()=>[f(ie)(b,t.labelKey)?(k(),D(f(Et),{key:0,class:_(o.value.label({class:t.ui?.label}))},{default:F(()=>[te(Y(f(ie)(b,t.labelKey)),1)]),_:2},1032,["class"])):j("",!0),(k(!0),N(oe,null,ue(b.items,(u,B)=>(k(),D(f(pt),{key:`group-${b.id}-${B}`,value:f(et)(u,["matches","group","onSelect","labelHtml","suffixHtml","children"]),disabled:u.disabled,"as-child":"",onSelect:M=>S(M,u)},{default:F(()=>[T(tt,O({ref_for:!0},f(st)(u),{custom:""}),{default:F(({active:M,...L})=>[T(it,O({ref_for:!0},L,{class:o.value.item({class:[t.ui?.item,u.ui?.item,u.class],active:M||u.active})}),{default:F(()=>[V(p.$slots,u.slot||b.slot||"item",{item:u,index:B},()=>[V(p.$slots,u.slot?`${u.slot}-leading`:b.slot?`${b.slot}-leading`:"item-leading",{item:u,index:B},()=>[u.loading?(k(),D(X,{key:0,name:s.loadingIcon||f(l).ui.icons.loading,class:_(o.value.itemLeadingIcon({class:[t.ui?.itemLeadingIcon,u.ui?.itemLeadingIcon],loading:!0}))},null,8,["name","class"])):u.icon?(k(),D(X,{key:1,name:u.icon,class:_(o.value.itemLeadingIcon({class:[t.ui?.itemLeadingIcon,u.ui?.itemLeadingIcon],active:M||u.active}))},null,8,["name","class"])):u.avatar?(k(),D(nt,O({key:2,size:u.ui?.itemLeadingAvatarSize||t.ui?.itemLeadingAvatarSize||o.value.itemLeadingAvatarSize()},{ref_for:!0},u.avatar,{class:o.value.itemLeadingAvatar({class:[t.ui?.itemLeadingAvatar,u.ui?.itemLeadingAvatar],active:M||u.active})}),null,16,["size","class"])):u.chip?(k(),D(at,O({key:3,size:u.ui?.itemLeadingChipSize||t.ui?.itemLeadingChipSize||o.value.itemLeadingChipSize(),inset:"",standalone:""},{ref_for:!0},u.chip,{class:o.value.itemLeadingChip({class:[t.ui?.itemLeadingChip,u.ui?.itemLeadingChip],active:M||u.active})}),null,16,["size","class"])):j("",!0)]),u.labelHtml||f(ie)(u,t.labelKey)||i[u.slot?`${u.slot}-label`:b.slot?`${b.slot}-label`:"item-label"]?(k(),N("span",{key:0,class:_(o.value.itemLabel({class:[t.ui?.itemLabel,u.ui?.itemLabel],active:M||u.active}))},[V(p.$slots,u.slot?`${u.slot}-label`:b.slot?`${b.slot}-label`:"item-label",{item:u,index:B},()=>[u.prefix?(k(),N("span",{key:0,class:_(o.value.itemLabelPrefix({class:[t.ui?.itemLabelPrefix,u.ui?.itemLabelPrefix]}))},Y(u.prefix),3)):j("",!0),Q("span",{class:_(o.value.itemLabelBase({class:[t.ui?.itemLabelBase,u.ui?.itemLabelBase],active:M||u.active})),innerHTML:u.labelHtml||f(ie)(u,t.labelKey)},null,10,hs),Q("span",{class:_(o.value.itemLabelSuffix({class:[t.ui?.itemLabelSuffix,u.ui?.itemLabelSuffix],active:M||u.active})),innerHTML:u.suffixHtml||u.suffix},null,10,fs)])],2)):j("",!0),Q("span",{class:_(o.value.itemTrailing({class:[t.ui?.itemTrailing,u.ui?.itemTrailing]}))},[V(p.$slots,u.slot?`${u.slot}-trailing`:b.slot?`${b.slot}-trailing`:"item-trailing",{item:u,index:B},()=>[u.children&&u.children.length>0?(k(),D(X,{key:0,name:s.trailingIcon||f(l).ui.icons.chevronRight,class:_(o.value.itemTrailingIcon({class:[t.ui?.itemTrailingIcon,u.ui?.itemTrailingIcon]}))},null,8,["name","class"])):u.kbds?.length?(k(),N("span",{key:1,class:_(o.value.itemTrailingKbds({class:[t.ui?.itemTrailingKbds,u.ui?.itemTrailingKbds]}))},[(k(!0),N(oe,null,ue(u.kbds,(H,se)=>(k(),D(At,O({key:se,size:u.ui?.itemTrailingKbdsSize||t.ui?.itemTrailingKbdsSize||o.value.itemTrailingKbdsSize()},{ref_for:!0},typeof H=="string"?{value:H}:H),null,16,["size"]))),128))],2)):b.highlightedIcon?(k(),D(X,{key:2,name:b.highlightedIcon,class:_(o.value.itemTrailingHighlightedIcon({class:[t.ui?.itemTrailingHighlightedIcon,u.ui?.itemTrailingHighlightedIcon]}))},null,8,["name","class"])):j("",!0)]),u.children?.length?j("",!0):(k(),D(f(bt),{key:0,"as-child":""},{default:F(()=>[T(X,{name:s.selectedIcon||f(l).ui.icons.check,class:_(o.value.itemTrailingIcon({class:[t.ui?.itemTrailingIcon,u.ui?.itemTrailingIcon]}))},null,8,["name","class"])]),_:2},1024))],2)])]),_:2},1040,["class"])]),_:2},1040)]),_:2},1032,["value","disabled","onSelect"]))),128))]),_:2},1032,["class"]))),128))],2)):(k(),N("div",{key:1,class:_(o.value.empty({class:t.ui?.empty}))},[V(p.$slots,"empty",{searchTerm:n.value},()=>[te(Y(n.value?f(r)("commandPalette.noMatch",{searchTerm:n.value}):f(r)("commandPalette.noData")),1)])],2))]),_:3},8,["class"]),i.footer?(k(),N("div",{key:0,class:_(o.value.footer({class:t.ui?.footer}))},[V(p.$slots,"footer",{ui:o.value})],2)):j("",!0)]),_:3},16,["class"]))}},gs={class:"flex items-center gap-2"},ps={class:"flex h-full min-h-36 flex-col items-center justify-center gap-2"},bs={class:"text-muted-foreground text-sm"},vs={class:"mt-6 flex justify-end gap-2"},Hs=Se({__name:"add",props:{modelValue:{type:Boolean},datasetId:{}},emits:["update:modelValue","close"],setup(s,{emit:e}){const t=s,a=e,{t:i}=rt(),n=lt(),r=ot({note:""}),l=ne({}),c=ne([]),d=ne([]),o=ne(""),g=ut(o,200),h=[{label:i("ai-datasets.backend.members.role.manager"),value:"manager"},{label:i("ai-datasets.backend.members.role.editor"),value:"editor"},{label:i("ai-datasets.backend.members.role.viewer"),value:"viewer"}],A=async E=>{E.trim()||(c.value=[]);try{const v=await dt({keyword:E.trim(),datasetId:t.datasetId,limit:20});c.value=v.map(y=>({id:y.id,label:y.nickname||y.username,role:"viewer",suffix:y.username,avatar:{src:y.avatar||"",alt:y.username}}))}catch{c.value=[]}},x=G(()=>[{id:"users",label:o.value?`${i("ai-datasets.backend.members.addModal.userMatch")} "${o.value}"...`:i("ai-datasets.backend.members.addModal.user"),items:c.value,ignoreFilter:!0}]),I=()=>{d.value=[],l.value={},r.note="",c.value=[],o.value=""},{lockFn:w,isLock:$}=ct(async()=>{try{if(d.value.length===0){n.error(i("ai-datasets.backend.members.addModal.selectUserError"));return}const v=[...new Set(d.value.map(y=>y.id))].map(y=>({userId:y,role:l.value[y]||"viewer",note:r.note||void 0}));await xt({datasetId:t.datasetId,members:v}),n.success(i("ai-datasets.backend.members.addModal.addSuccess",{count:d.value.length})),I(),a("close",!0)}catch(E){console.error(i("ai-datasets.backend.members.addModal.addMemberFailedLog"),E)}});return ee(()=>t.modelValue,E=>{E&&A("")},{immediate:!0}),ee(()=>g.value,E=>{A(E)},{immediate:!1}),ee(d,E=>{const v=E.map(y=>y.id);v.forEach(y=>{l.value[y]||(l.value[y]="viewer")}),Object.keys(l.value).forEach(y=>{v.includes(y)||delete l.value[y]})},{deep:!0}),(E,v)=>{const y=je,J=_e,z=de,S=X,p=ms,C=yt;return k(),D(C,{title:f(i)("ai-datasets.backend.members.addModal.title"),description:f(i)("ai-datasets.backend.members.addModal.description"),ui:{content:"max-w-xl"},onClose:v[6]||(v[6]=b=>a("close"))},{default:F(()=>[T(p,{"search-term":f(o),"onUpdate:searchTerm":v[3]||(v[3]=b=>Ee(o)?o.value=b:null),modelValue:f(d),"onUpdate:modelValue":v[4]||(v[4]=b=>Ee(d)?d.value=b:null),groups:f(x),class:"min-h-72 pt-4",multiple:!0,ui:{itemTrailingIcon:"px-6 text-green-500"},"empty-state":f(i)("ai-datasets.backend.members.addModal.emptyState"),placeholder:f(i)("ai-datasets.backend.members.addModal.searchPlaceholder")},{"item-trailing":F(({item:b})=>[Q("div",gs,[T(y,{modelValue:f(l)[b.id],"onUpdate:modelValue":u=>f(l)[b.id]=u,items:h,"label-key":"label","value-key":"value",placeholder:f(i)("ai-datasets.backend.members.role.viewer"),onClick:v[0]||(v[0]=Ce(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","placeholder"]),T(J,{modelValue:f(r).note,"onUpdate:modelValue":v[1]||(v[1]=u=>f(r).note=u),placeholder:f(i)("ai-datasets.backend.members.addModal.noteInputPlaceholder"),onClick:v[2]||(v[2]=Ce(()=>{},["stop"]))},null,8,["modelValue","placeholder"]),f(d).some(u=>u.id===b.id)?j("",!0):(k(),D(z,{key:0,color:"primary",size:"sm",class:"flex-none"},{default:F(()=>[te(Y(f(i)("ai-datasets.backend.members.addModal.addButton")),1)]),_:1}))])]),empty:F(()=>[Q("div",ps,[T(S,{name:"i-lucide-users",class:"text-muted-foreground text-2xl"}),Q("div",bs,Y(f(i)("ai-datasets.backend.members.addModal.searchPlaceholder")),1)])]),_:1},8,["search-term","modelValue","groups","empty-state","placeholder"]),Q("div",vs,[T(z,{color:"neutral",variant:"soft",size:"lg",onClick:v[5]||(v[5]=b=>a("close"))},{default:F(()=>[te(Y(f(i)("console-common.cancel")),1)]),_:1}),T(z,{color:"primary",size:"lg",loading:f($),disabled:f(d).length===0,onClick:f(w)},{default:F(()=>[te(Y(f(i)("console-common.add")),1)]),_:1},8,["loading","disabled","onClick"])])]),_:1},8,["title","description"])}}});export{Hs as default};
