import{d as N,n as g,aM as z,i as V,at as O,aQ as j,aN as D,q as A,f as b,o as r,w as c,c as i,g as e,t as d,B as G,x as o,y as _,G as R,z as a,A as m,_ as q,F as J,E as Q}from"#entry";import{_ as H}from"./DbqqhwXM.js";import{_ as K}from"./o4ws_w_T.js";import{_ as P}from"./Ghlq83yM.js";import{i as W,d as X,h as Y}from"./Dgxt_juz.js";import"./DNSLGqNg.js";import"./psimjGaX.js";import"./CuVAPZQ8.js";import"./B3rWqoNg.js";import"./EK7Wbu3-.js";import"./DQMjdCEn.js";import"./OUYfsp1i.js";import"./BFo3vNrE.js";import"./Z7qkLoXK.js";import"./CjE5iPSn.js";import"./D9UsdH-b.js";import"./MCK2d4XT.js";const Z={key:0,class:"flex items-center justify-center",style:{height:"400px"}},ee={key:1,class:"max-h-180"},te={class:"flex justify-between pb-4"},oe={class:"flex items-center gap-4"},ae={class:"text-secondary-foreground flex items-center text-base font-semibold"},se={class:"line-clamp-1"},ne={class:"bg-muted rounded-lg p-4 pb-4"},re={class:"text-muted-foreground text-xs"},ce={class:"grid grid-cols-1 gap-x-6 gap-y-4 py-4 pb-4 md:grid-cols-2"},ie={key:0},de={class:"text-muted-foreground text-sm"},me={class:"max-w-100"},le={class:"text-secondary-foreground mt-1 truncate font-medium"},ue={key:1},pe={class:"text-muted-foreground text-sm"},fe={class:"text-secondary-foreground mt-1 font-medium"},_e={class:"text-muted-foreground text-sm"},ye={class:"text-secondary-foreground mt-1 font-medium"},xe={class:"text-muted-foreground text-sm"},ve={class:"text-secondary-foreground mt-1 font-medium"},he={class:"text-muted-foreground text-sm"},ge={class:"text-secondary-foreground mt-1 font-medium"},De={class:"text-muted-foreground text-sm"},be={key:0,class:"text-error mt-1 text-sm font-medium"},ke={key:1,class:"mt-1 text-sm font-medium"},we={key:0,class:"pb-4"},Se={class:"text-secondary-foreground mb-2 text-base font-medium"},Te={class:"max-h-80 space-y-2 overflow-y-auto"},Be={class:"text-secondary-foreground font-medium"},Me={class:"text-muted-foreground mt-1 text-sm"},Qe=N({__name:"mcp-server-detail",props:{id:{},isView:{type:Boolean},isJsonImport:{type:Boolean},isSystemMcp:{type:Boolean}},emits:["close"],setup(k,{emit:w}){const y=k,S=w,l=g(()=>y.id||T.query.id||null),{t:s}=V(),x=O(),T=z(),t=j({reconnecting:!1,formData:{mcpServerId:"",name:"",description:"",icon:"",type:"user",providerName:"",url:"",sortOrder:0,isDisabled:!1,creatorId:"",connectError:"",connectable:!1,tools:[],isShow:!1,isAssociated:!1,communicationType:""}}),{lockFn:v,isLock:B}=D(async()=>{try{let n;y.isSystemMcp?n=await W(l.value):n=await X(l.value),Object.assign(t.formData,n)}catch(n){console.error("获取供应商详情失败:",n)}}),{lockFn:M,isLock:C}=D(async()=>{try{const n=await Y(l.value);n.connectable?(x.success(n.message),v(),t.reconnecting=!0):x.error(n.message)}catch(n){console.error("重新链接失败:",n)}}),$=g(()=>t.formData.communicationType?t.formData.communicationType.includes("-")?t.formData.communicationType.replace("-"," ").toUpperCase():t.formData.communicationType?.toUpperCase():"");return A(async()=>l.value&&await v()),(n,u)=>{const I=G,U=R,h=H,p=K,E=q,F=P;return r(),b(F,{title:e(s)("ai-mcp.backend.detailTitle"),description:e(s)("ai-mcp.backend.detailTitle"),ui:{content:"max-w-2xl overflow-y-auto h-fit"},onClose:u[1]||(u[1]=f=>S("close",e(t).reconnecting))},{default:c(()=>[e(B)?(r(),i("div",Z,[d(I,{name:"i-lucide-loader-2",class:"size-8 animate-spin"})])):(r(),i("div",ee,[o("div",te,[o("div",oe,[d(U,{src:e(t).formData.icon,alt:e(t).formData.name,size:"3xl",ui:{root:"rounded-lg"}},null,8,["src","alt"]),o("div",null,[o("h3",ae,[d(h,{text:e(t).formData.name,delay:0},{default:c(()=>[o("span",se,a(e(t).formData.name),1)]),_:1},8,["text"])]),d(p,{color:e(t).formData.type==="user"?"info":"primary"},{default:c(()=>[m(a(e(t).formData.type==="user"?e(s)("ai-mcp.frontend.detail.custom"):e(s)("ai-mcp.frontend.detail.system")),1)]),_:1},8,["color"])])]),!e(t).formData.connectable&&e(t).formData.type==="user"?(r(),b(E,{key:0,class:"h-fit",loading:e(C),icon:"tabler:reload",ui:{leadingIcon:"size-4"},variant:"soft",size:"md",color:"error",onClick:u[0]||(u[0]=f=>e(M)())},{default:c(()=>[m(a(e(s)("ai-mcp.backend.detail.reconnect")),1)]),_:1},8,["loading"])):_("",!0)]),o("div",ne,[o("p",re,a(e(t).formData.description||e(s)("ai-mcp.frontend.detail.noDescription")),1)]),o("div",ce,[e(t).formData.type==="user"?(r(),i("div",ie,[o("div",de,a(e(s)("ai-mcp.frontend.detail.url")),1),d(h,{text:e(t).formData.url,ui:{content:"max-w-100 !whitespace-pre-wrap break-all leading-relaxed h-fit p-2"},"delay-duration":0},{content:c(()=>[o("div",me,a(e(t).formData.url),1)]),default:c(()=>[o("div",le,a(e(t).formData.url),1)]),_:1},8,["text"])])):_("",!0),y.isSystemMcp?_("",!0):(r(),i("div",ue,[o("div",pe,a(e(s)("ai-mcp.frontend.detail.status")),1),o("div",fe,[d(p,{color:e(t).formData.isDisabled?"warning":"success"},{default:c(()=>[m(a(e(t).formData.isDisabled?e(s)("ai-mcp.frontend.detail.disabled"):e(s)("ai-mcp.frontend.detail.enabled")),1)]),_:1},8,["color"])])])),o("div",null,[o("div",_e,a(e(s)("ai-mcp.frontend.detail.sortOrder")),1),o("div",ye,a(e(t).formData.sortOrder),1)]),o("div",null,[o("div",xe,a(e(s)("ai-mcp.backend.detail.connectStatus")),1),o("div",ve,[d(p,{color:e(t).formData.connectable?"success":"error"},{default:c(()=>[m(a(e(t).formData.connectable?e(s)("ai-mcp.backend.detail.connectSuccess"):e(s)("ai-mcp.backend.detail.connectFailed")),1)]),_:1},8,["color"])])]),o("div",null,[o("div",he,a(e(s)("ai-mcp.backend.detail.communicationType")),1),o("div",ge,[d(p,{color:"neutral",variant:"soft"},{default:c(()=>[m(a(e($)),1)]),_:1})])]),o("div",null,[o("div",De,a(e(s)("ai-mcp.backend.detail.connectError")),1),e(t).formData.connectError?(r(),i("div",be,a(e(t).formData.connectError),1)):(r(),i("div",ke,"-"))])]),e(t).formData.tools&&e(t).formData.tools.length>0?(r(),i("div",we,[o("h4",Se,a(e(s)("ai-mcp.backend.detail.tools")),1),o("div",Te,[(r(!0),i(J,null,Q(e(t).formData.tools,(f,L)=>(r(),i("div",{key:L,class:"border-muted rounded-lg border p-4"},[o("div",Be,a(f.name),1),o("div",Me,a(f.description),1)]))),128))])])):_("",!0)]))]),_:1},8,["title","description"])}}});export{Qe as default};
