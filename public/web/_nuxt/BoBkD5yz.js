import{aM as C,aP as O,bI as l,aL as h,cy as o}from"#entry";function d(t,n){return t+(n?.startsWith("/")?n:`/${n||""}`)}function $(t,n){return t.filter(r=>r.type!==o.BUTTON&&(n||!r.isHidden)).sort((r,a)=>(r.sort||0)-(a.sort||0))}function M(t,n=""){const r=t.path?`/${t.path}`:"",a=`${n}${r}`;return`${l.CONSOLE}${a}`.replace(/\/+/g,"/").replace(/\/$/,"")}function N(t,n=""){const r=d(n,t.path);if(t.type===o.MENU&&!t.isHidden&&t.component)return`${l.CONSOLE}${r}`.replace(/\/+/g,"/");if(t.children?.length){const a=t.children.find(s=>!s.isHidden&&(s.component||s.children?.length));if(a)return N(a,r)}return`${l.CONSOLE}${r}`.replace(/\/+/g,"/")}function f(t,n="",r={}){const{$i18n:a}=O(),{t:s}=a;let c=[];return $(t,!1).forEach(e=>{const i=M(e,n),p=d(n,e.path),g=r.directoryToEmpty&&e.type===o.DIRECTORY||e.type===o.GROUP?void 0:N(e,n),u=e.children?.length?f(e.children,p,r):[],y=r.currentPath?r.currentPath.startsWith(i):!1,P=u.some(E=>E.defaultOpen||E.active),T=y||P;e.type===o.GROUP?(c.push({label:s(e.name)||e.name,type:"label",matchPath:i,children:[]}),e.children?.length&&(c=c.concat(u))):c.push({label:s(e.name)||e.name,icon:e.icon||"",to:g,matchPath:i,active:!!g&&y,defaultOpen:T,children:u})}),c}function U(){const t=h().menus;return f(t,"",{directoryToEmpty:!1})}function v(t){const n=h().menus;return f(n,"",{directoryToEmpty:!0,currentPath:t})}function R(){return b(h().menus,(t,n,r)=>t.type===o.MENU?{id:String(t.id),name:t.name,icon:t.icon||"i-heroicons-squares-2x2-20-solid",iconClass:"bg-blue-100",type:"menu",path:n,parentName:r}:[])}function I(t=C().path,n="/",r="后台管理"){if(!t||t===n)return[{label:r,to:n,active:!0}];const{$i18n:a}=O(),{t:s}=a,c=[];return b(h().menus,(e,i)=>{if(t===i||t.startsWith(i+"/")){if(e.type===1){c.push({name:e.name,path:""});return}c.push({name:e.name,path:i})}return[]}),c.sort((e,i)=>e.path.length-i.path.length),[{label:r,to:n},...c.map((e,i,p)=>({label:s(e.name),to:e.path,active:i===p.length-1}))]}function b(t,n,r=l.CONSOLE){return $(t,!0).flatMap(a=>{let s=d(r,a.path);s=s.replace(/\/+/g,"/");const c=n(a,s,r),e=a.children?.length?b(a.children,n,s):[];return[].concat(c,e)})}export{v as a,U as b,I as c,R as d};
