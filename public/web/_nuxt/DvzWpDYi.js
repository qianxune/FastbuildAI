const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Mv7bMhLt.js","./Cgyg1gJC.js","./DNavUDDh.js","./CGAco-GG.js","./DbqqhwXM.js","./DNSLGqNg.js","./psimjGaX.js","./CuVAPZQ8.js","./B3rWqoNg.js","./EK7Wbu3-.js","./cd55qm53.js","./uRSXQjEl.js","./vMXLMQMq.js","./BMSQkwth.js","./DaWZu8wl.js","./abPSHzII.js","./CMrwRwXe.js","./5wIHoxV5.js","./o4ws_w_T.js","./RPflLnqr.js","./TrJvDfxI.js","./jsPNKUA0.js","./gaGwb9HC.js","./DUoaAyrs.js","./shdu-Ndv.js","./CnxT3uvZ.js","./DBiaUVBh.js","./B56Nm3vt.js","./hsuWSsy6.js","./DMoqg0Fd.js","./CtosDvS0.js","./kRIii9yh.js","./Z7qkLoXK.js","./C6Y-ieo6.js","./BFo3vNrE.js","./DeCyaT7k.js","./D4e4FYoF.js","./BCcN9pii.js","./CMKSl-Ng.js","./CxvgZo8z.js","./Cie-o9Wa.js","./CiVwig2f.js","./4jjeIyfe.js","./D7VOTB3C.js","./fhkze2Jn.js","./9Q2Y_nd6.js","./td2xDKru.js","./CRu9at2N.js","./Dm8J87dm.js","./RA92o3C4.js","./L_e6O9bG.js","./DOOZ3wAl.js","./Cub7JM7Q.js","./B0g9CpkI.js","./Y67jy4iF.js","./CjasYwqF.js","./CAQVAH0V.js","./DBEJUH-Z.js","./Deu6qIfg.js","./D9sX2Qi6.js","./D5g96Tpw.js","./BstbYvQo.js","./MCK2d4XT.js"])))=>i.map(i=>d[i]);
import{d as q,aM as K,i as W,s as w,W as d,k as H,R as J,a2 as X,aN as Y,n as Z,p as T,K as ee,q as te,g as t,ac as oe,J as ae,c as ne,o as _,x as n,z as S,f as k,t as u,D as v,au as se,y as N,w as U,_ as ie,A as le,X as m,at as O,av as re,aO as ue}from"#entry";import{_ as ce}from"./DO9M7gn1.js";import{_ as de}from"./Y67jy4iF.js";import{_ as me}from"./B5gsc-Ax.js";import{a as fe}from"./Dm8J87dm.js";import{u as pe}from"./CxvgZo8z.js";const ge={class:"flex h-full min-h-0 flex-1 flex-col p-4"},_e={class:"flex items-center justify-between"},ve={class:"text-foreground text-lg font-medium"},be={class:"flex h-full min-h-0 flex-1 gap-4 pt-4 pr-4"},he={class:"flex h-full min-h-0 w-1/2 flex-none flex-col"},xe={class:"mb-4 flex"},Ce={class:"flex h-full min-h-0 w-1/2 flex-none flex-col"},we={class:"mb-4 flex items-center justify-end gap-3 p-0.5"},Te={class:"bg-muted border-default flex h-full min-h-0 w-full flex-col rounded-lg border"},Se={class:"flex items-center justify-between p-4"},ke={class:"text-foreground text-lg font-medium"},Ee={class:"flex items-center gap-2"},E="你好，我是智能体默认开场白，你可以在界面配置中修改我",Ne=q({__name:"index",setup(Ie){const M=d(()=>m(()=>import("./Mv7bMhLt.js"),__vite__mapDeps([0,1]),import.meta.url)),F=d(()=>m(()=>import("./DNavUDDh.js"),__vite__mapDeps([2,1]),import.meta.url)),L=d(()=>m(()=>import("./CGAco-GG.js"),__vite__mapDeps([3,1,4,5,6,7,8,9,10]),import.meta.url)),Q=d(()=>m(()=>import("./uRSXQjEl.js"),__vite__mapDeps([11,1,12,13,14,15,16,17,18,4,5,6,7,8,9,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,10,43,44,45,46,47,48,49]),import.meta.url)),$=d(()=>m(()=>import("./L_e6O9bG.js"),__vite__mapDeps([50,1,51,18,10,4,5,6,7,8,9,52,28,29,30,31,32,33,34,35,36,37,38,40,21,15,43,53,54,55,56,57,58,59,60,61,62]),import.meta.url)),z=K(),{t:l}=W(),b=w(!1),I=z.params.id,r=oe("agents"),f=w("0"),V=[{value:"0",label:l("ai-agent.backend.configuration.func"),component:M},{value:"1",label:l("ai-agent.backend.configuration.user"),component:F},{value:"2",label:l("ai-agent.backend.configuration.billingSetup"),component:L}],R=H("previewChatRef"),p=w(!0),i=J("agent-config-auto-save",{default:()=>!0}),g=["我打算去北京旅游，有什么推荐的路线吗？","预算大约2万，能帮我规划一下行程吗？","我对历史文化很感兴趣，有合适的目的地推荐吗？"],B={coze:"开场白和问题预设请前往Coze平台设置，发布为 API 服务后即可生效",dify:"开场白和问题预设请前往Dify平台设置"},e=X({name:"",description:"",avatar:"",chatAvatar:"",rolePrompt:"",createMode:"direct",showContext:!0,showReference:!0,enableFeedback:!0,enableWebSearch:!1,billingConfig:{price:0},modelConfig:{id:"",options:{}},datasetIds:[],mcpServerIds:[],openingStatement:E,openingQuestions:[...g],isPublic:!1,quickCommands:[],autoQuestions:{enabled:!1,customRuleEnabled:!1,customRule:""},formFields:[],formFieldsInputs:{},thirdPartyIntegration:{},tagIds:[]});function j(){if(!e.formFields||e.formFields.length===0){O().error(l("ai-agent.backend.configuration.variableInputDesc"));return}p.value=!p.value}const{lockFn:A,isLock:y}=Y(async(o=!0)=>{await fe(I,e),o&&(O().success(l("common.message.updateSuccess")),setTimeout(()=>{re().push(pe("ai-agent:list"))},1e3)),ue(`agent-detail-${I}`)}),G=ee(()=>A(!1),1e3),P=Z(()=>e.createMode!=="direct");T(()=>e.createMode,o=>{const a=o==="coze"||o==="dify",h=e.openingStatement===E,x=e.openingQuestions.length===g.length&&e.openingQuestions.every((c,C)=>c===g[C]);a?(h&&(e.openingStatement=B[o]),x&&(e.openingQuestions=[])):(e.openingStatement||(e.openingStatement=E),e.openingQuestions.length===0&&(e.openingQuestions=[...g]))},{immediate:!0}),T(()=>e,()=>{!b.value||!i.value||P.value||G()},{deep:!0});function D(){Reflect.ownKeys({...e,tags:[]}).forEach(o=>{t(r)&&Object.prototype.hasOwnProperty.call(t(r),o)&&o!=="tags"&&(e[o]=t(r)?.[o]??e[o]),o==="tags"&&(e.tagIds=t(r)?.tags?.map(a=>a.id)??[])})}return te(()=>{D(),setTimeout(()=>{b.value=!0},1500)}),T(()=>r,()=>{if(b.value&&t(r)){const o=i.value;i.value=!1,D(),ae(()=>{i.value=o})}},{deep:!0}),(o,a)=>{const h=ce,x=de,c=ie,C=me;return _(),ne("div",ge,[n("div",_e,[n("h1",ve,S(o.$t("ai-agent.backend.menu.arrange")),1)]),n("div",be,[n("div",he,[n("div",xe,[u(h,{modelValue:t(f),"onUpdate:modelValue":a[0]||(a[0]=s=>v(f)?f.value=s:null),items:V,class:"block w-auto"},null,8,["modelValue"])]),(_(),k(se(V[Number(t(f))]?.component),{modelValue:t(e),"onUpdate:modelValue":a[1]||(a[1]=s=>v(e)?e.value=s:null)},null,8,["modelValue"]))]),n("div",Ce,[n("div",we,[t(P)?N("",!0):(_(),k(x,{key:0,modelValue:t(i),"onUpdate:modelValue":a[2]||(a[2]=s=>v(i)?i.value=s:null),label:t(l)("ai-agent.backend.configuration.enableAutoSave"),class:"flex-none"},null,8,["modelValue","label"])),t(e).createMode==="direct"?(_(),k(t($),{key:1,modelValue:t(e).modelConfig,"onUpdate:modelValue":a[3]||(a[3]=s=>t(e).modelConfig=s)},null,8,["modelValue"])):N("",!0),u(C,{codes:["ai-agent:update"]},{default:U(()=>[u(c,{trailingIcon:"i-lucide-arrow-big-up",color:"primary",size:"lg",class:"flex-none gap-1 px-4",disabled:t(y),loading:t(y),onClick:t(A)},{default:U(()=>[le(S(o.$t("ai-agent.backend.configuration.saveConfig")),1)]),_:1},8,["disabled","loading","onClick"])]),_:1})]),n("div",Te,[n("div",Se,[n("h1",ke,S(o.$t("ai-agent.backend.configuration.debugPreview")),1),n("div",Ee,[u(c,{icon:"i-lucide-refresh-cw",color:"primary",variant:"ghost",onClick:a[4]||(a[4]=s=>t(R)?.clearRecord())}),u(c,{icon:"i-lucide-settings-2",color:"primary",variant:t(p)?"soft":"ghost",onClick:j},null,8,["variant"])])]),u(t(Q),{agent:t(e),"onUpdate:agent":a[5]||(a[5]=s=>v(e)?e.value=s:null),ref_key:"previewChatRef",ref:R,"show-variable-input":t(p)},null,8,["agent","show-variable-input"])])])])])}}});export{Ne as _};
