import{d as G,aP as K,l as z,s as L,n as E,p as C,q as Q,c as w,o as g,C as p,t as s,w as h,x as c,f as X,y as B,v as Z,B as _,F as N,z as V,A as ee,g as v,_ as ae,J as le}from"#entry";import te from"./cd55qm53.js";import{f as U,p as b,_ as ne,a as M,b as F,m as P}from"./C5Ha_WGa.js";import{_ as oe}from"./hsuWSsy6.js";import{$ as H,a as se}from"./DMoqg0Fd.js";const ie={class:"p-4"},de={class:"flex"},ue={class:"flex flex-col gap-2 pr-3"},re={key:0,class:"mt-2 grid grid-cols-2 gap-4"},me={class:"flex justify-end gap-2 pt-2"},ye=G({__name:"index",props:{start:{default:null},end:{default:null},dateStyle:{default:"medium"},disabled:{type:Boolean,default:!1},placeholder:{},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},size:{default:"md"},icon:{default:"i-lucide-calendar-range"},placement:{default:"bottom"},variant:{},color:{},numberOfMonths:{default:2},showTime:{type:Boolean,default:!1},timeFormat:{default:"HH:mm:ss"},defaultStartTime:{default:""},defaultEndTime:{default:""},ui:{}},emits:["update:start","update:end","confirm","cancel","focus","blur","clear","open","close","change"],setup(l,{emit:O}){const{$i18n:R}=K(),{t:T,locale:$}=R,a=l,i=O,f=z(!1),u=L({start:void 0,end:void 0}),r=z(null),m=z(null),D=E(()=>U(a.start,$.value,a.dateStyle,"short",!1)),j=E(()=>U(a.end,$.value,a.dateStyle,"short",!1)),k=()=>{const t=F(a.start),e=F(a.end);if(u.value={start:t??void 0,end:e??void 0},a.showTime){if(a.start)r.value=S(a.start);else if(a.defaultStartTime){const n=b(a.defaultStartTime);n&&(r.value=n)}else r.value=null;if(a.end)m.value=S(a.end);else if(a.defaultEndTime){const n=b(a.defaultEndTime);n&&(m.value=n)}else m.value=null}},A=t=>{t?(i("open"),le(()=>{k()})):i("close")},I=t=>{a.disabled||a.readonly||(t.stopPropagation(),u.value={start:void 0,end:void 0},r.value=null,m.value=null,i("update:start",null),i("update:end",null),i("clear"),i("change",null,null),f.value=!1)},q=()=>{const t=u.value.start?.toDate(H()),e=u.value.end?.toDate(H());let n=r.value,o=m.value;a.showTime&&(t&&!n&&a.defaultStartTime&&(n=b(a.defaultStartTime)),e&&!o&&a.defaultEndTime&&(o=b(a.defaultEndTime))),t&&P(t,a.showTime?n:null),e&&P(e,a.showTime?o:null),i("update:start",t||null),i("update:end",e||null),i("confirm",t||null,e||null),i("change",t||null,e||null),f.value=!1},J=()=>{u.value={start:void 0,end:void 0},r.value=null,m.value=null,i("cancel"),i("change",null,null),f.value=!1},x=(t=0,e=0)=>{const n=new se(new Date().getFullYear(),new Date().getMonth()+1,new Date().getDate()),o=n;let y;t>0?y=n.subtract({days:t}):e>0?y=n.subtract({months:e}):y=n,u.value={start:y,end:o}},S=t=>{if(!t){const e=new Date;return e.setHours(0,0,0,0),e}return b(t)||new Date};return C([()=>a.start,()=>a.end],()=>{f.value||k()}),C(()=>u.value,t=>{if(a.showTime){if(t.start&&!r.value&&a.defaultStartTime){const e=b(a.defaultStartTime);e&&(r.value=e)}if(t.end&&!m.value&&a.defaultEndTime){const e=b(a.defaultEndTime);e&&(m.value=e)}}},{deep:!0}),C(()=>f.value,A),Q(k),(t,e)=>{const n=_,o=ae,y=te,W=ne,Y=oe;return g(),w("div",{class:p(["bd-date-range-picker relative inline-flex",[l.size,{"cursor-not-allowed opacity-60":l.disabled}]])},[s(Y,{open:f.value,"onUpdate:open":e[8]||(e[8]=d=>f.value=d),disabled:l.disabled||l.readonly,placement:l.placement,ui:{content:"w-auto"}},{content:h(()=>[c("div",ie,[c("div",de,[c("div",ue,[s(o,{label:v(T)("common.time.lastNDays",{n:7}),size:"xs",color:"neutral",variant:"soft",onClick:e[0]||(e[0]=d=>x(7))},null,8,["label"]),s(o,{label:v(T)("common.time.lastNDays",{n:15}),size:"xs",color:"neutral",variant:"soft",onClick:e[1]||(e[1]=d=>x(15))},null,8,["label"]),s(o,{label:v(T)("common.time.lastNDays",{n:30}),size:"xs",color:"neutral",variant:"soft",onClick:e[2]||(e[2]=d=>x(30))},null,8,["label"]),s(o,{label:v(T)("common.time.lastNMonth",{n:3}),size:"xs",color:"neutral",variant:"soft",onClick:e[3]||(e[3]=d=>x(0,3))},null,8,["label"]),s(o,{label:v(T)("common.time.lastNMonth",{n:6}),size:"xs",color:"neutral",variant:"soft",onClick:e[4]||(e[4]=d=>x(0,6))},null,8,["label"])]),c("div",null,[s(W,{modelValue:u.value,"onUpdate:modelValue":e[5]||(e[5]=d=>u.value=d),range:"",fixedWeeks:!1,"number-of-months":l.numberOfMonths,color:"primary",size:"sm",locale:v($)},null,8,["modelValue","number-of-months","locale"]),l.showTime?(g(),w("div",re,[s(M,{modelValue:r.value,"onUpdate:modelValue":e[6]||(e[6]=d=>r.value=d),format:l.timeFormat,disabled:l.disabled,readonly:l.readonly,clearable:!1,size:"sm",ui:{root:"w-full"}},null,8,["modelValue","format","disabled","readonly"]),s(M,{modelValue:m.value,"onUpdate:modelValue":e[7]||(e[7]=d=>m.value=d),format:l.timeFormat,disabled:l.disabled,readonly:l.readonly,clearable:!1,size:"sm",ui:{root:"w-full"}},null,8,["modelValue","format","disabled","readonly"])])):B("",!0)])]),c("div",me,[s(o,{size:"sm",variant:"ghost",icon:"i-lucide-x",onClick:J}),s(o,{size:"sm",icon:"i-lucide-check",disabled:!u.value.start&&!l.disabled,onClick:q},null,8,["disabled"])])])]),default:h(()=>[c("div",{class:p(["relative w-full",l.ui?.root])},[s(y,{placeholder:"",disabled:l.disabled,readonly:!0,size:l.size,color:l.color,variant:l.variant,class:p({"cursor-default":l.readonly}),ui:{...l.ui,root:l.ui?.root||"w-full",base:`${f.value?"ring-2 ring-inset ring-primary":""} text-left ${l.ui?.base}`}},{leading:h(()=>[s(n,{name:l.icon,class:"text-dimmed"},null,8,["name"]),c("div",{class:p(["text-dimmed ml-3 flex items-center justify-between text-sm select-none",D.value?"text-highlighted":"text-dimmed"])},[D.value?(g(),w(N,{key:0},[c("span",null,V(D.value),1),e[9]||(e[9]=c("span",{class:"mx-4"},"-",-1)),c("span",null,V(j.value),1)],64)):(g(),w(N,{key:1},[ee(V(v(T)("common.placeholder.dateRange")),1)],64))],2)]),trailing:h(()=>[l.clearable&&!l.disabled&&!l.readonly&&D.value?(g(),X(o,{key:0,color:"neutral",variant:"ghost",icon:"i-lucide-x",padded:!1,size:"xs",onClick:Z(I,["stop"])})):B("",!0)]),_:1},8,["disabled","size","color","variant","class","ui"])],2)]),_:1},8,["open","disabled","placement"])],2)}}});export{ye as _};
