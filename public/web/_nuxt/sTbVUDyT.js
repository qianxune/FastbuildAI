import{aD as J,d as k,ae as X,af as xe,ah as Q,bs as le,l as C,ag as ne,p as Ce,J as A,an as z,f as E,o as q,w,r as K,y as se,g as t,P as V,al as we,t as re,bD as P,v as W,n as R,cO as Ee,q as qe,ai as Ie,m as Y,e as ue,cP as Le,cI as ke}from"#entry";import{u as de}from"./CuVAPZQ8.js";import{u as Ke}from"./CtosDvS0.js";import{u as Ve}from"./CAQVAH0V.js";import{u as Be}from"./kRIii9yh.js";import{u as Fe}from"./D4e4FYoF.js";import{g as Se}from"./CMKSl-Ng.js";import{V as Ae}from"./Deu6qIfg.js";function He(n,r,a){const l=n.findIndex(v=>J(v,r)),d=n.findIndex(v=>J(v,a));if(l===-1||d===-1)return[];const[s,c]=[l,d].sort((v,u)=>v-u);return n.slice(s,c+1)}function Pe(n,r,a){return n===void 0?!1:Array.isArray(n)?n.some(l=>H(l,r,a)):H(n,r,a)}function H(n,r,a){return n===void 0||r===void 0?!1:typeof n=="string"?n===r:typeof a=="function"?a(n,r):typeof a=="string"?n?.[a]===r?.[a]:J(n,r)}const[Z,Te]=X("ListboxRoot");var De=k({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(n,{expose:r,emit:a}){const l=n,d=a,{multiple:s,highlightOnHover:c,orientation:v,disabled:u,selectionBehavior:_,dir:g}=xe(l),{getItems:y}=Q({isProvider:!0}),{handleTypeaheadSearch:B}=Fe(),{primitiveElement:T,currentElement:p}=le(),x=Be(),M=Ke(g),fe=Ve(p),D=C(),F=C(!1),$=C(!0),m=ne(l,"modelValue",d,{defaultValue:l.defaultValue??(s.value?[]:void 0),passive:l.modelValue===void 0,deep:!0});function ce(e){if(F.value=!0,l.multiple){const i=Array.isArray(m.value)?[...m.value]:[],o=i.findIndex(f=>H(f,e,l.by));l.selectionBehavior==="toggle"?(o===-1?i.push(e):i.splice(o,1),m.value=i):(m.value=[e],D.value=e)}else l.selectionBehavior==="toggle"&&H(m.value,e,l.by)?m.value=void 0:m.value=e;setTimeout(()=>{F.value=!1},1)}const h=C(null),O=C(null),I=C(!1),G=C(!1),ee=z(),N=z(),te=z();function U(){return y().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function b(e,i=!0){if(!e)return;h.value=e,$.value&&h.value.focus(),i&&h.value.scrollIntoView({block:"nearest"});const o=y().find(f=>f.ref===e);d("highlight",o)}function ve(e){if(I.value)te.trigger(e);else{const i=y().find(o=>H(o.value,e,l.by));i&&(h.value=i.ref,b(i.ref))}}function pe(e){h.value&&h.value.isConnected&&(e.preventDefault(),e.stopPropagation(),G.value||h.value.click())}function me(e){if($.value){if(F.value=!0,I.value)N.trigger(e);else{const i=e.altKey||e.ctrlKey||e.metaKey;if(i&&e.key==="a"&&s.value){const o=y(),f=o.map(L=>L.value);m.value=[...f],e.preventDefault(),b(o[o.length-1].ref)}else if(!i){const o=B(e.key,y());o&&b(o)}}setTimeout(()=>{F.value=!1},1)}}function he(){G.value=!0}function ye(){A(()=>{G.value=!1})}function ae(){A(()=>{const e=new KeyboardEvent("keydown",{key:"PageUp"});ie(e)})}function j(e){const i=h.value;i?.isConnected&&(O.value=i),h.value=null,d("leave",e)}function ge(e){const i=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if(e.currentTarget?.dispatchEvent(i),d("entryFocus",i),!i.defaultPrevented)if(O.value)b(O.value);else{const o=U()?.[0];b(o)}}function ie(e){const i=Se(e,v.value,M.value);if(!i)return;let o=U();if(h.value){if(i==="last")o.reverse();else if(i==="prev"||i==="next"){i==="prev"&&o.reverse();const f=o.indexOf(h.value);o=o.slice(f+1)}be(e,o[0])}if(o.length){const f=!h.value&&i==="prev"?o.length-1:0;b(o[f])}if(I.value)return N.trigger(e)}function be(e,i){if(!(I.value||l.selectionBehavior!=="replace"||!s.value||!Array.isArray(m.value)||(e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){const f=y().filter(S=>S.ref.dataset.disabled!=="");let L=f.find(S=>S.ref===i)?.value;if(e.key===x.END?L=f[f.length-1].value:e.key===x.HOME&&(L=f[0].value),!L||!D.value)return;const _e=He(f.map(S=>S.value),D.value,L);m.value=_e}}async function oe(e){if(await A(),I.value)ee.trigger(e);else{const i=U(),o=i.find(f=>f.dataset.state==="checked");o?b(o):i.length&&b(i[0])}}return Ce(m,()=>{F.value||A(()=>{oe()})},{immediate:!0,deep:!0}),r({highlightedElement:h,highlightItem:ve,highlightFirstItem:ae,highlightSelected:oe,getItems:y}),Te({modelValue:m,onValueChange:ce,multiple:s,orientation:v,dir:M,disabled:u,highlightOnHover:c,highlightedElement:h,isVirtual:I,virtualFocusHook:ee,virtualKeydownHook:N,virtualHighlightHook:te,by:l.by,firstValue:D,selectionBehavior:_,focusable:$,onLeave:j,onEnter:ge,changeHighlight:b,onKeydownEnter:pe,onKeydownNavigation:ie,onKeydownTypeAhead:me,onCompositionStart:he,onCompositionEnd:ye,highlightFirstItem:ae}),(e,i)=>(q(),E(t(V),{ref_key:"primitiveElement",ref:T,as:e.as,"as-child":e.asChild,dir:t(M),"data-disabled":t(u)?"":void 0,onPointerleave:j,onFocusout:i[0]||(i[0]=async o=>{const f=o.relatedTarget||o.target;await A(),h.value&&t(p)&&!t(p).contains(f)&&j(o)})},{default:w(()=>[K(e.$slots,"default",{modelValue:t(m)}),t(fe)&&e.name?(q(),E(t(Ae),{key:0,name:e.name,value:t(m),disabled:t(u),required:e.required},null,8,["name","value","disabled","required"])):se("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),at=De,Re=k({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const{CollectionSlot:r}=Q(),a=Z(),l=we(!1,10);return(d,s)=>(q(),E(t(r),null,{default:w(()=>[re(t(V),{role:"listbox",as:d.as,"as-child":d.asChild,tabindex:t(a).focusable.value?t(a).highlightedElement.value?"-1":"0":"-1","aria-orientation":t(a).orientation.value,"aria-multiselectable":!!t(a).multiple.value,"data-orientation":t(a).orientation.value,onMousedown:s[0]||(s[0]=W(c=>l.value=!0,["left"])),onFocus:s[1]||(s[1]=c=>{t(l)||t(a).onEnter(c)}),onKeydown:[s[2]||(s[2]=P(c=>{t(a).orientation.value==="vertical"&&(c.key==="ArrowLeft"||c.key==="ArrowRight")||t(a).orientation.value==="horizontal"&&(c.key==="ArrowUp"||c.key==="ArrowDown")||(c.preventDefault(),t(a).focusable.value&&t(a).onKeydownNavigation(c))},["down","up","left","right","home","end"])),P(t(a).onKeydownEnter,["enter"]),t(a).onKeydownTypeAhead]},{default:w(()=>[K(d.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),it=Re,Me=k({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(n,{emit:r}){const a=n,d=ne(a,"modelValue",r,{defaultValue:"",passive:a.modelValue===void 0}),s=Z(),{primitiveElement:c,currentElement:v}=le(),u=R(()=>a.disabled||s.disabled.value||!1),_=C();return Ee(()=>_.value=s.highlightedElement.value?.id),qe(()=>{s.focusable.value=!1,setTimeout(()=>{a.autoFocus&&v.value?.focus()},1)}),Ie(()=>{s.focusable.value=!0}),(g,y)=>(q(),E(t(V),{ref_key:"primitiveElement",ref:c,as:g.as,"as-child":g.asChild,value:t(d),disabled:u.value?"":void 0,"data-disabled":u.value?"":void 0,"aria-disabled":u.value??void 0,"aria-activedescendant":_.value,type:"text",onKeydown:[P(W(t(s).onKeydownNavigation,["prevent"]),["down","up","home","end"]),P(t(s).onKeydownEnter,["enter"])],onInput:y[0]||(y[0]=B=>{d.value=B.target.value,t(s).highlightFirstItem()}),onCompositionstart:t(s).onCompositionStart,onCompositionend:t(s).onCompositionEnd},{default:w(()=>[K(g.$slots,"default",{modelValue:t(d)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),ot=Me;const[lt,$e]=X("ListboxGroup");var Oe=k({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const r=n,a=de(void 0,"reka-listbox-group");return $e({id:a}),(l,d)=>(q(),E(t(V),Y({role:"group"},r,{"aria-labelledby":t(a)}),{default:w(()=>[K(l.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),nt=Oe;const Ge="listbox.select",[Ne,Ue]=X("ListboxItem");var je=k({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(n,{emit:r}){const a=n,l=r,d=de(void 0,"reka-listbox-item"),{CollectionItem:s}=Q(),{forwardRef:c,currentElement:v}=ue(),u=Z(),_=R(()=>v.value===u.highlightedElement.value),g=R(()=>Pe(u.modelValue.value,a.value,u.by)),y=R(()=>u.disabled.value||a.disabled);async function B(p){l("select",p),!p?.defaultPrevented&&!y.value&&p&&(u.onValueChange(a.value),u.changeHighlight(v.value))}function T(p){const x={originalEvent:p,value:a.value};ke(Ge,B,x)}return Ue({isSelected:g}),(p,x)=>(q(),E(t(s),{value:p.value},{default:w(()=>[Le([_.value,g.value],()=>re(t(V),Y({id:t(d)},p.$attrs,{ref:t(c),role:"option",tabindex:t(u).focusable.value?_.value?"0":"-1":-1,"aria-selected":g.value,as:p.as,"as-child":p.asChild,disabled:y.value?"":void 0,"data-disabled":y.value?"":void 0,"data-highlighted":_.value?"":void 0,"data-state":g.value?"checked":"unchecked",onClick:T,onKeydown:P(W(T,["prevent"]),["space"]),onPointermove:x[0]||(x[0]=()=>{t(u).highlightedElement.value!==t(v)&&t(u).highlightOnHover.value&&!t(u).focusable.value&&t(u).changeHighlight(t(v),!1)})}),{default:w(()=>[K(p.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),x,1)]),_:3},8,["value"]))}}),st=je,ze=k({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(n){const r=n;ue();const a=Ne();return(l,d)=>t(a).isSelected.value?(q(),E(t(V),Y({key:0,"aria-hidden":"true"},r),{default:w(()=>[K(l.$slots,"default")]),_:3},16)):se("v-if",!0)}}),rt=ze;export{ot as L,it as a,nt as b,st as c,rt as d,at as e,Z as f,lt as i};
