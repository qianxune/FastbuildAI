import{d as x,i as v,n as y,c as u,o as p,x as e,z as s,t as a,B as E,g as _,F as k,E as $,w as A,A as P}from"#entry";import T from"./cd55qm53.js";import{_ as I}from"./CnxT3uvZ.js";import{_ as S}from"./o4ws_w_T.js";import"./DbqqhwXM.js";import"./DNSLGqNg.js";import"./psimjGaX.js";import"./CuVAPZQ8.js";import"./B3rWqoNg.js";import"./EK7Wbu3-.js";import"./TrJvDfxI.js";import"./jsPNKUA0.js";const C={class:"space-y-4"},K={class:"mb-2 text-lg font-medium"},z={class:"text-muted-foreground text-sm"},w={key:0,class:"border-border rounded-lg border p-6 text-center"},q={class:"mb-2 font-medium"},B={class:"text-muted-foreground text-sm"},D={key:1,class:"border-border rounded-lg border p-6 text-center"},N={class:"mb-2 font-medium"},O={class:"text-muted-foreground text-sm"},j={key:2,class:"space-y-6"},U={class:"space-y-4"},G={class:"font-medium"},Y={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},J={class:"space-y-2"},L={class:"flex gap-2"},M={class:"space-y-2"},Z={class:"flex gap-2"},V={class:"space-y-4"},F={class:"font-medium"},R={class:"space-y-4"},H={class:"hover:bg-accent/50 cursor-pointer list-none p-4 transition-colors"},X={class:"mb-4 flex items-center justify-between"},Q={class:"flex items-center gap-3"},W={class:"text-sm font-medium"},ee={class:"text-muted-foreground bg-accent rounded-xs px-4 py-2 text-xs"},te={class:"text-muted-foreground mt-4 text-sm"},se={class:"border-border border-t p-4"},oe={class:"space-y-6"},ne={class:"mb-2 flex items-center justify-between"},ae={class:"text-sm font-medium"},ie={class:"bg-muted rounded-lg p-3"},le={class:"overflow-auto text-xs"},re={class:"mb-2 flex items-center justify-between"},de={class:"text-sm font-medium"},ce={class:"bg-muted rounded-lg p-3"},ue={class:"overflow-auto text-xs"},pe={class:"mb-2 flex items-center justify-between"},me={class:"text-sm font-medium"},ge={class:"bg-muted rounded-lg p-3"},he={class:"overflow-auto text-xs"},Ie=x({__name:"api-guide",props:{agent:{}},setup(m){const c=m,{t:o}=v(),g=`${window.location.protocol}//${window.location.host}`,f=y(()=>[{method:"POST",url:"/consoleapi/v1/chat",title:o("ai-agent.backend.publish.normalChatAPI"),description:o("ai-agent.backend.publish.normalChatAPIDesc"),color:"success",requestExample:{headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.agent?.apiKey||"{API_KEY}"}`},body:{messages:[{role:"user",content:"你好"}],responseMode:"blocking"}},responseExample:{conversationId:"uuid-string",response:"智能体的回复内容",responseTime:1500,tokenUsage:{totalTokens:150,promptTokens:50,completionTokens:100},suggestions:["建议问题1","建议问题2"],referenceSources:[]}},{method:"POST",url:"/consoleapi/v1/chat",title:o("ai-agent.backend.publish.streamChatAPI"),description:o("ai-agent.backend.publish.streamChatAPIDesc"),color:"info",requestExample:{headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.agent?.apiKey||"{API_KEY}"}`},body:{messages:[{role:"user",content:"你好"}],responseMode:"streaming"}},responseExample:{note:"流式响应，通过 Server-Sent Events 返回",format:`data: {"type":"chunk","content":"智能体回复的片段"}
data: [DONE]`}},{method:"GET",url:"/consoleapi/v1/conversations",title:o("ai-agent.backend.publish.getConversationsAPI"),description:o("ai-agent.backend.publish.getConversationsAPIDesc"),color:"neutral",requestExample:{headers:{Authorization:`Bearer ${c.agent?.apiKey||"{API_KEY}"}`},params:{page:1,pageSize:10}},responseExample:{data:[{id:"conversation-uuid",title:"对话标题",summary:"对话摘要",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z",messageCount:10}],pagination:{page:1,pageSize:10,total:100,totalPages:10}}},{method:"GET",url:"/consoleapi/v1/conversations/{id}/messages",title:o("ai-agent.backend.publish.getMessagesAPI"),description:o("ai-agent.backend.publish.getMessagesAPIDesc"),color:"neutral",requestExample:{headers:{Authorization:`Bearer ${c.agent?.apiKey||"{API_KEY}"}`},params:{page:1,pageSize:50}},responseExample:{data:[{id:"message-uuid",role:"user",content:"用户消息内容",createdAt:"2024-01-01T00:00:00Z"},{id:"message-uuid",role:"assistant",content:"智能体回复内容",createdAt:"2024-01-01T00:00:00Z",tokenUsage:{totalTokens:150,promptTokens:50,completionTokens:100}}],pagination:{page:1,pageSize:50,total:20,totalPages:1}}},{method:"PUT",url:"/consoleapi/v1/conversations/{id}",title:o("ai-agent.backend.publish.updateConversationAPI"),description:o("ai-agent.backend.publish.updateConversationAPIDesc"),color:"warning",requestExample:{headers:{"Content-Type":"application/json",Authorization:`Bearer ${c.agent?.apiKey||"{API_KEY}"}`},body:{title:"新的对话标题"}},responseExample:{message:"对话记录更新成功"}},{method:"DELETE",url:"/consoleapi/v1/conversations/{id}",title:o("ai-agent.backend.publish.deleteConversationAPI"),description:o("ai-agent.backend.publish.deleteConversationAPIDesc"),color:"error",requestExample:{headers:{Authorization:`Bearer ${c.agent?.apiKey||"{API_KEY}"}`},note:o("ai-agent.backend.publish.deleteNoBody")},responseExample:{message:"对话记录删除成功"}}]),b=t=>{let i=`curl -X ${t.method} "${g.value}${t.url}"`;if(t.requestExample.headers&&Object.entries(t.requestExample.headers).forEach(([l,r])=>{i+=` \\
  -H "${l}: ${r}"`}),t.requestExample.body&&t.method!=="GET"&&(i+=` \\
  -d '${JSON.stringify(t.requestExample.body,null,2)}'`),t.requestExample.params&&t.method==="GET"){const l=new URLSearchParams(Object.entries(t.requestExample.params).reduce((r,[d,h])=>(r[d]=String(h),r),{})).toString();i=i.replace(t.url,`${t.url}?${l}`)}return i};return(t,i)=>{const l=E,r=T,d=I,h=S;return p(),u("div",C,[e("div",null,[e("h3",K,s(t.$t("ai-agent.backend.publish.apiGuide")),1),e("p",z,s(t.$t("ai-agent.backend.publish.apiGuideDesc")),1)]),m.agent?.isPublished?m.agent?.apiKey?(p(),u("div",j,[e("div",U,[e("h4",G,s(t.$t("ai-agent.backend.publish.basicInfo")),1),e("div",Y,[e("div",J,[i[0]||(i[0]=e("label",{class:"text-sm font-medium"},"API Base URL",-1)),e("div",L,[a(r,{value:_(g),readonly:"",class:"flex-1"},null,8,["value"]),a(d,{content:_(g),variant:"outline",copiedText:t.$t("console-common.messages.copySuccess"),"default-text":t.$t("console-common.copy")},null,8,["content","copiedText","default-text"])])]),e("div",M,[i[1]||(i[1]=e("label",{class:"text-sm font-medium"},"API Key",-1)),e("div",Z,[a(r,{value:m.agent.apiKey,readonly:"",class:"flex-1"},null,8,["value"]),a(d,{content:m.agent.apiKey,variant:"outline",copiedText:t.$t("console-common.messages.copySuccess"),"default-text":t.$t("console-common.copy")},null,8,["content","copiedText","default-text"])])])])]),e("div",V,[e("h4",F,s(t.$t("ai-agent.backend.publish.availableEndpoints")),1),e("div",R,[(p(!0),u(k,null,$(f.value,n=>(p(),u("details",{key:n.url,class:"border-border rounded-lg border"},[e("summary",H,[e("div",X,[e("div",Q,[a(h,{color:n.color,variant:"soft"},{default:A(()=>[P(s(n.method),1)]),_:2},1032,["color"]),e("span",W,s(n.title),1)]),a(l,{name:"i-lucide-chevron-down",class:"text-muted-foreground size-4"})]),e("code",ee,s(n.url),1),e("p",te,s(n.description),1)]),e("div",se,[e("div",oe,[e("div",null,[e("div",ne,[e("h5",ae,s(t.$t("ai-agent.backend.publish.requestExample")),1),a(d,{content:JSON.stringify(n.requestExample,null,2),size:"sm",variant:"outline","default-text":t.$t("ai-agent.backend.publish.copy")},null,8,["content","default-text"])]),e("div",ie,[e("pre",le,[e("code",null,s(JSON.stringify(n.requestExample,null,2)),1)])])]),e("div",null,[e("div",re,[e("h5",de,s(t.$t("ai-agent.backend.publish.responseExample")),1),a(d,{content:JSON.stringify(n.responseExample,null,2),size:"sm",variant:"outline","default-text":t.$t("ai-agent.backend.publish.copy")},null,8,["content","default-text"])]),e("div",ce,[e("pre",ue,[e("code",null,s(JSON.stringify(n.responseExample,null,2)),1)])])]),e("div",null,[e("div",pe,[e("h5",me,s(t.$t("ai-agent.backend.publish.curlExample")),1),a(d,{content:b(n),size:"sm",variant:"outline","default-text":t.$t("ai-agent.backend.publish.copy")},null,8,["content","default-text"])]),e("div",ge,[e("pre",he,[e("code",null,s(b(n)),1)])])])])])]))),128))])])])):(p(),u("div",D,[a(l,{name:"i-lucide-key",class:"text-muted-foreground mx-auto mb-3 size-12"}),e("h4",N,s(t.$t("ai-agent.backend.publish.apiKeyNotGenerated")),1),e("p",O,s(t.$t("ai-agent.backend.publish.apiKeyNotGeneratedDesc")),1)])):(p(),u("div",w,[a(l,{name:"i-lucide-lock",class:"text-muted-foreground mx-auto mb-3 size-12"}),e("h4",q,s(t.$t("ai-agent.backend.publish.unpublished")),1),e("p",B,s(t.$t("ai-agent.backend.publish.unpublishedDesc3")),1)]))])}}});export{Ie as default};
