const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./VX9XuQVf.js","./Cgyg1gJC.js","./BP_ZbZkv.js","./Dk-g3hwz.js","./HSFJMOqK.js","./Q2WhktF2.js","./B5_pvc_U.js","./YyxaqxHR.js","./Qg35g3Wg.js","./CbuohPMR.js","./DbD1oP-w.js","./XqxjlI_u.js"])))=>i.map(i=>d[i]);
import{e as W,f as B}from"./C0KOn7yN.js";import{n as O,aQ as M,X as o,l as g,s as h,p as X,O as Y}from"#entry";const u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));function J(e,t=0){return(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase()}let U;const $=new Uint8Array(16);function q(){if(!U){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");U=crypto.getRandomValues.bind(crypto)}return U($)}const Q=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),F={randomUUID:Q};function K(e,t,a){e=e||{};const s=e.random??e.rng?.()??q();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,J(s)}function Z(e,t,a){return F.randomUUID&&!e?F.randomUUID():K(e)}const A=M({}),H=M({});async function ee(e){Object.keys(A).forEach(l=>delete A[l]),Object.keys(H).forEach(l=>delete H[l]);const s=e==="web"?[Object.assign({"../components/widgets/web/accordion/config.ts":()=>o(()=>import("./1jq5Wk0X.js"),[],import.meta.url),"../components/widgets/web/annotation/config.ts":()=>o(()=>import("./BHxqeVzB.js"),[],import.meta.url),"../components/widgets/web/audio/config.ts":()=>o(()=>import("./VX9XuQVf.js"),__vite__mapDeps([0,1]),import.meta.url),"../components/widgets/web/button/config.ts":()=>o(()=>import("./DwDZi-Lo.js"),[],import.meta.url),"../components/widgets/web/card/config.ts":()=>o(()=>import("./DqXHK2gt.js"),[],import.meta.url),"../components/widgets/web/carousel/config.ts":()=>o(()=>import("./BP_ZbZkv.js"),__vite__mapDeps([2,1]),import.meta.url),"../components/widgets/web/chat-bubble/config.ts":()=>o(()=>import("./ChOXPHIn.js"),[],import.meta.url),"../components/widgets/web/chat-bubbles/config.ts":()=>o(()=>import("./Dk-g3hwz.js"),__vite__mapDeps([3,1]),import.meta.url),"../components/widgets/web/divider/config.ts":()=>o(()=>import("./CUCBb4R7.js"),[],import.meta.url),"../components/widgets/web/flickering-grid/config.ts":()=>o(()=>import("./BghImt3o.js"),[],import.meta.url),"../components/widgets/web/gradient-button/config.ts":()=>o(()=>import("./BNO7SMls.js"),[],import.meta.url),"../components/widgets/web/grid-pattern/config.ts":()=>o(()=>import("./I9e0EvrE.js"),[],import.meta.url),"../components/widgets/web/image-cube/config.ts":()=>o(()=>import("./BqubUa8t.js"),[],import.meta.url),"../components/widgets/web/image/config.ts":()=>o(()=>import("./BlU3dgbI.js"),[],import.meta.url),"../components/widgets/web/interactive-button/config.ts":()=>o(()=>import("./On7iI9Bq.js"),[],import.meta.url),"../components/widgets/web/page-section/config.ts":()=>o(()=>import("./cVvgdbDo.js"),[],import.meta.url),"../components/widgets/web/paragraph/config.ts":()=>o(()=>import("./CLiPIWLL.js"),[],import.meta.url),"../components/widgets/web/particles-background/config.ts":()=>o(()=>import("./ZCD9oJbt.js"),[],import.meta.url),"../components/widgets/web/pricing-plan/config.ts":()=>o(()=>import("./HSFJMOqK.js"),__vite__mapDeps([4,1]),import.meta.url),"../components/widgets/web/pricing-plans/config.ts":()=>o(()=>import("./Q2WhktF2.js"),__vite__mapDeps([5,1]),import.meta.url),"../components/widgets/web/qrcode/config.ts":()=>o(()=>import("./B5_pvc_U.js"),__vite__mapDeps([6,1]),import.meta.url),"../components/widgets/web/rainbow-button/config.ts":()=>o(()=>import("./YyxaqxHR.js"),__vite__mapDeps([7,1]),import.meta.url),"../components/widgets/web/shimmer-button/config.ts":()=>o(()=>import("./DjKfUpJb.js"),[],import.meta.url),"../components/widgets/web/snowfall-bg/config.ts":()=>o(()=>import("./Qg35g3Wg.js"),__vite__mapDeps([8,1]),import.meta.url),"../components/widgets/web/text/config.ts":()=>o(()=>import("./D6_Tu8Wz.js"),[],import.meta.url),"../components/widgets/web/video-text/config.ts":()=>o(()=>import("./CbuohPMR.js"),__vite__mapDeps([9,1]),import.meta.url),"../components/widgets/web/video/config.ts":()=>o(()=>import("./DPa9WQV5.js"),[],import.meta.url),"../components/widgets/web/warp-background/config.ts":()=>o(()=>import("./DbD1oP-w.js"),__vite__mapDeps([10,1]),import.meta.url),"../components/widgets/web/webpage/config.ts":()=>o(()=>import("./XqxjlI_u.js"),__vite__mapDeps([11,1]),import.meta.url)})]:[Object.assign({})];for(const l of s)for(const[c,m]of Object.entries(l)){const p=c.match(/\/(web|mobile)\/([^/]+)\/config\.ts$/);if(!p)continue;const w=p[2],f=await m(),_=Object.values(f).find(i=>i!=null&&typeof i=="object"&&"type"in i&&i.type===w);_&&w&&(A[w]=_,_.category?.id&&(H[_.category.id]=_.category))}}const se=O(()=>{const e=new Set(Object.values(A).map(s=>s.category?.id).filter(Boolean)),t=Object.values(H).filter(s=>e.has(s.id)),a=["basic","extension"];return t.sort((s,l)=>{const c=a.indexOf(s.id),m=a.indexOf(l.id);return c!==-1&&m!==-1?c-m:c!==-1&&m===-1?-1:c===-1&&m!==-1?1:0})}),ae=O(()=>e=>Object.values(A).filter(({category:t})=>t?.id===e).sort((t,a)=>t.order===void 0&&a.order!==void 0?1:t.order!==void 0&&a.order===void 0?-1:t.order!==void 0&&a.order!==void 0?t.order-a.order:0)),k={DEFAULT_WIDTH:1920,DEFAULT_HEIGHT:1080,MAX_HEIGHT:3e4,PADDING:40,SNAP_THRESHOLD:5,SAFE_AREA_WIDTH:1200},te={DEFAULT_WIDTH:375,DEFAULT_HEIGHT:667,MAX_HEIGHT:1e4,PADDING:16,SNAP_THRESHOLD:3,SAFE_AREA_WIDTH:343},E=g(k),oe=g("web");function ue(e){ee(e),oe.value=e,E.value=e==="web"?k:te}const I=h(E.value.DEFAULT_WIDTH),v=h(E.value.DEFAULT_HEIGHT);X(()=>E.value,e=>{I.value=e.DEFAULT_WIDTH,v.value=e.DEFAULT_HEIGHT},{immediate:!0});function ne(e){const t=h(!1),a=h({x:0,y:0}),s=h({width:I.value,height:v.value});function l(i){t.value=!0,a.value={x:i.clientX,y:i.clientY},s.value={width:I.value,height:v.value},document.addEventListener("mousemove",c),document.addEventListener("mouseup",m)}function c(i){if(!t.value)return;const D=e?.value||1,y=(i.clientY-a.value.y)/D,P=L().components.reduce((V,T)=>{const C=T.position.y+T.size.height;return Math.max(V,C)},0),R=Math.max(E.value.DEFAULT_HEIGHT,P),S=Math.max(R,Math.min(E.value.MAX_HEIGHT,s.value.height+y));p(s.value.width,Math.round(S))}function m(){const i=L();t.value=!1,i.configs.pageHeight=v.value,document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",m)}function p(i,D){I.value=i,v.value=D,console.log(i,D)}function w(){if(v.value<E.value.DEFAULT_HEIGHT){v.value=E.value.DEFAULT_HEIGHT;const i=L();i.configs.pageHeight=v.value;return}}function f(){const i=L();p(E.value.DEFAULT_WIDTH,i.configs.pageHeight)}const _=O(()=>({width:`${I.value}px`,height:`${v.value}px`}));return{designWidth:I,designHeight:v,isDraggingSize:t,designStyle:_,setDesignSize:p,resetDesignSize:f,changeDesignSize:w,handleSizeDragStart:l}}const x=ne(),L=Y("design",()=>{const e=g([]),t=g(null),a=g(null),s=g(!1),l=g(!1),c=g({backgroundColor:"#f6f7f8",backgroundDarkColor:"#1a1b1e",backgroundImage:"",backgroundType:"solid",pageHeight:x.designHeight.value}),m=g(""),p=g(""),w=g("web"),f=g("");function _(){return JSON.stringify({components:e.value,configs:c.value,projectName:p.value})}const i=O(()=>f.value?_()!==f.value:!1);function D(){e.value=[],t.value=null,a.value=null,l.value=!1,c.value={backgroundType:"solid",backgroundImage:"",backgroundColor:"#ffffff",backgroundDarkColor:"#1a1b1e",pageHeight:1080},m.value="",p.value="",f.value=""}const y=O(()=>e.value.find(n=>n.id===t.value));function G(n){const r={id:Z(),type:n.type,title:n.title,position:{...n.position},isHidden:n.isHidden,size:{...n.size},props:JSON.parse(JSON.stringify(n.props))};return e.value.push(r),T(r.id),r}function P(n,r){const d=e.value.find(b=>b.id===n);d&&(d.position=r)}function R(n,r){const d=e.value.find(b=>b.id===n);d&&(d.size.width=r.width,d.size.height=r.height)}function S(n,r){const d=e.value.find(b=>b.id===n);d?d.props={...d.props,...r}:console.warn("更新组件属性失败, component -->",d)}function V(n,r){const d=e.value.find(b=>b.id===n);d&&(d.isHidden=r)}function T(n){t.value=n}function C(n){e.value=e.value.filter(r=>r.id!==n),t.value=null}function N(n){a.value=n}async function z(n){m.value=n;const r=await W(n);return e.value=r.content,c.value=r.configs,x.setDesignSize(1920,r.configs.pageHeight),p.value=r.name,w.value=r.terminal,f.value=_(),r}async function j(){c.value.pageHeight=x.designHeight;const n=await B(m.value,{name:p.value,configs:c.value,content:e.value,terminal:w.value});return f.value=_(),n}return{components:e,activeComponent:y,draggedComponent:a,configs:c,projectName:p,showSafeArea:s,isCanvasSelected:l,isDirty:i,addComponent:G,updatePosition:P,updateSize:R,updateProperties:S,updateVisible:V,setActiveComponent:T,removeComponent:C,setDraggedComponent:N,resetState:D,getPages:z,savePages:j}});export{E as D,ae as a,ne as b,se as g,ee as i,ue as s,L as u};
