import C from"./cd55qm53.js";import{_ as N}from"./D_3bTjYR.js";import{d as U,i as D,at as K,l as g,n as k,p as M,f as q,o as z,w as s,x as c,t as u,g as e,bD as F,v as I,D as h,z as d,_ as L,A as w,r as R}from"#entry";import{_ as S}from"./Ghlq83yM.js";import"./D9sX2Qi6.js";import"./DQMjdCEn.js";import"./OUYfsp1i.js";import"./BFo3vNrE.js";import"./CuVAPZQ8.js";import"./Z7qkLoXK.js";import"./CjE5iPSn.js";import"./D9UsdH-b.js";import"./MCK2d4XT.js";import"./EK7Wbu3-.js";const T={class:"py-2"},j={class:"text-muted-foreground mt-2 text-xs"},A={class:"flex justify-end gap-2"},ne=U({__name:"nickname-modal",props:{currentValue:{},loading:{type:Boolean}},emits:["success"],setup(f,{emit:V}){const m=f,x=V,{t}=D(),y=K(),r=g(!1),n=g(m.currentValue||""),i=k(()=>{const o=n.value.trim();return o?o.length>20?t("user.frontend.profile.nicknameTooLong"):"":t("user.frontend.profile.nicknameRequired")}),p=k(()=>{const o=m.currentValue||"";return n.value.trim()!==o.trim()});M(()=>r.value,o=>{o&&(n.value=m.currentValue||"")});async function _(){if(i.value){y.warning(i.value);return}if(!p.value)return;const o=n.value.trim();x("success",o),r.value=!1}return(o,a)=>{const B=C,$=N,v=L,b=S;return z(),q(b,{open:e(r),"onUpdate:open":a[2]||(a[2]=l=>h(r)?r.value=l:null),title:e(t)("user.frontend.profile.editNickname"),width:"sm","show-footer":!0},{trigger:s(()=>[R(o.$slots,"default")]),footer:s(()=>[c("div",A,[u(v,{variant:"soft",onClick:a[1]||(a[1]=l=>r.value=!1)},{default:s(()=>[w(d(e(t)("console-common.cancel")),1)]),_:1}),u(v,{disabled:!e(p)||!!e(i),color:"primary",loading:f.loading,onClick:_},{default:s(()=>[w(d(e(t)("console-common.save")),1)]),_:1},8,["disabled","loading"])])]),default:s(()=>[c("div",T,[u($,{label:e(t)("user.frontend.profile.nickname"),size:"lg",required:"",error:e(i)},{default:s(()=>[u(B,{modelValue:e(n),"onUpdate:modelValue":a[0]||(a[0]=l=>h(n)?n.value=l:null),placeholder:e(t)("user.frontend.profile.nicknamePlaceholder"),maxlength:"20",ui:{root:"w-full"},onKeydown:F(I(_,["prevent"]),["enter"])},null,8,["modelValue","placeholder","onKeydown"])]),_:1},8,["label","error"]),c("div",j,d(e(t)("user.frontend.profile.nicknameLength")),1)])]),_:3},8,["open","title"])}}});export{ne as default};
