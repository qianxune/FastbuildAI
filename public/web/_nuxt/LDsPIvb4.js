import{d as D,i as I,s as g,n as x,q as Q,f as T,o as d,w as o,c as m,y as _,z as r,g as i,x as n,t as s,A as j,_ as F,B as G,G as O,C as R,aY as Y}from"#entry";import{_ as H}from"./DbqqhwXM.js";import{_ as J}from"./bvMLy1sv.js";import{_ as K}from"./Ce6s6j9m.js";import{a as L}from"./Cj1H12mz.js";import{u as P}from"./BlyoSzaa.js";import"./DNSLGqNg.js";import"./psimjGaX.js";import"./CuVAPZQ8.js";import"./B3rWqoNg.js";import"./EK7Wbu3-.js";import"./D9sX2Qi6.js";import"./CAQVAH0V.js";import"./Deu6qIfg.js";import"./CBTz8tdX.js";import"./DMoqg0Fd.js";import"./CtosDvS0.js";import"./kRIii9yh.js";import"./Z7qkLoXK.js";import"./C6Y-ieo6.js";import"./BFo3vNrE.js";import"./DeCyaT7k.js";import"./D4e4FYoF.js";import"./BCcN9pii.js";import"./CMKSl-Ng.js";import"./Y67jy4iF.js";import"./CjasYwqF.js";import"./DBEJUH-Z.js";const W={key:0,class:"bg-primary absolute top-3 -left-6 w-22 -rotate-45 text-center text-xs font-bold text-white shadow-md"},X={class:"flex items-center gap-4"},Z={class:"flex h-12 flex-col justify-start"},ee={class:"text-secondary-foreground flex items-center text-base font-semibold"},te={class:"line-clamp-1"},ce=["href"],oe={class:"line-clamp-1"},ne={class:"max-w-100"},re={key:0,class:"text-muted-foreground line-clamp-2 text-xs"},ie={key:1,class:"text-muted-foreground line-clamp-2 text-xs"},se={class:"max-w-100"},ae={key:0,class:"flex flex-row items-center gap-1.5"},le={class:"line-clamp-2 text-xs text-red-500"},de={class:"flex items-center justify-between gap-2"},me={class:"flex items-center gap-1"},je=D({__name:"mcp-server-card",props:{mcpServer:{},selected:{type:Boolean,default:!1},isUpdate:{}},emits:["select","delete","edit","set-quick-menu","view-models","toggle-active"],setup(e,{emit:y}){const c=e,a=y,{t:l}=I(),{hasAccessByCodes:f}=P(),p=g(""),S=g(""),w=async()=>{const t=await L(c.mcpServer.id);p.value=t.connectable,S.value=t.error},C=x(()=>p.value===""?c.mcpServer.connectable:p.value),u=x(()=>p.value===""?c.mcpServer.connectError:S.value),U=x(()=>{const t=[];return f(["ai-provider.backends:update"])&&t.push({label:l("console-common.edit"),icon:"i-lucide-edit",onSelect:()=>a("edit",c.mcpServer)}),f(["ai-provider.backends:update"])&&!c.mcpServer.isQuickMenu&&t.push({label:l("ai-mcp.backend.setQuickMenu"),icon:"i-lucide-star",onSelect:()=>a("set-quick-menu",c.mcpServer)}),f(["ai-provider.backends:delete"])&&(t.length>0&&t.push({type:"separator",label:"",onSelect:()=>{}}),t.push({label:l("console-common.delete"),icon:"i-lucide-trash-2",color:"error",onSelect:()=>a("delete",c.mcpServer)})),t});function B(){a("view-models",c.mcpServer.id)}function z(t){typeof t=="boolean"&&a("select",c.mcpServer,t)}function $(t){return t?/^https?:\/\//i.test(t)?t:"https://"+t:"#"}return Q(()=>{c.isUpdate?.includes(c.mcpServer.id)&&(w(),c.isUpdate?.splice(c.isUpdate.indexOf(c.mcpServer.id),1))}),(t,b)=>{const M=O,N=Y,v=H,k=G,A=J,V=F,q=K;return d(),T(q,{class:"flex flex-col overflow-hidden",selectable:"",clickable:"","show-actions":"",variant:"outlined",selected:e.selected,actions:i(U),onSelect:z},{icon:o(({groupHoverClass:h,selectedClass:E})=>[n("div",X,[s(N,{color:i(C)?"success":"error",position:"top-right"},{default:o(()=>[s(M,{src:e.mcpServer.icon,alt:e.mcpServer.name,size:"3xl",ui:{root:"rounded-lg",fallback:"text-inverted"},class:R([h,E,e.mcpServer.icon?"":"bg-primary"])},null,8,["src","alt","class"])]),_:2},1032,["color"]),n("div",Z,[n("h3",ee,[s(v,{text:e.mcpServer.name,delay:0},{default:o(()=>[n("span",te,r(e.mcpServer.alias||e.mcpServer.name),1)]),_:1},8,["text"])]),e.mcpServer.providerName?(d(),m("a",{key:0,href:$(e.mcpServer.providerUrl),class:"text-muted-foreground hover:text-primary group/a flex items-center gap-1 text-xs hover:underline",target:"_blank",rel:"noopener noreferrer"},[n("span",oe," @ "+r(e.mcpServer.providerName),1),s(k,{name:"tabler:external-link",class:"flex-none opacity-0 group-hover/a:opacity-100",size:"12"})],8,ce)):_("",!0)])])]),description:o(()=>[s(v,{disabled:!e.mcpServer.description,"delay-duration":0,ui:{content:"max-w-100 !whitespace-pre-wrap leading-relaxed h-fit p-2"}},{content:o(()=>[n("div",ne,r(e.mcpServer.description),1)]),default:o(()=>[e.mcpServer.description?(d(),m("h4",re,r(e.mcpServer.description),1)):(d(),m("h4",ie,r(i(l)("ai-mcp.backend.noDescription")),1))]),_:1},8,["disabled"]),s(v,{text:i(u),ui:{content:"max-w-100 !whitespace-pre-wrap leading-relaxed h-fit p-2"},"delay-duration":0},{content:o(()=>[n("div",se,r(i(u)),1)]),default:o(()=>[i(u)?(d(),m("div",ae,[s(k,{name:"tabler:plug-connected-x",size:"16",class:"text-red-500"}),n("h4",le,r(i(u)),1)])):_("",!0)]),_:1},8,["text"])]),footer:o(()=>[n("div",de,[s(A,{"model-value":!e.mcpServer.isDisabled,"onUpdate:modelValue":b[0]||(b[0]=h=>a("toggle-active",e.mcpServer.id,!h)),"unchecked-icon":"i-lucide-x","checked-icon":"i-lucide-check",size:"md"},null,8,["model-value"]),n("div",me,[s(V,{icon:"i-lucide-eye",variant:"ghost",size:"sm",onClick:B},{default:o(()=>[j(r(i(l)("console-common.check")),1)]),_:1})])])]),default:o(()=>[e.mcpServer.isQuickMenu?(d(),m("div",W,r(i(l)("ai-mcp.backend.quickMenu")),1)):_("",!0)]),_:1},8,["selected","actions"])}}});export{je as default};
