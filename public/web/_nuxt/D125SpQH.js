import{d as K,at as T,i as A,av as B,aM as E,aQ as L,n as C,aN as V,q as N,c as S,f as z,g as e,o as h,t as l,B as j,w as s,x as i,G as M,z as c,D as G,A as q,_ as Y}from"#entry";import{_ as Q}from"./bvMLy1sv.js";import J from"./cd55qm53.js";import{_ as O}from"./D_3bTjYR.js";import W from"./4jjeIyfe.js";import{_ as X}from"./DD8ySyt7.js";import{P as I}from"./CClQHGwT.js";import{P as Z,a as ee,b as ae}from"./DqafFsSA.js";import{c as P,e as oe,b as d}from"./FTderXKt.js";import"./D9sX2Qi6.js";import"./CAQVAH0V.js";import"./Deu6qIfg.js";import"./DaWZu8wl.js";const te={key:0,class:"flex justify-center py-12"},le={class:"grid grid-cols-1 gap-8 p-1 lg:grid-cols-3"},ne={class:"shadow-default h-fit rounded-lg lg:col-span-1"},ie={class:"flex flex-col items-center space-y-4",style:{padding:"80px 24px 40px"}},re={class:"flex items-start gap-4"},se={class:"mt-6 px-12 text-center text-xs"},pe={class:"text-muted-foreground"},ce={class:"mt-6 flex w-full items-center justify-between"},de={class:"text-secondary-foreground text-sm font-medium"},me={class:"text-muted-foreground mt-2 text-xs"},ue={class:"mt-6 flex w-full items-center justify-between"},fe={class:"text-secondary-foreground text-sm font-medium"},ye={class:"text-muted-foreground mt-2 text-xs"},ge={class:"shadow-default space-y-6 rounded-lg p-6 lg:col-span-2"},_e={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},be={class:"flex justify-end gap-4"},Fe=K({__name:"ali-pay",setup(ve){const u=T(),{t:a}=A(),f=B(),k=E(),o=L({id:"",name:"",logo:"",isEnable:1,isDefault:0,sort:0,payType:I.ALIPAY,config:{appId:"",gateway:"",privateKey:"",appCert:"",alipayPublicCert:"",alipayRootCert:""}}),g=C(()=>{const r=o.payType;return Z[r]??"未知支付方式"}),b=C(()=>k.query.id),{lockFn:U,isLock:_}=V(async()=>{if(!b.value){u.error(a("payment-config.form.getPayconfigDetailFailedHelp")),f.back();return}try{const r=await ee(b.value,I.ALIPAY);o.id=r.id,o.name=r.name,o.logo=r.logo,o.isEnable=r.isEnable,o.isDefault=r.isDefault,o.sort=r.sort,r.config&&(o.config=r.config)}catch{u.error(a("payment-config.form.getPayconfigDetailFailed")),f.back()}});N(()=>{U()});const{lockFn:R,isLock:v}=V(async()=>{try{await ae(o),u.success(a("payment-config.form.updateSuccess")),f.back()}catch(r){u.error(a("payment-config.form.updateFailed")),console.log(r)}}),D=P({name:d().required(a("payment-config.validation.nameRequired")),sort:oe().required(a("payment-config.validation.sortRequired")),config:P({appId:d().required(a("payment-config.validation.appIdRequired")),gateway:d().url(a("payment-config.validation.gatewayUrl")),privateKey:d().required(a("payment-config.validation.privateKeyRequired")),appCert:d().required(a("payment-config.validation.appCertRequired")),alipayPublicCert:d().required(a("payment-config.validation.alipayPublicCertRequired")),alipayRootCert:d().required(a("payment-config.validation.alipayRootCertRequired"))}).required()});return(r,t)=>{const $=j,F=M,w=Q,m=J,p=O,y=W,x=Y,H=X;return e(_)?(h(),S("div",te,[l($,{name:"i-lucide-loader-2",class:"text-primary-500 h-8 w-8 animate-spin"})])):(h(),z(H,{key:1,state:e(o),schema:e(D),class:"space-y-8",onSubmit:e(R)},{default:s(()=>[i("div",le,[i("div",ne,[i("div",ie,[i("div",re,[l(F,{src:e(o).logo,alt:"Alipay",class:"h-32 w-32",ui:{root:"rounded-lg"}},null,8,["src"])]),i("div",se,[i("p",pe,c(e(a)("payment-config.form.avatarFormats")),1)]),i("div",ce,[i("div",null,[i("h4",de,c(e(a)("payment-config.form.enable")),1),i("p",me,c(e(a)("payment-config.form.alipayEnableHelp")),1)]),l(w,{"model-value":!!e(o).isEnable,"unchecked-icon":"i-lucide-x","checked-icon":"i-lucide-check","onUpdate:modelValue":t[0]||(t[0]=n=>e(o).isEnable=Number(n))},null,8,["model-value"])]),i("div",ue,[i("div",null,[i("h4",fe,c(e(a)("payment-config.form.isDefault")),1),i("p",ye,c(e(a)("payment-config.form.isDefaultHelp")),1)]),l(w,{"model-value":!!e(o).isDefault,"unchecked-icon":"i-lucide-x","checked-icon":"i-lucide-check","onUpdate:modelValue":t[1]||(t[1]=n=>e(o).isDefault=Number(n))},null,8,["model-value"])])])]),i("div",ge,[i("div",_e,[l(p,{label:e(a)("payment-config.form.payway"),name:"payway"},{default:s(()=>[l(m,{modelValue:e(g),"onUpdate:modelValue":t[2]||(t[2]=n=>G(g)?g.value=n:null),placeholder:e(a)("payment-config.form.payway"),disabled:!0,variant:"subtle",class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(p,{label:e(a)("payment-config.form.name"),name:"name",required:""},{default:s(()=>[l(m,{modelValue:e(o).name,"onUpdate:modelValue":t[3]||(t[3]=n=>e(o).name=n),placeholder:e(a)("payment-config.form.nameInput"),class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(p,{label:e(a)("payment-config.form.appId"),name:"config.appId",required:"",description:e(a)("payment-config.form.appIdHelp")},{default:s(()=>[l(m,{modelValue:e(o).config.appId,"onUpdate:modelValue":t[4]||(t[4]=n=>e(o).config.appId=n),placeholder:e(a)("payment-config.form.appIdInput"),class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),l(p,{label:e(a)("payment-config.form.gateway"),name:"config.gateway",description:e(a)("payment-config.form.gatewayHelp")},{default:s(()=>[l(m,{modelValue:e(o).config.gateway,"onUpdate:modelValue":t[5]||(t[5]=n=>e(o).config.gateway=n),placeholder:e(a)("payment-config.form.gatewayInput")||"https://openapi.alipay.com/gateway.do",class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),l(p,{label:e(a)("payment-config.form.privateKey"),name:"config.privateKey",required:"",description:e(a)("payment-config.form.privateKeyHelp")},{default:s(()=>[l(y,{modelValue:e(o).config.privateKey,"onUpdate:modelValue":t[6]||(t[6]=n=>e(o).config.privateKey=n),placeholder:e(a)("payment-config.form.privateKeyInput"),class:"w-full",autoresize:"",maxrows:3},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),l(p,{label:e(a)("payment-config.form.appCert"),name:"config.appCert",required:"",description:e(a)("payment-config.form.appCertHelp")},{default:s(()=>[l(y,{modelValue:e(o).config.appCert,"onUpdate:modelValue":t[7]||(t[7]=n=>e(o).config.appCert=n),placeholder:e(a)("payment-config.form.appCertInput"),class:"w-full",autoresize:"",maxrows:3},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),l(p,{label:e(a)("payment-config.form.alipayPublicCert"),name:"config.alipayPublicCert",required:"",description:e(a)("payment-config.form.alipayPublicCertHelp")},{default:s(()=>[l(y,{modelValue:e(o).config.alipayPublicCert,"onUpdate:modelValue":t[8]||(t[8]=n=>e(o).config.alipayPublicCert=n),placeholder:e(a)("payment-config.form.alipayPublicCertInput"),class:"w-full",autoresize:"",maxrows:3},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),l(p,{label:e(a)("payment-config.form.alipayRootCert"),name:"config.alipayRootCert",required:"",description:e(a)("payment-config.form.alipayRootCertHelp")},{default:s(()=>[l(y,{modelValue:e(o).config.alipayRootCert,"onUpdate:modelValue":t[9]||(t[9]=n=>e(o).config.alipayRootCert=n),placeholder:e(a)("payment-config.form.alipayRootCertInput"),class:"w-full",autoresize:"",maxrows:3},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),l(p,{label:e(a)("payment-config.form.sort"),name:"sort",required:"",description:e(a)("payment-config.form.sortHelp")},{default:s(()=>[l(m,{modelValue:e(o).sort,"onUpdate:modelValue":t[10]||(t[10]=n=>e(o).sort=n),class:"w-full"},null,8,["modelValue"])]),_:1},8,["label","description"])]),i("div",be,[l(x,{color:"neutral",variant:"outline",onClick:t[11]||(t[11]=n=>e(f).back()),class:"px-8",loading:e(_)||e(v)},{default:s(()=>[q(c(e(a)("console-common.cancel")),1)]),_:1},8,["loading"]),l(x,{color:"primary",loading:e(_)||e(v),type:"submit",class:"px-8"},{default:s(()=>[q(c(e(a)("console-common.update")),1)]),_:1},8,["loading"])])])])]),_:1},8,["state","schema","onSubmit"]))}}});export{Fe as default};
