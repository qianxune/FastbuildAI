import{_ as R}from"./DO9M7gn1.js";import{d as N,at as D,s as g,i as L,aN as A,f as v,o as b,w as u,t as i,x as r,g as n,D as k,y as $,B as S,z as d,_ as j,A as h}from"#entry";import{_ as T}from"./Da83zglB.js";import q from"./cd55qm53.js";import{_ as M}from"./D_3bTjYR.js";import{_ as P}from"./Ghlq83yM.js";import{k as E,l as G}from"./Dm8J87dm.js";import{u as H}from"./CRu9at2N.js";import"./CtosDvS0.js";import"./CuVAPZQ8.js";import"./BCcN9pii.js";import"./CMKSl-Ng.js";import"./DBEJUH-Z.js";import"./o4ws_w_T.js";import"./9Q2Y_nd6.js";import"./td2xDKru.js";import"./RPflLnqr.js";import"./TrJvDfxI.js";import"./jsPNKUA0.js";import"./abPSHzII.js";import"./D9sX2Qi6.js";import"./DQMjdCEn.js";import"./OUYfsp1i.js";import"./BFo3vNrE.js";import"./Z7qkLoXK.js";import"./CjE5iPSn.js";import"./D9UsdH-b.js";import"./MCK2d4XT.js";import"./EK7Wbu3-.js";const J={class:"py-10"},K={class:"hover:bg-accent border-muted group flex h-full w-full items-center gap-2 rounded-md border"},O={class:"ml-4 flex size-8 flex-none items-center justify-center gap-2"},Q={class:"flex w-full flex-col justify-center truncate pr-4"},W={class:"truncate text-sm font-medium"},X={class:"text-muted-foreground text-xs"},Y={class:"absolute right-4 hidden group-hover:block"},Z={class:"flex justify-end gap-2"},Fe=N({__name:"agent-dsl-import",emits:["close"],setup(ee,{emit:w}){const p=w,m=D(),l=g("file"),a=g([]),s=g(""),{t:c}=L(),{lockFn:I,isLock:y}=A(async()=>{if(l.value==="file"&&(!a.value||a.value.length===0)){m.error(c("ai-agent.backend.dslImport.errors.fileRequired"));return}if(l.value==="url"&&!s.value){m.error(c("ai-agent.backend.dslImport.errors.urlRequired"));return}else if(l.value==="url"&&s.value){const e=await H({url:s.value,description:`Remote file: ${s.value}`});s.value=e.url}try{if(l.value==="file"){const e=await E({contents:a.value,format:"yaml"});if(e.success>0)e.failed>0?m.warning(c("ai-agent.backend.dslImport.partialSuccess",{success:e.success,total:e.total})):m.success(c("ai-agent.backend.dslImport.batchSuccess",{count:e.success}));else return}else await G({content:s.value,format:"yaml"}),m.success(c("ai-agent.backend.dslImport.success"));p("close",!0)}catch(e){console.error("DSL import error:",e)}}),x=e=>{a.value=a.value.filter((t,f)=>f!==e)};return(e,t)=>{const f=R,V=S,_=j,C=T,U=q,B=M,z=P;return b(),v(z,{title:e.$t("ai-agent.backend.dslImport.title"),description:e.$t("ai-agent.backend.dslImport.description"),ui:{content:"max-w-lg"},onClose:t[4]||(t[4]=o=>p("close",!1))},{default:u(()=>[i(f,{modelValue:n(l),"onUpdate:modelValue":t[0]||(t[0]=o=>k(l)?l.value=o:null),size:"md",variant:"link",content:!1,items:[{label:e.$t("ai-agent.backend.dslImport.tabs.file"),value:"file"},{label:e.$t("ai-agent.backend.dslImport.tabs.url"),value:"url"}],ui:{trigger:"px-0! mr-5!"},class:"w-auto"},null,8,["modelValue","items"]),r("div",J,[n(l)==="file"?(b(),v(C,{key:0,modelValue:n(a),"onUpdate:modelValue":t[1]||(t[1]=o=>k(a)?a.value=o:null),accept:".yaml,.yml",multiple:!0,single:!1,icon:"i-lucide-cloud-upload",showPreviewButton:!1,addButtonClassName:"flex-row",class:"bg-muted h-14 w-full border-none! shadow-none! ring-0!"},{"file-item":u(({item:o,index:F})=>[r("div",K,[r("div",O,[i(V,{name:"bd:yml",class:"text-muted-foreground size-6 flex-none"})]),r("div",Q,[r("p",W,d(o.name),1),r("p",X,d(o.extension?.toUpperCase()),1)]),r("div",Y,[i(_,{color:"error",variant:"soft",size:"sm",icon:"i-lucide-trash",onClick:te=>x(F)},null,8,["onClick"])])])]),_:1},8,["modelValue"])):$("",!0),n(l)==="url"?(b(),v(B,{key:1,label:e.$t("ai-agent.backend.dslImport.form.urlLabel"),name:"url"},{default:u(()=>[i(U,{modelValue:n(s),"onUpdate:modelValue":t[2]||(t[2]=o=>k(s)?s.value=o:null),ui:{root:"w-full"},variant:"soft",size:"lg",placeholder:e.$t("ai-agent.backend.dslImport.form.urlPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):$("",!0)]),r("div",Z,[i(_,{color:"neutral",variant:"soft",size:"lg",onClick:t[3]||(t[3]=o=>p("close",!1))},{default:u(()=>[h(d(e.$t("console-common.cancel")),1)]),_:1}),i(_,{color:"primary",size:"lg",loading:n(y),onClick:n(I)},{default:u(()=>[h(d(e.$t("console-common.create")),1)]),_:1},8,["loading","onClick"])])]),_:1},8,["title","description"])}}});export{Fe as default};
