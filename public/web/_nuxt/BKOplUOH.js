import{d as L,av as T,i as q,j as D,n as h,f,o as i,w as a,x as r,t as n,g as u,B as P,z as c,c as b,y as E,A as v,G,C as M,aY as Y}from"#entry";import{_ as F}from"./DbqqhwXM.js";import{_ as H}from"./o4ws_w_T.js";import{_ as J}from"./DBiaUVBh.js";import{_ as K}from"./Ce6s6j9m.js";import{u as O}from"./BlyoSzaa.js";import{u as C}from"./CxvgZo8z.js";import"./DNSLGqNg.js";import"./psimjGaX.js";import"./CuVAPZQ8.js";import"./B3rWqoNg.js";import"./EK7Wbu3-.js";import"./CBTz8tdX.js";import"./DMoqg0Fd.js";import"./CtosDvS0.js";import"./kRIii9yh.js";import"./Z7qkLoXK.js";import"./C6Y-ieo6.js";import"./BFo3vNrE.js";import"./DeCyaT7k.js";import"./D4e4FYoF.js";import"./BCcN9pii.js";import"./CMKSl-Ng.js";import"./Y67jy4iF.js";import"./CjasYwqF.js";import"./CAQVAH0V.js";import"./DBEJUH-Z.js";import"./Deu6qIfg.js";import"./D9sX2Qi6.js";const Q={class:"text-secondary-foreground flex items-center text-base font-semibold"},W={class:"line-clamp-1"},X={class:"text-muted-foreground mr-2 text-sm"},Z={class:"text-muted-foreground text-xs"},ee={class:"border-default border-t border-dashed pt-4 text-center text-xs"},se={class:"grid grid-cols-2 gap-2 gap-y-3 text-left"},te={class:"flex items-center gap-2"},oe={class:"text-muted-foreground"},re={class:"flex items-center gap-2"},ce={key:0,class:"text-muted-foreground"},ae={key:1,class:"text-muted-foreground"},ne={class:"flex items-center gap-2"},ie={class:"text-muted-foreground"},ue={class:"flex items-center gap-2"},le={class:"text-muted-foreground"},de={key:1},Ge=L({__name:"user-card",props:{user:{},selected:{type:Boolean,default:!1}},emits:["select","delete","edit-power","adjust-membership"],setup(e,{emit:w}){const l=w,s=e,k=T(),{t}=q(),{hasAccessByCodes:p}=O(),d=D();function S(o){typeof o=="boolean"&&l("select",s.user,o)}function B(o){switch(o){case 1:return{label:t("user.backend.status.active"),color:"success",icon:"i-lucide-check-circle"};case 0:return{label:t("user.backend.status.inactive"),color:"error",icon:"i-lucide-x-circle"};default:return{label:t("user.backend.status.unknown"),color:"warning",icon:"i-lucide-help-circle"}}}function I(o){switch(o){case 0:return{label:t("user.backend.source.console"),icon:"i-lucide-user-plus"};case 1:return{label:t("user.backend.source.phone"),icon:"i-lucide-smartphone"};case 2:return{label:t("user.backend.source.wechat"),icon:"i-lucide-message-circle"};case 3:return{label:t("user.backend.source.email"),icon:"i-lucide-mail"};case 4:return{label:t("user.backend.source.username"),icon:"i-lucide-user-check"};default:return{label:t("user.backend.source.unknown"),icon:"i-lucide-help-circle"}}}const R=h(()=>{const o=[];return p(["users:update"])&&(s.user.isRoot!==1||d.userInfo?.isRoot===1&&s.user.id===d.userInfo.id)&&(o.push({label:t("user.backend.editProfile"),icon:"i-lucide-user-round-pen",onSelect:()=>k.push({path:C("users:update"),query:{id:s.user.id}})}),o.push({label:t("user.backend.adjustBalance"),icon:"i-lucide-edit",onSelect:()=>l("edit-power",s.user)}),o.push({label:t("user.backend.membership.adjustMembership"),icon:"i-lucide-edit",onSelect:()=>l("adjust-membership",s.user)})),p(["users:delete"])&&s.user.isRoot!==1&&o.push({label:t("user.backend.deleteUser"),icon:"i-lucide-trash-2",color:"error",onSelect:()=>l("delete",s.user)}),o}),_=h(()=>B(s.user.status)),g=h(()=>I(s.user.source));function z(){console.log("handleCardClick",s.user),p(["users:update"])&&(s.user.isRoot!==1||d.userInfo?.isRoot===1&&s.user.id===d.userInfo.id)&&k.push({path:C("users:update"),query:{id:s.user.id}})}return(o,me)=>{const U=G,$=Y,A=F,x=H,m=P,y=J,N=K;return i(),f(N,{selectable:s.user.isRoot!==1,"show-actions":"",variant:"outlined",selected:e.selected,actions:u(R),clickable:!0,onSelect:S,onClick:z},{icon:a(({groupHoverClass:j,selectedClass:V})=>[n($,{position:"top-right",color:"success"},{default:a(()=>[n(U,{src:e.user.avatar,alt:e.user.nickname||e.user.username,size:"3xl",ui:{root:"rounded-lg",fallback:"text-inverted"},class:M([j,V,e.user.avatar?"":"bg-primary"])},null,8,["src","alt","class"])]),_:2},1024)]),title:a(()=>[r("h3",Q,[n(A,{text:e.user.nickname,delay:0},{default:a(()=>[r("span",W,c(e.user.nickname),1)]),_:1},8,["text"]),r("span",X,"(@"+c(e.user.username)+")",1),e.user.isRoot?(i(),f(x,{key:0,color:"warning",size:"sm",class:"ml-auto shrink-0"},{default:a(()=>[v(c(o.$t("user.backend.admin")),1)]),_:1})):e.user.role?(i(),f(x,{key:1,color:"primary",size:"sm",class:"ml-auto shrink-0"},{default:a(()=>[v(c(e.user.role.name),1)]),_:1})):E("",!0)])]),description:a(()=>[r("h4",Z,c(o.$t("user.backend.userNo"))+": "+c(e.user.userNo||u(t)("user.backend.notSet")),1)]),details:a(()=>[r("div",ee,[r("div",se,[r("div",te,[n(m,{name:u(_).icon,class:"text-muted-foreground size-3"},null,8,["name"]),r("span",oe,c(u(_).label),1)]),r("div",re,[n(m,{name:u(g).icon,class:"text-muted-foreground size-3"},null,8,["name"]),e.user.isRoot===1?(i(),b("span",ce," - ")):(i(),b("span",ae,c(u(g).label),1))]),r("div",ne,[n(m,{name:"i-lucide-clock",class:"text-muted-foreground size-3"}),r("span",ie,[n(y,{datetime:e.user.createdAt,mode:"date"},null,8,["datetime"])])]),r("div",ue,[n(m,{name:"i-lucide-clock-alert",class:"text-muted-foreground size-3"}),r("span",le,[e.user.lastLoginAt?(i(),f(y,{key:0,datetime:e.user.lastLoginAt,mode:"date"},null,8,["datetime"])):(i(),b("span",de,c(u(t)("user.backend.neverLogin")),1))])])])])]),_:1},8,["selectable","selected","actions"])}}});export{Ge as default};
