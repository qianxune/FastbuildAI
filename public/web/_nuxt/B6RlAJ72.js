import{d as w,aM as g,n as i,l as f,p as U,J as d,q as _,ai as k,a$ as y,c as E,g as p,o as R}from"#entry";const T=["src","title"],C=w({__name:"[...all]",setup(W){const l=g(),n=i(()=>l.fullPath.match(/\/app\/([^/]+)\/console/)?.[1]||""),r=i(()=>l.fullPath.match(/\/app\/[^/]+\/console\/(.*)$/)?.[1]?.replace(/\/$/,"")||""),h=i(()=>{if(!n.value)return"/extension/console";const e=`/extension/${n.value}/console`;return r.value?`${e}/${r.value}`:e}),o=f(null),c=f(!1),s=f(!1),v=e=>e?`/app/${n.value}/console/${e}`:`/app/${n.value}/console`,m=e=>{l.path!==e&&(s.value=!0,window.history.replaceState({...window.history.state},"",e),d(()=>{s.value=!1}))},$=()=>{if(!(!o.value?.contentWindow||c.value||s.value))try{const{pathname:e,search:t,hash:u}=o.value.contentWindow.location,a=(e+t+u).match(/^\/extension\/[^/]+\/console\/(.*)$/);m(v(a?.[1]||""))}catch{}};return U(()=>r.value,e=>{if(!o.value||s.value)return;const t=e?`/extension/${n.value}/console/${e}`:`/extension/${n.value}/console`;o.value.src.endsWith(t)||(c.value=!0,o.value.src=t,d(()=>{c.value=!1}))}),_(()=>{const e=t=>{const{type:u,path:a}=t.data||{};if(u!=="extension-navigation"||!a)return;const x=a.startsWith("console/")?a.replace(/^console\/?/,""):a;m(v(x))};window.addEventListener("message",e),k(()=>window.removeEventListener("message",e))}),y({title:`Extension Console: ${n.value}`,meta:[{name:"description",content:`Extension console: ${n.value}`}]}),(e,t)=>(R(),E("iframe",{ref_key:"iframeRef",ref:o,src:p(h),class:"h-full w-full border-0",title:`Extension Console: ${p(n)}`,onLoad:t[0]||(t[0]=()=>("nextTick"in e?e.nextTick:p(d))($))},null,40,T))}});export{C as default};
