import{_ as W}from"./DO9M7gn1.js";import B from"./cd55qm53.js";import{_ as L}from"./D_3bTjYR.js";import{aF as N,aJ as G,d as J,i as M,at as H,b4 as P,s as S,l as Q,n as X,aN as D,q as Y,c as Z,o as ee,x as s,t as l,g as e,D as ae,w as c,H as g,I as O,z as r,_ as oe,A as h}from"#entry";import{_ as le}from"./Co1Njv5N.js";import{_ as ne}from"./DD8ySyt7.js";import{c as te,b as x}from"./FTderXKt.js";import"./CtosDvS0.js";import"./CuVAPZQ8.js";import"./BCcN9pii.js";import"./CMKSl-Ng.js";import"./DBEJUH-Z.js";import"./o4ws_w_T.js";import"./D9sX2Qi6.js";import"./CAQVAH0V.js";import"./Deu6qIfg.js";import"./DaWZu8wl.js";function se(){return N("/wxoaconfig")}function ce(v){return G("/wxoaconfig",v)}const ie={class:"wechatoa"},me={class:"mb-4 inline-block w-auto"},re={class:"mb-4 w-auto lg:max-w-2xl xl:max-w-4xl"},de={class:"information-container mx-auto mt-4"},pe={class:"mb-4 flex flex-col justify-center"},ue={class:"text-xl font-semibold"},he={class:"text-muted-foreground mt-1 text-sm"},fe={class:"information-container mx-auto mt-4"},be={class:"mb-4 flex flex-col justify-center"},we={class:"text-xl font-semibold"},Ae={class:"information-container mx-auto mt-4"},ye={class:"mb-4 flex flex-col justify-center"},_e={class:"text-xl font-semibold"},ge={class:"flex space-x-3 pt-4"},$e=J({__name:"index",setup(v){const{t:a}=M(),f=H(),{copy:E}=P(),u=S("0"),k=S(),o=Q({appId:"",appSecret:"",url:"",token:"",encodingAESKey:"",messageEncryptType:"plain",domain:"",jsApiDomain:"",webAuthDomain:""}),T=X(()=>[{name:"info",label:a("channel.wechatOA.tabs.info")},{name:"setting",label:a("channel.wechatOA.tabs.setting")},{name:"function",label:a("channel.wechatOA.tabs.function")}]);async function A(d,n){if(d)try{await E(d),f.success(a(n))}catch(w){console.error("复制失败:",w),f.error(a("console-common.messages.copyFailed"))}}const U=()=>A(o.value.url,"channel.wechatOA.actions.copySuccess"),C=()=>A(o.value.domain,"channel.wechatOA.actions.copyDomainSuccess"),I=()=>A(o.value.jsApiDomain,"channel.wechatOA.actions.copyJsApiDomainSuccess"),j=()=>A(o.value.webAuthDomain,"channel.wechatOA.actions.copyWebAuthDomainSuccess"),y={plain:"plain",compatible:"compatible",safe:"safe"},z=[{label:a("channel.wechatOA.messageEncryptType.plain"),value:y.plain},{label:a("channel.wechatOA.messageEncryptType.compatible"),value:y.compatible},{label:a("channel.wechatOA.messageEncryptType.safe"),value:y.safe}],q=te({appId:x().required(a("channel.wechatOA.validation.appId.required")),appSecret:x().required(a("channel.wechatOA.validation.appSecret.required")),messageEncryptType:x().required(a("channel.wechatOA.validation.messageEncryptType.required"))}),{lockFn:V,isLock:b}=D(async()=>{const d=await se();o.value={...d}}),{isLock:_,lockFn:F}=D(async()=>{try{const{appId:d,appSecret:n,token:w,encodingAESKey:m,messageEncryptType:i}=o.value;await ce({appId:d,appSecret:n,token:w,encodingAESKey:m,messageEncryptType:i}),f.success(a("channel.wechatOA.submit.success")),V()}catch(d){console.error("Update wechat OA config failed:",d),f.error(a("channel.wechatOA.submit.error"))}});function K(){Object.assign(o.value,{appId:"",appSecret:"",token:"",encodingAESKey:"",messageEncryptType:y.plain}),f.info(a("channel.wechatOA.form.formReset"))}return Y(V),(d,n)=>{const w=W,m=B,i=L,p=oe,$=le,R=ne;return ee(),Z("div",ie,[s("div",me,[l(w,{modelValue:e(u),"onUpdate:modelValue":n[0]||(n[0]=t=>ae(u)?u.value=t:null),size:"md",content:!1,items:e(T).map(t=>({label:t.label}))},null,8,["modelValue","items"])]),s("div",re,[l(R,{schema:e(q),state:e(o),class:"space-y-6",onSubmit:e(F),ref_key:"formRef",ref:k},{default:c(()=>[g(s("div",null,[s("div",de,[s("div",pe,[s("h2",ue,r(e(a)("channel.wechatOA.title")),1),s("p",he,r(e(a)("channel.wechatOA.description")),1)])]),l(i,{label:e(a)("channel.wechatOA.form.appId.label"),class:"mb-6",name:"appId",required:""},{default:c(()=>[l(m,{modelValue:e(o).appId,"onUpdate:modelValue":n[1]||(n[1]=t=>e(o).appId=t),placeholder:e(a)("channel.wechatOA.form.appId.placeholder"),size:"lg",ui:{root:"w-full sm:w-xs"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(i,{label:e(a)("channel.wechatOA.form.appSecret.label"),name:"appSecret",required:""},{default:c(()=>[l(m,{modelValue:e(o).appSecret,"onUpdate:modelValue":n[2]||(n[2]=t=>e(o).appSecret=t),placeholder:e(a)("channel.wechatOA.form.appSecret.placeholder"),size:"lg",ui:{root:"w-full sm:w-xs"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"])],512),[[O,e(u)==="0"]]),g(s("div",null,[s("div",fe,[s("div",be,[s("h2",we,r(e(a)("channel.wechatOA.sections.serverConfig")),1)])]),l(i,{label:e(a)("channel.wechatOA.form.url.label"),name:"url",class:"mb-6",description:e(a)("channel.wechatOA.form.url.description")},{default:c(()=>[l(m,{modelValue:e(o).url,"onUpdate:modelValue":n[3]||(n[3]=t=>e(o).url=t),placeholder:e(a)("channel.wechatOA.form.url.placeholder"),size:"lg",ui:{root:"w-full sm:w-xs"},disabled:"",variant:"subtle"},null,8,["modelValue","placeholder"]),l(p,{class:"ml-2",variant:"soft",onClick:U},{default:c(()=>[h(r(e(a)("console-common.copy")),1)]),_:1})]),_:1},8,["label","description"]),l(i,{label:e(a)("channel.wechatOA.form.token.label"),name:"token",class:"mb-6",description:e(a)("channel.wechatOA.form.token.description")},{default:c(()=>[l(m,{modelValue:e(o).token,"onUpdate:modelValue":n[4]||(n[4]=t=>e(o).token=t),placeholder:e(a)("channel.wechatOA.form.token.placeholder"),size:"lg",ui:{root:"w-full sm:w-xs"}},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),l(i,{label:e(a)("channel.wechatOA.form.encodingAESKey.label"),name:"encodingAESKey",class:"mb-6",description:e(a)("channel.wechatOA.form.encodingAESKey.description")},{default:c(()=>[l(m,{modelValue:e(o).encodingAESKey,"onUpdate:modelValue":n[5]||(n[5]=t=>e(o).encodingAESKey=t),placeholder:e(a)("channel.wechatOA.form.encodingAESKey.placeholder"),size:"lg",ui:{root:"w-full sm:w-xs"}},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),l(i,{label:e(a)("channel.wechatOA.form.messageEncryptType.label"),name:"messageEncryptType",required:""},{default:c(()=>[l($,{modelValue:e(o).messageEncryptType,"onUpdate:modelValue":n[6]||(n[6]=t=>e(o).messageEncryptType=t),items:z},null,8,["modelValue"])]),_:1},8,["label"])],512),[[O,e(u)==="1"]]),g(s("div",null,[s("div",Ae,[s("div",ye,[s("h2",_e,r(e(a)("channel.wechatOA.sections.functionSettings")),1)])]),l(i,{label:e(a)("channel.wechatOA.form.domain.label"),name:"domain",class:"mb-6",description:e(a)("channel.wechatOA.form.domain.description")},{default:c(()=>[l(m,{modelValue:e(o).domain,"onUpdate:modelValue":n[7]||(n[7]=t=>e(o).domain=t),placeholder:e(a)("channel.wechatOA.form.domain.placeholder"),size:"lg",ui:{root:"w-full sm:w-xs"},disabled:"",variant:"subtle"},null,8,["modelValue","placeholder"]),l(p,{class:"ml-2",variant:"soft",onClick:C},{default:c(()=>[h(r(e(a)("console-common.copy")),1)]),_:1})]),_:1},8,["label","description"]),l(i,{label:e(a)("channel.wechatOA.form.jsApiDomain.label"),name:"jsApiDomain",class:"mb-6",description:e(a)("channel.wechatOA.form.jsApiDomain.description")},{default:c(()=>[l(m,{modelValue:e(o).jsApiDomain,"onUpdate:modelValue":n[8]||(n[8]=t=>e(o).jsApiDomain=t),placeholder:e(a)("channel.wechatOA.form.jsApiDomain.placeholder"),size:"lg",ui:{root:"w-full sm:w-xs"},disabled:"",variant:"subtle"},null,8,["modelValue","placeholder"]),l(p,{class:"ml-2",variant:"soft",onClick:I},{default:c(()=>[h(r(e(a)("console-common.copy")),1)]),_:1})]),_:1},8,["label","description"]),l(i,{label:e(a)("channel.wechatOA.form.webAuthDomain.label"),name:"webAuthDomain",class:"mb-6",description:e(a)("channel.wechatOA.form.webAuthDomain.description")},{default:c(()=>[l(m,{modelValue:e(o).webAuthDomain,"onUpdate:modelValue":n[9]||(n[9]=t=>e(o).webAuthDomain=t),placeholder:e(a)("channel.wechatOA.form.webAuthDomain.placeholder"),size:"lg",ui:{root:"w-full sm:w-xs"},disabled:"",variant:"subtle"},null,8,["modelValue","placeholder"]),l(p,{class:"ml-2",variant:"soft",onClick:j},{default:c(()=>[h(r(e(a)("console-common.copy")),1)]),_:1})]),_:1},8,["label","description"])],512),[[O,e(u)==="2"]]),s("div",ge,[l(p,{type:"submit",color:"primary",size:"xl",loading:e(b)||e(_),disabled:e(b)||e(_)},{default:c(()=>[h(r(e(b)?e(a)("channel.wechatOA.actions.saving"):e(a)("console-common.save")),1)]),_:1},8,["loading","disabled"]),l(p,{type:"reset",size:"xl",loading:e(b)||e(_),disabled:e(b)||e(_),color:"neutral",variant:"outline",onClick:K},{default:c(()=>[h(r(e(a)("console-common.reset")),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["schema","state","onSubmit"])])])}}});export{$e as default};
