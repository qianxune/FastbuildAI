import E from"./cd55qm53.js";import{_ as F}from"./D_3bTjYR.js";import $ from"./4jjeIyfe.js";import{_ as B}from"./bvMLy1sv.js";import{d as A,i as P,at as q,a2 as M,aN as I,q as N,c as p,o as _,t as a,w as c,x as n,z as m,g as e,_ as D,A as V,B as j,F as G,E as T}from"#entry";import{_ as H}from"./B5gsc-Ax.js";import{_ as O}from"./DD8ySyt7.js";import{f as W,g as J}from"./C0aZ0x4t.js";import"./D9sX2Qi6.js";import"./CAQVAH0V.js";import"./Deu6qIfg.js";const K={class:"chat-config-container pb-8"},Q={class:"space-y-4"},R={class:"text-lg font-semibold"},X={class:"space-y-4"},Y={class:"text-lg font-semibold"},Z={class:"space-y-4"},ee={class:"flex w-md items-center justify-between"},oe={class:"text-lg font-semibold"},te={class:"flex items-center gap-3"},ae={class:"w-md space-y-4"},se={class:"w-20"},ne={class:"flex-1"},le={class:"bg-background sticky bottom-0 flex gap-3 py-4"},we=A({__name:"setting",setup(ie){const{t}=P(),r=q(),o=M({suggestions:[{icon:"ðŸŽ®",text:"å†™ä¸€ä¸ªåƒå®å¯æ¢¦æ–¹å¼çš„å°æ¸¸æˆ"},{icon:"ðŸ“…",text:"2025å¹´èŠ‚æ—¥å®‰æŽ’å‡ºæ¥äº†å—?"},{icon:"ðŸ˜Š",text:"AIæ—¶ä»£ï¼Œä»€ä¹ˆèƒ½åŠ›ä¸å¯è¢«æ›¿ä»£?"},{icon:"ðŸ“",text:"ä¸€ç¯‡ç”Ÿæˆçˆ†æ¬¾å°çº¢ä¹¦ç¬”è®°"},{icon:"ðŸ”",text:"AIèƒ½æˆä¸ºå…¨çƒäººç±»äº§ç”Ÿå¨èƒå—?"}],suggestionsEnabled:!0,welcomeInfo:{title:"ðŸ‘‹ Hiï¼Œæˆ‘æ˜¯ä½ çš„æ™ºèƒ½åŠ©æ‰‹",description:"ä½œä¸ºä½ çš„æ™ºèƒ½ä¼™ä¼´ï¼Œæˆ‘èƒ½å¸®ä½ å†™æ–‡æ¡ˆã€æ€è€ƒé—®é¢˜ã€æ–‡æ¡£æ•´ç†å’Œåˆ å‡ã€ç­”ç–‘è§£æƒ‘ã€‚",footer:"å†…å®¹ç”±AIç”Ÿæˆï¼Œæ— æ³•ç¡®ä¿çœŸå®žå‡†ç¡®ï¼Œä»…ä¾›å‚è€ƒã€‚"},attachmentSizeLimit:10}),{lockFn:b,isLock:x}=I(async()=>{try{const l=await W();Object.assign(o,l)}catch(l){console.error("Get chat config failed:",l),r.error(t("ai-chat.backend.config.messages.fetchFailed"))}}),v=()=>{o.suggestions.push({icon:"ðŸ’¡",text:""})},z=l=>{if(o.suggestions.length<=1){r.warning(t("ai-chat.backend.config.suggestions.minItemWarning"));return}o.suggestions.splice(l,1)},{lockFn:U,isLock:y}=I(async()=>{try{const l={suggestions:o.suggestions,suggestionsEnabled:o.suggestionsEnabled,welcomeInfo:o.welcomeInfo,attachmentSizeLimit:o.attachmentSizeLimit};await J(l),r.success(t("ai-chat.backend.config.messages.updateSuccess")),await b()}catch(l){console.error("Update chat config failed:",l),r.error(t("ai-chat.backend.config.messages.updateFailed"))}});return N(()=>b()),(l,i)=>{const f=E,d=F,h=$,L=B,w=j,g=D,S=H,C=O;return _(),p("div",K,[a(C,{state:e(o),class:"space-y-6",onSubmit:e(U)},{default:c(()=>[n("div",Q,[n("h3",R,m(e(t)("ai-chat.backend.config.welcomeInfo.title")),1),a(d,{label:e(t)("ai-chat.backend.config.welcomeInfo.titleLabel"),name:"welcomeInfo.title",required:""},{default:c(()=>[a(f,{modelValue:e(o).welcomeInfo.title,"onUpdate:modelValue":i[0]||(i[0]=s=>e(o).welcomeInfo.title=s),placeholder:e(t)("ai-chat.backend.config.welcomeInfo.titlePlaceholder"),size:"lg",class:"w-sm"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(d,{label:e(t)("ai-chat.backend.config.welcomeInfo.descriptionLabel"),name:"welcomeInfo.description",required:""},{default:c(()=>[a(h,{modelValue:e(o).welcomeInfo.description,"onUpdate:modelValue":i[1]||(i[1]=s=>e(o).welcomeInfo.description=s),placeholder:e(t)("ai-chat.backend.config.welcomeInfo.descriptionPlaceholder"),rows:3,class:"w-sm"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(d,{label:e(t)("ai-chat.backend.config.welcomeInfo.footerLabel"),name:"welcomeInfo.footer"},{default:c(()=>[a(h,{modelValue:e(o).welcomeInfo.footer,"onUpdate:modelValue":i[2]||(i[2]=s=>e(o).welcomeInfo.footer=s),placeholder:e(t)("ai-chat.backend.config.welcomeInfo.footerPlaceholder"),rows:2,class:"w-sm"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),n("div",X,[n("h3",Y,m(e(t)("ai-chat.backend.config.attachmentSizeLimit.title")),1),a(d,{label:`${e(t)("ai-chat.backend.config.attachmentSizeLimit.label")} (MB)`,name:"attachmentSizeLimit",required:""},{default:c(()=>[a(f,{modelValue:e(o).attachmentSizeLimit,"onUpdate:modelValue":i[3]||(i[3]=s=>e(o).attachmentSizeLimit=s),modelModifiers:{number:!0},placeholder:e(t)("ai-chat.backend.config.attachmentSizeLimit.placeholder"),type:"number",size:"lg",class:"w-sm"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),n("div",Z,[n("div",ee,[n("h3",oe,m(e(t)("ai-chat.backend.config.suggestions.title")),1),n("div",te,[a(d,{label:e(t)("ai-chat.backend.config.suggestions.enabled"),class:"flex items-center gap-2"},{default:c(()=>[a(L,{modelValue:e(o).suggestionsEnabled,"onUpdate:modelValue":i[4]||(i[4]=s=>e(o).suggestionsEnabled=s),size:"sm",class:"mb-1"},null,8,["modelValue"])]),_:1},8,["label"]),a(g,{variant:"soft",size:"sm",onClick:v,disabled:!e(o).suggestionsEnabled},{default:c(()=>[a(w,{name:"i-lucide-plus",class:"mr-1 size-4"}),V(" "+m(e(t)("console-common.add")),1)]),_:1},8,["disabled"])])])]),n("div",ae,[(_(!0),p(G,null,T(e(o).suggestions,(s,k)=>(_(),p("div",{key:k,class:"flex items-center gap-3"},[n("div",se,[a(f,{modelValue:s.icon,"onUpdate:modelValue":u=>s.icon=u,placeholder:e(t)("ai-chat.backend.config.suggestions.iconPlaceholder"),class:"text-center",disabled:!e(o).suggestionsEnabled},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),n("div",ne,[a(f,{modelValue:s.text,"onUpdate:modelValue":u=>s.text=u,placeholder:e(t)("ai-chat.backend.config.suggestions.textPlaceholder"),class:"w-xs",disabled:!e(o).suggestionsEnabled},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),a(g,{variant:"soft",color:"error",size:"sm",onClick:u=>z(k),disabled:!e(o).suggestionsEnabled||e(o).suggestions.length<=1},{default:c(()=>[a(w,{name:"i-lucide-trash-2",class:"size-4"})]),_:1},8,["onClick","disabled"])]))),128))]),n("div",le,[a(S,{codes:["ai-conversations:update-config"]},{default:c(()=>[a(g,{color:"primary",size:"lg",type:"submit",loading:e(y),disabled:e(x)},{default:c(()=>[V(m(e(t)("console-common.save")),1)]),_:1},8,["loading","disabled"])]),_:1})])]),_:1},8,["state","onSubmit"])])}}});export{we as default};
