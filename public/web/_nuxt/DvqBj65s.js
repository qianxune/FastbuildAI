import{_ as X}from"./bvMLy1sv.js";import Y from"./cd55qm53.js";import{_ as Z}from"./D_3bTjYR.js";import{_ as D}from"./CvI6s-qz.js";import{_ as ee}from"./DQQ3dYHz.js";import oe from"./4jjeIyfe.js";import{d as le,aM as te,i as ae,a2 as ie,s as de,p as re,aN as ne,n as se,q as me,f as x,o as c,w as r,t as d,x as i,z as s,g as o,B as pe,A as k,c as f,F as ce,E as ue,y,C as fe,_ as be}from"#entry";import{_ as _e}from"./hsuWSsy6.js";import{_ as ve}from"./CqHeDhj0.js";import{_ as xe}from"./CqBu4bDI.js";import{_ as ke}from"./Cie-o9Wa.js";import{_ as he}from"./DD8ySyt7.js";import{e as ge}from"./CqRfGXQR.js";import{c as ye,b as h,e as C,a as w,d as Ce}from"./FTderXKt.js";import"./D9sX2Qi6.js";import"./CAQVAH0V.js";import"./Deu6qIfg.js";import"./CtosDvS0.js";import"./DNSLGqNg.js";import"./BFo3vNrE.js";import"./DeCyaT7k.js";import"./D4e4FYoF.js";import"./Z7qkLoXK.js";import"./BstbYvQo.js";import"./CuVAPZQ8.js";import"./Dh3Mo9T6.js";import"./sTbVUDyT.js";import"./kRIii9yh.js";import"./CMKSl-Ng.js";import"./DMoqg0Fd.js";import"./C6Y-ieo6.js";import"./BCcN9pii.js";import"./psimjGaX.js";import"./o4ws_w_T.js";import"./B0g9CpkI.js";import"./CdknASxf.js";import"./gaGwb9HC.js";import"./CjasYwqF.js";import"./jsPNKUA0.js";import"./abPSHzII.js";import"./Y67jy4iF.js";import"./DBEJUH-Z.js";import"./CBTz8tdX.js";import"./B3rWqoNg.js";import"./EK7Wbu3-.js";import"./B5gsc-Ax.js";import"./Cub7JM7Q.js";import"./BEKWrOog.js";import"./3nrh3-Gq.js";import"./DaWZu8wl.js";import"./BlyoSzaa.js";import"./CSy6ZCzT.js";const Ve={class:"space-y-4 rounded-lg lg:col-span-2"},Ue={class:"flex items-center justify-between"},Te={class:"text-secondary-foreground text-sm font-medium"},$e={class:"text-muted-foreground mt-1 text-xs"},we={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},Le={class:"text-muted-foreground text-xs"},Pe={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},Re={class:"text-muted-foreground text-sm"},qe={class:"text-muted-foreground text-xs"},Me={class:"pb-3 text-[16px] font-bold"},Fe={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},ze={class:"flex w-full items-center gap-2"},Ae={class:"text-muted-foreground text-sm"},Be={class:"text-muted-foreground text-xs"},Se={class:"flex items-center gap-1"},Ie={class:"w-64 px-4 py-2 text-sm"},Ne={class:"space-y-4"},Oe={class:"flex items-start justify-between gap-3"},Ee={class:"min-w-0 flex-1"},je={key:0},He={class:"text-sm font-medium"},Ge={class:"text-muted-foreground mt-1 text-xs"},Ke={key:1,class:"space-y-2"},Qe={class:"grid grid-cols-1 gap-2"},Je={key:0,class:"text-xs text-red-500"},We={class:"flex items-center gap-2"},Xe={key:0,class:"pt-2"},Ye={class:"flex justify-center pt-4"},Ze={class:"bg-background sticky bottom-0 z-10 flex justify-end gap-4 py-3"},Zo=le({__name:"model-form",props:{isEdit:{type:Boolean,default:!1},id:{default:""},initialData:{default:()=>({})}},emits:["submit-success","cancel"],setup(L,{emit:P}){const V=L,U=P,{query:R}=te(),{t:e}=ae(),q=()=>[{field:"temperature",title:e("ai-provider.backend.modelConfig.temperature.title"),description:e("ai-provider.backend.modelConfig.temperature.description"),value:1,enable:!0},{field:"top_p",title:e("ai-provider.backend.modelConfig.top_p.title"),description:e("ai-provider.backend.modelConfig.top_p.description"),value:1,enable:!0},{field:"max_tokens",title:e("ai-provider.backend.modelConfig.max_tokens.title"),description:e("ai-provider.backend.modelConfig.max_tokens.description"),value:4096,enable:!0},{field:"top_k",title:e("ai-provider.backend.modelConfig.top_k.title"),description:e("ai-provider.backend.modelConfig.top_k.description"),value:50,enable:!0},{field:"frequency_penalty",title:e("ai-provider.backend.modelConfig.frequency_penalty.title"),description:e("ai-provider.backend.modelConfig.frequency_penalty.description"),value:0,enable:!0},{field:"presence_penalty",title:e("ai-provider.backend.modelConfig.presence_penalty.title"),description:e("ai-provider.backend.modelConfig.presence_penalty.description"),value:0,enable:!0},{field:"stop",title:e("ai-provider.backend.modelConfig.stop.title"),description:e("ai-provider.backend.modelConfig.stop.description"),value:null,enable:!1}],g={temperature:{min:0,max:2,step:.1},top_p:{min:0,max:1,step:.1},max_tokens:{min:1,max:2048,step:1},top_k:{min:1,max:100,step:1},frequency_penalty:{min:0,max:2,step:.1},presence_penalty:{min:0,max:2,step:.1}},a=ie({name:"",providerId:"",model:"",maxContext:3,modelConfig:q(),isActive:!0,isDefault:!1,features:[],description:"",sortOrder:0,modelType:void 0,membershipLevel:[],billingRule:{power:0,tokens:1e3}}),T=de([]),M=ye({name:h().required(e("ai-provider.backend.model.validation.nameRequired")).max(100,e("ai-provider.backend.model.validation.nameMaxLength")),model:h().required(e("ai-provider.backend.model.validation.modelRequired")).max(100,e("ai-provider.backend.model.validation.modelMaxLength")),maxTokens:C().min(1,e("ai-provider.backend.model.validation.maxTokensMin")).nullable(),maxContext:C().min(1,e("ai-provider.backend.model.validation.maxContextMin")).nullable(),features:Ce(),description:h().max(500,e("ai-provider.backend.model.validation.descriptionMaxLength")).nullable(),isActive:w(),isDefault:w(),sortOrder:C().nullable(),modelType:h().required(e("ai-provider.backend.model.validation.modelTypeRequired"))}),F=async()=>{const t=await ge({providerId:R.providerId});T.value=t};re(()=>V.initialData,t=>{t&&Object.keys(t).length>0&&Object.assign(a,{name:t.name||"",providerId:t.providerId||"",model:t.model||"",maxContext:t.maxContext,maxTokens:t.maxTokens,modelConfig:t.modelConfig,isActive:t.isActive??!0,features:t.features||[],isDefault:t.isDefault??!1,description:t.description||"",sortOrder:t.sortOrder||0,modelType:t.modelType||"",membershipLevel:t.membershipLevel||[],billingRule:{power:t.billingRule?.power||0,tokens:t.billingRule?.tokens||0}})},{immediate:!0,deep:!0});const{isLock:z,lockFn:A}=ne(async()=>{try{const t={...a};U("submit-success",t)}catch(t){console.error("Form validation failed:",t)}}),B=()=>{U("cancel")},$=(t,n)=>a.modelConfig?a.modelConfig.some((b,m)=>m!==n&&b.field===t&&t.trim()!==""):!1,S=t=>{a.modelConfig?.splice(t,1)},I=()=>{const t={field:"",title:"",description:"",value:null,enable:!0};a.modelConfig?.push(t)},N=se(()=>[{label:e("common.ai.audio"),value:"audio"},{label:e("common.ai.video"),value:"video"},{label:e("common.ai.vision"),value:"vision"},{label:e("common.ai.agentThought"),value:"agent-thought",disabled:!0},{label:e("common.ai.document"),value:"document",disabled:!0},{label:e("common.ai.multiToolCall"),value:"multi-tool-call",disabled:!0},{label:e("common.ai.streamToolCall"),value:"stream-tool-call",disabled:!0},{label:e("common.ai.structuredOutput"),value:"structured-output",disabled:!0},{label:e("common.ai.toolCall"),value:"tool-call",disabled:!0}]);return me(()=>{F()}),(t,n)=>{const b=X,m=Y,u=Z,O=D,E=ee,j=oe,H=pe,G=_e,K=ve,_=be,Q=xe,J=ke,W=he;return c(),x(W,{ref:"formRef",state:o(a),schema:o(M),class:"space-y-8",onSubmit:o(A)},{default:r(()=>[d(J,{shadow:!1},{default:r(()=>[i("div",Ve,[i("div",Ue,[i("div",null,[i("h4",Te,s(o(e)("ai-provider.backend.model.form.isDefault")),1),i("p",$e,s(o(e)("ai-provider.backend.model.form.setAsDefault")),1)]),d(b,{modelValue:o(a).isDefault,"onUpdate:modelValue":n[0]||(n[0]=l=>o(a).isDefault=l),"unchecked-icon":"i-lucide-star-off","checked-icon":"i-lucide-star",color:"warning"},null,8,["modelValue"])]),i("div",we,[d(u,{label:o(e)("ai-provider.backend.model.form.name"),name:"name",required:""},{hint:r(()=>[i("span",Le,s(o(e)("ai-provider.backend.model.form.nameHelp")),1)]),default:r(()=>[d(m,{modelValue:o(a).name,"onUpdate:modelValue":n[1]||(n[1]=l=>o(a).name=l),placeholder:o(e)("ai-provider.backend.model.form.namePlaceholder"),maxlength:100,class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(u,{label:o(e)("ai-provider.backend.model.form.model"),name:"model",required:""},{default:r(()=>[d(m,{modelValue:o(a).model,"onUpdate:modelValue":n[2]||(n[2]=l=>o(a).model=l),placeholder:o(e)("ai-provider.backend.model.form.modelPlaceholder"),maxlength:100,class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),i("div",Pe,[d(u,{label:o(e)("ai-provider.backend.model.form.maxContext"),name:"maxContext"},{hint:r(()=>[i("span",qe,s(o(e)("ai-provider.backend.model.form.maxContextHelp")),1)]),default:r(()=>[d(m,{modelValue:o(a).maxContext,"onUpdate:modelValue":n[3]||(n[3]=l=>o(a).maxContext=l),modelModifiers:{number:!0},type:"number",placeholder:o(e)("ai-provider.backend.model.form.maxContextPlaceholder"),min:1,ui:{root:"w-full",base:"pr-15"}},{trailing:r(()=>[i("span",Re,s(o(e)("ai-provider.backend.model.form.maxContextUnit")),1)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),d(u,{label:o(e)("ai-provider.backend.model.form.modelType"),name:"modelType",required:""},{default:r(()=>[d(O,{modelValue:o(a).modelType,"onUpdate:modelValue":n[4]||(n[4]=l=>o(a).modelType=l),items:o(T),placeholder:o(e)("ai-provider.backend.model.form.modelTypePlaceholder"),class:"w-full"},null,8,["modelValue","items","placeholder"])]),_:1},8,["label"])]),d(u,{label:o(e)("ai-provider.backend.model.form.multimodal"),name:"features"},{default:r(()=>[d(E,{modelValue:o(a).features,"onUpdate:modelValue":n[5]||(n[5]=l=>o(a).features=l),"open-on-click":"",multiple:"",items:o(N),"value-key":"value",placeholder:o(e)("ai-provider.backend.model.form.multimodalPlaceholder"),class:"w-full"},null,8,["modelValue","items","placeholder"])]),_:1},8,["label"]),d(u,{label:o(e)("ai-provider.backend.model.form.description"),name:"description"},{default:r(()=>[d(j,{modelValue:o(a).description,"onUpdate:modelValue":n[6]||(n[6]=l=>o(a).description=l),placeholder:o(e)("ai-provider.backend.model.form.descriptionPlaceholder"),maxlength:500,rows:4,class:"w-full"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i("div",null,[i("h1",Me,s(o(e)("ai-provider.backend.model.form.billing")),1),i("div",Fe,[d(u,{label:o(e)("ai-provider.backend.model.form.billing"),name:"billing"},{hint:r(()=>[i("span",Be,s(o(e)("ai-provider.backend.model.form.billingHelp")),1)]),default:r(()=>[i("div",ze,[d(m,{modelValue:o(a).billingRule.power,"onUpdate:modelValue":n[7]||(n[7]=l=>o(a).billingRule.power=l),modelModifiers:{number:!0},type:"number",placeholder:"",min:0,ui:{base:"pr-30"},onBlur:n[8]||(n[8]=l=>{o(a).billingRule.power<0&&(o(a).billingRule.power=0)}),class:"w-full"},{trailing:r(()=>[i("span",Ae,s(o(e)("ai-provider.backend.model.form.power"))+"/ 1K Tokens ",1)]),_:1},8,["modelValue"])])]),_:1},8,["label"]),d(u,{name:"membershipLevel",class:"flex-1"},{label:r(()=>[i("div",Se,[i("span",null,s(o(e)("ai-provider.backend.model.batchEdit.membershipLevel")),1),d(G,{mode:"hover",content:{side:"top"}},{content:r(()=>[i("p",Ie,s(o(e)("ai-provider.backend.model.batchEdit.membershipLevelTip")),1)]),default:r(()=>[d(H,{name:"i-lucide-circle-help",class:"text-muted-foreground size-4 cursor-pointer"})]),_:1})])]),default:r(()=>[d(K,{modelValue:o(a).membershipLevel,"onUpdate:modelValue":n[9]||(n[9]=l=>o(a).membershipLevel=l),multiple:!0,placeholder:o(e)("ai-provider.backend.model.batchEdit.membershipLevelAll"),"button-ui":{variant:"outline",class:"w-full"}},null,8,["modelValue","placeholder"])]),_:1})])]),i("div",Ne,[d(Q,{items:[{}],ui:{header:"px-0 ",label:"text-[16px] font-semibold",content:"px-0",body:"flex flex-col gap-2",trigger:" !shadow-none"}},{body:r(()=>[(c(!0),f(ce,null,ue(o(a).modelConfig,(l,v)=>(c(),f("div",{key:`${l.field}-${v}`,class:"bg-muted rounded-lg p-4"},[i("div",Oe,[i("div",Ee,[g[l.field]?(c(),f("div",je,[i("h4",He,s(l.title),1),i("p",Ge,s(l.description),1)])):(c(),f("div",Ke,[i("div",Qe,[d(m,{modelValue:l.field,"onUpdate:modelValue":p=>l.field=p,placeholder:o(e)("ai-provider.backend.modelConfig.custom.fieldPlaceholder"),class:fe($(l.field,Number(v))?"border-red-500":""),ui:{root:"w-full"}},null,8,["modelValue","onUpdate:modelValue","placeholder","class"]),d(m,{modelValue:l.value,"onUpdate:modelValue":p=>l.value=p,placeholder:o(e)("ai-provider.backend.modelConfig.custom.valuePlaceholder"),class:"w-full"},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),$(l.field,Number(v))?(c(),f("p",Je,s(o(e)("ai-provider.backend.modelConfig.validation.duplicateField")),1)):y("",!0)]))]),i("div",We,[d(b,{modelValue:l.enable,"onUpdate:modelValue":p=>l.enable=p,size:"sm"},null,8,["modelValue","onUpdate:modelValue"]),g[l.field]?y("",!0):(c(),x(_,{key:0,color:"error",variant:"ghost",size:"xs",icon:"i-lucide-trash-2",onClick:p=>S(Number(v))},null,8,["onClick"]))])]),l.enable&&g[l.field]?(c(),f("div",Xe,[l.field==="stop"?(c(),x(m,{key:0,modelValue:l.value,"onUpdate:modelValue":p=>l.value=p,placeholder:o(e)("ai-provider.backend.modelConfig.stop.placeholder"),size:"sm",class:"w-full"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):(c(),x(m,{key:1,modelValue:l.value,"onUpdate:modelValue":p=>l.value=p,placeholder:o(e)("ai-provider.backend.modelConfig.stop.placeholder"),size:"sm",class:"w-full",type:"number"},null,8,["modelValue","onUpdate:modelValue","placeholder"]))])):y("",!0)]))),128)),i("div",Ye,[d(_,{color:"primary",variant:"soft",size:"sm",icon:"i-lucide-plus",onClick:I},{default:r(()=>[k(s(o(e)("ai-provider.backend.modelConfig.addParameter")),1)]),_:1})])]),default:r(()=>[k(s(o(e)("ai-provider.backend.modelConfig.title"))+" ",1)]),_:1})])])]),_:1}),i("div",Ze,[d(_,{color:"neutral",variant:"outline",onClick:B,class:"px-8"},{default:r(()=>[k(s(o(e)("console-common.cancel")),1)]),_:1}),d(_,{color:"primary",loading:o(z),type:"submit",class:"px-8"},{default:r(()=>[k(s(V.isEdit?o(e)("console-common.update"):o(e)("console-common.create")),1)]),_:1},8,["loading"])])]),_:1},8,["state","schema","onSubmit"])}}});export{Zo as default};
