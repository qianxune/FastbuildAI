import{d as S,i as $,at as U,aQ as V,s as q,aN as b,q as B,c as N,o as D,t as i,w as o,x as p,g as s,A as m,z as d,bK as I,_ as M}from"#entry";import W from"./cd55qm53.js";import{_ as z}from"./D_3bTjYR.js";import{_ as A}from"./B5gsc-Ax.js";import{_ as E}from"./DD8ySyt7.js";import{a as G,b as R}from"./C1E-FicH.js";import{c as K,b as Q}from"./FTderXKt.js";import{u as y}from"./UqhBTNL6.js";import"./D9sX2Qi6.js";import"./DaWZu8wl.js";const T={class:"statistics-container mt-8"},j={class:"mb-6"},H={href:"https://clarity.microsoft.com",class:"text-primary",target:"_blank"},J={class:"flex space-x-3"},ns=S({__name:"statistics",setup(O){const{t:e}=$(),n=U(),a=V({appid:""}),l=q(null),g=K({appid:Q().required(e("system.website.statistics.appid.required")).min(5,e("system.website.statistics.appid.minLength")).max(50,e("system.website.statistics.appid.maxLength"))}),{lockFn:_,isLock:u}=b(async()=>{try{const t=await G();l.value=t,y(a,t.statistics)}catch(t){console.error("Get website config failed:",t),n.error(e("system.website.messages.loadFailed"))}}),{lockFn:w,isLock:c}=b(async()=>{try{const t={statistics:{appid:a.appid}};await R(t),n.success(e("system.website.messages.saveSuccess")),await _()}catch(t){console.error("Save failed:",t),n.error(e("system.website.messages.saveFailed"))}}),x=()=>{l.value?(y(a,l.value.statistics),n.info(e("system.website.messages.resetSuccess"))):(a.appid="",n.info(e("system.website.messages.resetEmpty")))};return B(()=>_()),(t,r)=>{const h=I,v=W,C=z,f=M,k=A,F=E;return D(),N("div",T,[i(F,{schema:s(g),state:s(a),class:"mx-auto lg:max-w-2xl xl:max-w-4xl",onSubmit:s(w)},{default:o(()=>[p("div",j,[i(C,{name:"appid",label:s(e)("system.website.statistics.appid.label"),required:""},{description:o(()=>[m(d(s(e)("system.website.statistics.clarity.linkLabel"))+": ",1),p("a",H,[r[1]||(r[1]=m(" Microsoft Clarity ",-1)),i(h,{name:"i-lucide-external-link"})])]),default:o(()=>[i(v,{modelValue:s(a).appid,"onUpdate:modelValue":r[0]||(r[0]=L=>s(a).appid=L),size:"xl",ui:{root:"w-full"},placeholder:s(e)("system.website.statistics.appid.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),p("div",J,[i(k,{codes:["system-website:setConfig"]},{default:o(()=>[i(f,{type:"submit",color:"primary",loading:s(c),disabled:s(c)||s(u)},{default:o(()=>[m(d(s(c)?s(e)("system.website.actions.saving"):s(e)("system.website.actions.saveConfig")),1)]),_:1},8,["loading","disabled"])]),_:1}),i(f,{type:"button",color:"neutral",variant:"outline",disabled:s(c)||s(u),onClick:x},{default:o(()=>[m(d(s(e)("system.website.actions.reset")),1)]),_:1},8,["disabled"])])]),_:1},8,["schema","state","onSubmit"])])}}});export{ns as default};
