const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BymLgoUH.js","./Cgyg1gJC.js","./Ghlq83yM.js","./DQMjdCEn.js","./OUYfsp1i.js","./BFo3vNrE.js","./CuVAPZQ8.js","./Z7qkLoXK.js","./CjE5iPSn.js","./D9UsdH-b.js","./MCK2d4XT.js","./EK7Wbu3-.js","./cd55qm53.js","./Y67jy4iF.js","./CjasYwqF.js","./CAQVAH0V.js","./DBEJUH-Z.js","./CMKSl-Ng.js","./BCcN9pii.js","./CtosDvS0.js","./Deu6qIfg.js","./D9sX2Qi6.js","./CvI6s-qz.js","./DNSLGqNg.js","./DeCyaT7k.js","./D4e4FYoF.js","./BstbYvQo.js","./CBTz8tdX.js","./DMoqg0Fd.js","./kRIii9yh.js","./C6Y-ieo6.js","./psimjGaX.js","./B3rWqoNg.js","./B5gsc-Ax.js","./o4ws_w_T.js","./Cub7JM7Q.js","./hsuWSsy6.js","./bvMLy1sv.js","./BEKWrOog.js","./3nrh3-Gq.js","./DaWZu8wl.js","./BlyoSzaa.js","./CSy6ZCzT.js","./Cl275_vY.js","./D_3bTjYR.js","./JxyxsHxp.js","./DD8ySyt7.js","./DDlJUCNH.js","./CqHeDhj0.js","./Cie-o9Wa.js","./jsPNKUA0.js","./abPSHzII.js","./B0g9CpkI.js"])))=>i.map(i=>d[i]);
import{aF as L,aJ as D,aI as ge,aE as be,d as ye,at as ke,i as we,V as xe,s as j,a2 as Me,l as q,q as ze,aN as C,n as E,p as J,K as Ae,c as x,o as m,x as c,y,f as k,t as r,g as t,A as w,z as d,w as p,_ as Se,F as K,E as W,C as I,G as Ce,B as De,D as Ue,W as R,X as F}from"#entry";import Te from"./cd55qm53.js";import{_ as Ve}from"./Y67jy4iF.js";import{_ as $e}from"./CvI6s-qz.js";import{_ as Be}from"./CBTz8tdX.js";import{_ as Ee}from"./B5gsc-Ax.js";import{_ as Ie}from"./o4ws_w_T.js";import{_ as Re}from"./Cub7JM7Q.js";import{_ as Fe}from"./hsuWSsy6.js";import{_ as Le}from"./bvMLy1sv.js";import{e as Pe}from"./BEKWrOog.js";import{D as Oe}from"./3nrh3-Gq.js";import{u as Ge}from"./BlyoSzaa.js";import{u as Ne}from"./CSy6ZCzT.js";function je(n){return L("/ai-models",n)}function Do(n){return L(`/ai-models/${n}`)}function Uo(n){return be("/ai-models",n)}function To(n,b){return D(`/ai-models/${n}`,b)}function qe(n,b){return D(`/ai-models/${n}/toggle-active`,{isActive:b})}function Vo(n){return D("/ai-models/batch/update",{models:n})}function Je(n,b){return D("/ai-models/batch-toggle-active",{ids:n,isActive:b})}function Ke(n){return ge("/ai-models",{ids:n})}function We(n){return D("/ai-models/batch/sort",{sort:n})}function $o(n){return L("/ai-models/type-father/list",n)}const Xe={class:"w-full space-y-2 px-5 pb-6"},He={class:"mb-4 pl-2"},Qe={class:"mb-4 flex items-center justify-between pl-2"},Ye={class:"flex items-center gap-3"},Ze={class:"text-xs font-medium"},eo={key:0,class:"text-primary"},oo={class:"flex items-center gap-2"},to={key:0,class:"space-y-3"},ao={class:"flex-none"},so={class:"min-w-0 flex-1"},lo={class:"mb-1 flex items-center gap-2"},no={class:"hover:text-primary cursor-pointer truncate text-sm font-medium text-gray-900 transition-colors dark:text-gray-100"},io={class:"flex gap-1"},ro={key:0,class:"text-muted-foreground flex items-center gap-2 text-xs"},co={class:"flex flex-none items-center gap-3"},uo={key:2,class:"py-12 text-center"},mo={class:"text-foreground mb-2 text-lg font-medium"},po={class:"text-muted-foreground text-sm"},vo=ye({__name:"model-list",props:{provider:{}},setup(n){const b=R(()=>F(()=>import("./BymLgoUH.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42]),import.meta.url)),X=R(()=>F(()=>import("./Cl275_vY.js"),__vite__mapDeps([43,1,12,44,21,37,15,20,45,46,2,3,4,5,6,7,8,9,10,11,13,14,16,17,18,19,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,38,39,40,41,42]),import.meta.url)),H=R(()=>F(()=>import("./DDlJUCNH.js"),__vite__mapDeps([47,1,36,28,19,29,23,7,30,5,24,25,18,17,6,31,12,44,21,48,34,49,50,51,52,45,46,2,3,4,8,9,10,11,13,14,15,16,20,22,26,27,32,33,35,37,38,39,40,41,42]),import.meta.url)),f=n,U=ke(),{t:s}=we(),T=xe(),{hasAccessByCodes:V}=Ge(),u=j([]),_=Me({modelType:"all",search:""}),l=q(new Set),h=q(new Set),P=j([]),Q=async()=>{try{const e=await Pe();P.value=[{label:s("ai-provider.backend.model.modelTypes.all"),value:"all"},...e.map(o=>({label:o.label,value:o.value}))]}catch(e){console.error("获取模型类型列表失败:",e)}};ze(()=>{Q()});const{lockFn:v,isLock:O}=C(async()=>{if(f.provider?.id)try{const e=await je({providerId:f.provider.id,isActive:void 0,keyword:_.search?.trim()||void 0,modelType:_.modelType==="all"?void 0:_.modelType});u.value=e||[]}catch(e){console.error("获取模型列表失败:",e)}}),{lockFn:Y}=C(async(e,o)=>{try{await qe(e,o);const i=u.value.find(g=>g.id===e);i&&(i.isActive=o),v()}catch(i){console.error("切换模型状态失败:",i)}}),Z=async e=>{await T.create(b).open({id:e.id,provider:f.provider}).result&&v()},ee=async()=>{await T.create(b).open({id:null,provider:f.provider}).result&&v()},oe=async()=>{if(l.value.size===0)return;await T.create(X).open({models:h.value,provider:f.provider}).result&&v(),l.value.clear(),h.value.clear()},te=async()=>{if(l.value.size===0){U.warning(s("ai-provider.backend.messages.selectModel"));return}await T.create(H).open({models:h.value,provider:f.provider}).result&&v(),l.value.clear(),h.value.clear()},{lockFn:G}=C(async e=>{if(l.value.size===0)return;const o=Array.from(l.value);try{await Je(o,e),U.success(s(e?"ai-provider.backend.model.messages.isActiveEnabled":"ai-provider.backend.model.messages.isActiveDisabled")),l.value.clear(),h.value.clear(),v()}catch(i){console.error("Toggle model active failed:",i)}}),{lockFn:ae}=C(async()=>{if(l.value.size===0)return;const e=Array.from(l.value);try{await Ne({title:s("ai-provider.backend.model.messages.deleteTitle"),description:s("ai-provider.backend.model.messages.deleteMsg"),color:"error"}),await Ke(e),U.success(s("console-common.batchDeleteSuccess")),l.value.clear(),h.value.clear(),v()}catch(o){console.error("批量删除失败:",o),U.error(s("console-common.batchDeleteFailed"))}}),{lockFn:se,isLock:N}=C(async()=>{if(u.value.length!==0)try{const e=u.value.map(o=>o.id);await We(e),await v()}catch(e){console.error("更新排序失败:",e),await v()}}),$=E({get:()=>u.value,set:e=>{u.value=e,se()}}),le=()=>{const e=[];return V(["ai-models:update"])&&(e.push({label:s("console-common.batchEnable"),icon:"i-lucide-eye",color:"neutral",onSelect:()=>G(!0)}),e.push({label:s("console-common.batchDisable"),icon:"i-lucide-eye-off",color:"neutral",onSelect:()=>G(!1)}),e.push({label:s("console-common.batchEdit"),icon:"i-lucide-edit",color:"neutral",onSelect:()=>oe()})),V(["ai-models:delete"])&&e.push({label:s("console-common.batchDelete"),icon:"i-heroicons-trash",color:"error",onSelect:()=>ae()}),e},ne=e=>{const o=e.id,i=new Set(l.value),g=new Set(h.value);i.has(o)?(i.delete(o),g.delete(e)):(i.add(o),g.add(e)),l.value=i,h.value=g},ie=()=>{if(l.value.size===u.value.length)l.value.clear(),h.value.clear();else{const e=new Set,o=new Set;u.value.forEach(i=>{i.id&&(e.add(i.id),o.add(i))}),l.value=e,h.value=o}},re=E(()=>u.value.length>0&&l.value.size===u.value.length),ce=E(()=>l.value.size>0&&l.value.size<u.value.length),de=e=>{const o=[];return e&&o.push(e.toUpperCase().replaceAll("-"," ")),o};J(()=>f.provider?.id,()=>v(),{immediate:!0});const ue=Ae(()=>{v()},300);return J(()=>_,()=>ue()),(e,o)=>{const i=Te,g=Ve,me=$e,z=Se,pe=Be,B=Ee,ve=Ce,A=Ie,S=De,fe=Re,he=Fe,_e=Le;return m(),x("div",Xe,[c("div",He,[r(i,{modelValue:t(_).search,"onUpdate:modelValue":o[0]||(o[0]=a=>t(_).search=a),variant:"soft",placeholder:t(s)("ai-provider.backend.model.searchPlaceholder"),ui:{root:"w-full",base:"bg-accent"},onChange:o[1]||(o[1]=a=>t(v)())},null,8,["modelValue","placeholder"])]),c("div",Qe,[c("div",Ye,[r(g,{"model-value":t(re),indeterminate:t(ce),"onUpdate:modelValue":ie},null,8,["model-value","indeterminate"]),c("h3",Ze,[w(d(t(s)("ai-provider.backend.model.allModels"))+" "+d(t(u).length)+" "+d(t(s)("ai-provider.backend.model.unit"))+" ",1),t(l).size>0?(m(),x("span",eo," ("+d(t(s)("ai-provider.backend.model.selected"))+" "+d(t(l).size)+" "+d(t(s)("ai-provider.backend.model.unit"))+") ",1)):y("",!0)])]),c("div",oo,[r(me,{modelValue:t(_).modelType,"onUpdate:modelValue":o[2]||(o[2]=a=>t(_).modelType=a),items:t(P),"label-key":"label","value-key":"value",placeholder:t(s)("ai-provider.backend.model.modelTypeFilter"),size:"sm",class:"w-30",onChange:t(v)},null,8,["modelValue","items","placeholder","onChange"]),t(V)(["ai-models:delete"])||t(V)(["ai-models:update"])?(m(),k(pe,{key:0,items:le(),size:"sm",content:{align:"start",side:"bottom",sideOffset:8}},{default:p(()=>[r(z,{color:"neutral",variant:"outline",icon:"i-lucide-list-checks",size:"sm",label:t(s)("ai-provider.backend.model.batchOperation",{count:t(l).size})},null,8,["label"])]),_:1},8,["items"])):y("",!0),r(B,{codes:["ai-models:update"]},{default:p(()=>[r(z,{color:"primary",variant:"soft",size:"sm",onClick:o[3]||(o[3]=()=>te())},{default:p(()=>[w(d(t(s)("ai-provider.backend.model.billingSetting")),1)]),_:1})]),_:1}),r(B,{codes:["ai-models:create"]},{default:p(()=>[r(z,{color:"primary",variant:"soft",icon:"i-lucide-plus",size:"sm",onClick:o[4]||(o[4]=()=>ee())},{default:p(()=>[w(d(t(s)("ai-provider.backend.model.addModel")),1)]),_:1})]),_:1})])]),t(O)&&t(_).search.trim()===""&&t(u).length===0?(m(),x("div",to,[(m(),x(K,null,W(10,a=>c("div",{key:a,class:"bg-muted flex items-center gap-4 rounded-lg p-8"})),64))])):y("",!0),t(u).length>0?(m(),k(t(Oe),{key:1,modelValue:t($),"onUpdate:modelValue":o[5]||(o[5]=a=>Ue($)?$.value=a:null),disabled:t(N),handle:".drag-handle","item-key":"id",animation:"200",class:"space-y-0"},{item:p(({element:a})=>[c("div",{class:I(["group hover:bg-muted flex items-center gap-3 rounded-lg p-2 transition-colors",{"bg-primary/5":t(l).has(a.id)}])},[c("div",{class:I(["flex-none opacity-0 group-hover:opacity-100",{"opacity-100":t(l).has(a.id)}])},[r(g,{"model-value":t(l).has(a.id),"onUpdate:modelValue":M=>ne(a)},null,8,["model-value","onUpdate:modelValue"])],2),c("div",ao,[r(ve,{src:f.provider?.iconUrl,alt:f.provider?.name,ui:{root:"rounded bg-transparent size-8",fallback:"text-inverted"},class:I([f.provider?.iconUrl?"":"bg-primary"])},null,8,["src","alt","class"])]),r(he,{mode:"hover",content:{align:"center",side:"left",sideOffset:10}},{content:p(()=>[r(fe,{model:a,provider:f.provider,"show-billing-rule":!0},null,8,["model","provider"])]),default:p(()=>[c("div",so,[c("div",lo,[c("h4",no,d(a.name),1),c("div",io,[(m(!0),x(K,null,W(de(a.modelType),M=>(m(),k(A,{variant:"soft",color:"neutral",key:M,size:"xs"},{default:p(()=>[w(d(M),1)]),_:2},1024))),128)),a.features?.includes("vision")?(m(),k(A,{key:0,variant:"soft",color:"info",size:"xs"},{default:p(()=>[r(S,{name:"i-lucide-image-play",size:"xs"}),w(" "+d(e.$t("common.ai.vision")),1)]),_:1})):y("",!0),a.features?.includes("video")?(m(),k(A,{key:1,variant:"soft",color:"warning",size:"xs"},{default:p(()=>[r(S,{name:"i-lucide-video",class:"mr-1",size:"xs"}),w(" "+d(e.$t("common.ai.video")),1)]),_:1})):y("",!0),a.features?.includes("audio")?(m(),k(A,{key:2,variant:"soft",color:"success",size:"xs"},{default:p(()=>[r(S,{name:"i-lucide-audio-lines",class:"mr-1",size:"xs"}),w(" "+d(e.$t("common.ai.audio")),1)]),_:1})):y("",!0)]),a.membershipLevel.length>0?(m(),k(S,{key:0,name:"i-lucide-crown",class:"text-warning size-4"})):y("",!0)]),a.billingRule.power>0?(m(),x("div",ro,[c("span",null,d(a.billingRule?.power||0)+" "+d(t(s)("ai-provider.backend.model.points")),1),o[6]||(o[6]=c("span",null,"•",-1)),c("span",null,d(a.billingRule?.tokens||0)+" "+d(t(s)("ai-provider.backend.model.tokens")),1)])):(m(),k(A,{key:1,variant:"soft",color:"primary",size:"sm"},{default:p(()=>[...o[7]||(o[7]=[w(" Free ",-1)])]),_:1}))])]),_:2},1024),c("div",co,[r(B,{codes:["ai-models:update"]},{default:p(()=>[r(z,{color:"primary",variant:"ghost",icon:"i-lucide-edit",size:"sm",onClick:M=>Z(a)},null,8,["onClick"]),r(_e,{size:"sm","model-value":a.isActive,"onUpdate:modelValue":M=>t(Y)(a.id,M)},null,8,["model-value","onUpdate:modelValue"]),r(z,{class:"drag-handle cursor-move",color:"neutral",variant:"ghost",icon:"i-lucide-grip-vertical",size:"sm",disabled:t(N)},null,8,["disabled"])]),_:2},1024)])],2)]),_:1},8,["modelValue","disabled"])):!t(O)&&t(u).length===0?(m(),x("div",uo,[r(S,{name:"i-lucide-brain",class:"mx-auto mb-4 h-12 w-12 text-gray-400"}),c("h3",mo,d(t(s)("ai-provider.backend.model.noModels")),1),c("p",po,d(t(s)("ai-provider.backend.model.noModelsDescription")),1)])):y("",!0)])}}}),Bo=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"}));export{Do as a,To as b,Uo as c,Vo as d,$o as e,Bo as m};
