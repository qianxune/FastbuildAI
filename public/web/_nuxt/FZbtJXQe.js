const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./iqk9VoZB.js","./Da83zglB.js","./Cgyg1gJC.js","./cd55qm53.js","./9Q2Y_nd6.js","./td2xDKru.js","./RPflLnqr.js","./TrJvDfxI.js","./jsPNKUA0.js","./abPSHzII.js","./D_3bTjYR.js","./D9sX2Qi6.js","./Co1Njv5N.js","./CtosDvS0.js","./CAQVAH0V.js","./BCcN9pii.js","./CMKSl-Ng.js","./Deu6qIfg.js","./DBEJUH-Z.js","./CuVAPZQ8.js","./CvI6s-qz.js","./DNSLGqNg.js","./BFo3vNrE.js","./DeCyaT7k.js","./D4e4FYoF.js","./Z7qkLoXK.js","./BstbYvQo.js","./bvMLy1sv.js","./JxyxsHxp.js","./DD8ySyt7.js","./4jjeIyfe.js","./Ghlq83yM.js","./DQMjdCEn.js","./OUYfsp1i.js","./CjE5iPSn.js","./D9UsdH-b.js","./MCK2d4XT.js","./EK7Wbu3-.js","./B6e0YRC4.js","./FTderXKt.js","./DaWZu8wl.js","./UqhBTNL6.js"])))=>i.map(i=>d[i]);
import{d as I,i as w,at as B,V as j,aQ as K,n as M,h as N,q as O,c as P,o as R,x as u,t as i,g as s,w as r,_ as F,A as y,z as h,G as J,C as L,W as q,X as G}from"#entry";import{_ as Q}from"./DBiaUVBh.js";import W from"./cd55qm53.js";import{_ as X}from"./CBTz8tdX.js";import{_ as H}from"./bvMLy1sv.js";import{_ as Y}from"./JxyxsHxp.js";import{_ as Z}from"./D4ebF709.js";import{c as ee,u as te,d as ae,e as oe,f as se,i as ie}from"./B6e0YRC4.js";import{u as ne}from"./ZDOPDbaX.js";import"./DMoqg0Fd.js";import"./CtosDvS0.js";import"./kRIii9yh.js";import"./DNSLGqNg.js";import"./Z7qkLoXK.js";import"./C6Y-ieo6.js";import"./BFo3vNrE.js";import"./DeCyaT7k.js";import"./D4e4FYoF.js";import"./BCcN9pii.js";import"./CMKSl-Ng.js";import"./CuVAPZQ8.js";import"./psimjGaX.js";import"./B3rWqoNg.js";import"./EK7Wbu3-.js";import"./D9sX2Qi6.js";import"./CAQVAH0V.js";import"./Deu6qIfg.js";import"./o0-e7Rye.js";import"./abPSHzII.js";const re={class:"flex h-full flex-col gap-4"},ce={class:"flex items-center justify-between"},le={class:"flex-1 overflow-y-auto"},de={class:"bg-background flex items-center justify-end gap-3 py-4"},me={class:"flex items-center gap-1.5"},Re=I({__name:"type",setup(pe){const S=q(()=>G(()=>import("./iqk9VoZB.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41]),import.meta.url)),k=Q,{t:a}=w(),d=B(),v=j(),_=K({name:""}),{paging:c,getLists:n}=ne({fetchFun:ee,params:_}),x=M(()=>[{accessorKey:"icon",header:a("ai-secret.backend.type.form.icon")},{accessorKey:"name",header:a("ai-secret.backend.type.form.name")},{accessorKey:"isActived",header:a("ai-secret.backend.type.form.isActived")},{accessorKey:"createdAt",header:a("console-common.createAt"),cell:({row:t})=>{const e=t.getValue("createdAt");return N(k,{datetime:e,mode:"datetime"})}},{accessorKey:"action",header:a("console-common.operation")}]),C=t=>{const e=[];return e.push({label:a("ai-secret.backend.type.form.edit"),icon:"i-lucide-edit",onClick:()=>{f(t.original.id)}}),e.push({label:a("ai-secret.backend.type.form.delete"),icon:"i-lucide-trash",color:"error",onSelect(){if(!t.original.id){console.error("Row data missing ID");return}U(t.original.id)}}),e},A=async t=>{if(!t.original.id){console.error("行数据缺少 ID");return}try{await te(t.original.id,{isEnabled:t.original.isEnabled}),d.success(t.original.isEnabled?a("ai-secret.backend.type.enableSuccess"):a("ai-secret.backend.type.disableSuccess")),n()}catch(e){console.error("更新状态失败:",e)}},T=async(t,e)=>{try{e?await oe(e,t):await se(t),d.success(a("ai-secret.backend.type.edit.submitSuccess")),n()}catch(m){console.error("表单提交失败:",m)}},E=async t=>{try{await ie({jsonData:t}),d.success(a("ai-secret.backend.type.edit.submitSuccess")),n()}catch(e){console.error("JSON导入失败:",e)}},U=async t=>{try{await ae(t),d.success(a("ai-secret.backend.type.deleteSuccess")),n()}catch(e){console.error("删除失败:",e)}},f=(t,e=!1)=>{v.create(S).open({id:t,isJsonImport:e,onSubmit:(l,p)=>{T(l,p)},"onJson-submit":l=>{E(l)}})},g=(t=!1)=>{f(void 0,t)};return O(()=>n()),(t,e)=>{const m=W,l=F,p=X,V=J,z=H,D=Y,$=Z;return R(),P("div",re,[u("div",ce,[i(m,{modelValue:s(_).name,"onUpdate:modelValue":e[0]||(e[0]=o=>s(_).name=o),placeholder:"请输入名称...",onChange:s(n)},null,8,["modelValue","onChange"]),i(p,{size:"lg",items:[{label:s(a)("ai-mcp.backend.quickCreateTitle"),icon:"i-heroicons-plus",color:"primary",onSelect:()=>g()},{label:s(a)("ai-mcp.backend.importTitle"),icon:"i-lucide-file-json-2",color:"primary",onSelect:()=>g(!0)}]},{default:r(()=>[i(l,{color:"primary",icon:"i-lucide-plus"},{default:r(()=>[y(h(s(a)("ai-secret.backend.type.addType")),1)]),_:1})]),_:1},8,["items"])]),u("div",le,[i(D,{sticky:"",class:"h-full",columns:s(x),data:s(c).items,ui:{base:"table-fixed border-separate border-spacing-0",thead:"[&>tr]:bg-elevated/50 [&>tr]:after:content-none",tbody:"[&>tr]:last:[&>td]:border-b-0",th:"py-2 first:rounded-l-lg last:rounded-r-lg border-y border-default first:border-l last:border-r",td:"border-b border-default",tr:"[&:has(>td[colspan])]:hidden"}},{"icon-cell":r(({row:o})=>[i(V,{src:o.original.icon,alt:o.original.name,size:"md",ui:{image:"rounded-lg",fallback:"text-inverted font-medium"},class:L([o.original.icon?"":"bg-primary"])},null,8,["src","alt","class"])]),"type-cell":r(({row:o})=>[y(h(o.original.type==="system"?s(a)("ai-secret.backend.type.form.system"):s(a)("ai-secret.backend.type.form.custom")),1)]),"isActived-cell":r(({row:o})=>[i(z,{"model-value":!!o.original.isEnabled,"onUpdate:modelValue":b=>o.original.isEnabled=b?1:0,onChange:b=>A(o)},null,8,["model-value","onUpdate:modelValue","onChange"])]),"action-cell":r(({row:o})=>[i(p,{items:C(o)},{default:r(()=>[i(l,{icon:"i-lucide-ellipsis-vertical",color:"neutral",variant:"ghost"})]),_:1},8,["items"])]),_:1},8,["columns","data"])]),u("div",de,[u("div",me,[i($,{page:s(c).page,"onUpdate:page":e[1]||(e[1]=o=>s(c).page=o),size:s(c).pageSize,"onUpdate:size":e[2]||(e[2]=o=>s(c).pageSize=o),total:s(c).total,onChange:s(n)},null,8,["page","size","total","onChange"])])])])}}});export{Re as default};
