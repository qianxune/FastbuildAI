import{d as T,i as C,at as A,h as m,B as F,n as K,aN as M,f as I,o as f,w as r,t as l,g as i,x as a,z as s,_ as z,A as g,c as x,aZ as D}from"#entry";import{_ as j}from"./hsuWSsy6.js";import J from"./cd55qm53.js";import{_ as O}from"./D_3bTjYR.js";import{_ as P}from"./CqHeDhj0.js";import{_ as Z}from"./JxyxsHxp.js";import{_ as q}from"./DD8ySyt7.js";import{_ as G}from"./Ghlq83yM.js";import{d as H}from"./CqRfGXQR.js";import"./DMoqg0Fd.js";import"./CtosDvS0.js";import"./kRIii9yh.js";import"./DNSLGqNg.js";import"./Z7qkLoXK.js";import"./C6Y-ieo6.js";import"./BFo3vNrE.js";import"./DeCyaT7k.js";import"./D4e4FYoF.js";import"./BCcN9pii.js";import"./CMKSl-Ng.js";import"./CuVAPZQ8.js";import"./psimjGaX.js";import"./D9sX2Qi6.js";import"./o4ws_w_T.js";import"./Cie-o9Wa.js";import"./jsPNKUA0.js";import"./abPSHzII.js";import"./B0g9CpkI.js";import"./DQMjdCEn.js";import"./OUYfsp1i.js";import"./CjE5iPSn.js";import"./D9UsdH-b.js";import"./MCK2d4XT.js";import"./EK7Wbu3-.js";import"./Y67jy4iF.js";import"./CjasYwqF.js";import"./CAQVAH0V.js";import"./DBEJUH-Z.js";import"./Deu6qIfg.js";import"./CvI6s-qz.js";import"./BstbYvQo.js";import"./CBTz8tdX.js";import"./B3rWqoNg.js";import"./B5gsc-Ax.js";import"./Cub7JM7Q.js";import"./bvMLy1sv.js";import"./BEKWrOog.js";import"./3nrh3-Gq.js";import"./DaWZu8wl.js";import"./BlyoSzaa.js";import"./CSy6ZCzT.js";const Q={class:"flex flex-row items-center gap-4"},W={class:"text-lg font-semibold"},X={class:"text-muted-foreground text-sm"},Y={class:"text-muted-foreground flex items-center gap-2 text-sm"},ee={key:0,class:"flex-none"},oe={key:1,class:"flex-none"},te={class:"flex w-full items-center gap-2"},ie={class:"text-muted-foreground text-sm"},re={class:"flex w-full items-center gap-2"},le={class:"flex w-full justify-end gap-2 pt-3.5"},io=T({__name:"model-billing-setting",props:{models:{},provider:{}},emits:["close"],setup(n,{emit:y}){const b=n,p=y,{t:o}=C(),k=A(),_=F,w=j,$=[{accessorKey:"name",header:o("ai-provider.backend.model.batchEdit.name")},{accessorKey:"modelType",header:o("ai-provider.backend.model.form.modelType")},{accessorKey:"billingRule",header:o("ai-provider.backend.model.batchEdit.billingRule")},{accessorKey:"membershipLevel",header:()=>m("div",{class:"flex items-center gap-1"},[m("span",o("ai-provider.backend.model.batchEdit.membershipLevel")),m(w,{mode:"hover"},{default:()=>m(_,{name:"i-lucide-circle-help",class:"size-4 cursor-pointer text-muted-foreground"}),content:()=>m("p",{class:"text-sm py-2 px-4 w-64"},o("ai-provider.backend.model.batchEdit.membershipLevelTip"))})])}],u=K(()=>b.models.size===0?[]:JSON.parse(JSON.stringify([...b.models]))),{lockFn:U,isLock:L}=M(async()=>{try{const c=u.value.map(e=>({id:e.id,name:e.name,model:e.model,maxContext:e.maxContext,isActive:e.isActive,billingRule:e.billingRule,membershipLevel:e.membershipLevel}));await H(c),k.success("设置成功"),p("close",!0)}catch(c){console.error("批量编辑失败:",c)}});return(c,e)=>{const V=D,B=J,h=O,R=P,E=Z,v=z,N=q,S=G;return f(),I(S,{ui:{content:"max-w-4xl overflow-y-auto h-fit"},onClose:e[1]||(e[1]=t=>p("close",!1))},{title:r(()=>[a("div",null,[a("div",Q,[a("h3",W,s(i(o)("ai-provider.backend.model.batchEdit.dialogTitle")),1),a("p",X,s(i(o)("ai-provider.backend.model.batchEdit.dialogDescription")),1)]),a("div",Y,[n.provider?.iconUrl?(f(),x("div",ee,[l(V,{src:n.provider.iconUrl,alt:n.provider.name,class:"h-4 w-4 rounded object-cover"},null,8,["src","alt"])])):(f(),x("div",oe,[l(i(_),{name:"i-lucide-building-office",class:"h-4 w-4"})])),a("span",null,s(n.provider?.name),1)])])]),default:r(()=>[l(N,{state:i(u),onSubmit:i(U)},{default:r(()=>[l(E,{columns:$,data:i(u),sticky:"",class:"h-120",ui:{base:"table-fixed border-separate border-spacing-0",thead:"[&>tr]:bg-elevated/50 [&>tr]:after:content-none",tbody:"[&>tr]:last:[&>td]:border-b-0",th:"py-2 whitespace-nowrap first:rounded-l-lg last:rounded-r-lg border-y border-default first:border-l last:border-r [&:nth-child(4)]:min-w-22",td:"border-b border-default cursor-pointer [&:nth-child(4)]:min-w-22",tr:"[&:has(>td[colspan])]:hidden"}},{"billingRule-cell":r(({row:t})=>[a("div",te,[l(h,{name:`rows.${t.index}.billingRule.power`,class:"flex-1"},{default:r(()=>[l(B,{modelValue:t.original.billingRule.power,"onUpdate:modelValue":d=>t.original.billingRule.power=d,modelModifiers:{number:!0},type:"number",placeholder:"",min:0,ui:{base:"pr-32"},onBlur:d=>{t.original.billingRule.power<0&&(t.original.billingRule.power=0)},class:"w-68"},{trailing:r(()=>[a("span",ie,s(i(o)("ai-provider.backend.model.form.power"))+"/ 1K Tokens ",1)]),_:1},8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1032,["name"])])]),"membershipLevel-cell":r(({row:t})=>[a("div",re,[l(h,{name:`rows.${t.index}.membershipLevel`,class:"flex-1"},{default:r(()=>[l(R,{modelValue:t.original.membershipLevel,"onUpdate:modelValue":d=>t.original.membershipLevel=d,multiple:!0,placeholder:i(o)("ai-provider.backend.model.batchEdit.membershipLevelAll"),"button-ui":{variant:"outline",class:"w-full"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["name"])])]),_:1},8,["data"]),a("div",le,[l(v,{color:"neutral",variant:"soft",onClick:e[0]||(e[0]=t=>p("close",!1))},{default:r(()=>[g(s(i(o)("console-common.cancel")),1)]),_:1}),l(v,{color:"primary",type:"submit",loading:i(L)},{default:r(()=>[g(s(i(o)("console-common.save")),1)]),_:1},8,["loading"])])]),_:1},8,["state","onSubmit"])]),_:1})}}});export{io as default};
