import{u as Gt,_ as qt}from"./CHPFZ4-8.js";import Vt from"./cd55qm53.js";import{_ as Ut}from"./vMXLMQMq.js";import{_ as Ot,a as jt}from"./CMrwRwXe.js";import{c as Kt,a as Wt,u as ft,P as We,b as Xt,_ as Jt}from"./Cie-o9Wa.js";import{_ as Qt}from"./DOOZ3wAl.js";import{_ as Yt}from"./DhnBxkbb.js";import{a3 as Zt,am as Se,d as fe,af as je,l as W,n as B,p as Ce,f as ae,o as T,w as j,r as Xe,g as f,a0 as pt,q as Je,ai as Qe,c as te,y as oe,x as I,t as R,B as mt,z as ne,_ as Ye,A as ke,k as vt,s as me,J as Me,aP as en,aM as tn,i as nn,at as an,aR as on,aQ as ln,b2 as Fe,b9 as sn,C as at,b3 as Ge,j as ot,aO as qe,H as rn,D as Ve,v as un,G as cn,T as dn,I as fn}from"#entry";import{i as pn,a as mn,g as vn,_ as hn}from"./CiVwig2f.js";import{d as gn}from"./MCK2d4XT.js";import{d as yn,c as xn,m as lt,n as wn,e as Sn,h as zn}from"./D7VOTB3C.js";import{u as _n}from"./fhkze2Jn.js";import{u as st}from"./DUoaAyrs.js";import{u as bn}from"./RA92o3C4.js";import"./D_3bTjYR.js";import"./D9sX2Qi6.js";import"./CBTz8tdX.js";import"./DMoqg0Fd.js";import"./CtosDvS0.js";import"./kRIii9yh.js";import"./DNSLGqNg.js";import"./Z7qkLoXK.js";import"./C6Y-ieo6.js";import"./BFo3vNrE.js";import"./DeCyaT7k.js";import"./D4e4FYoF.js";import"./BCcN9pii.js";import"./CMKSl-Ng.js";import"./CuVAPZQ8.js";import"./psimjGaX.js";import"./B3rWqoNg.js";import"./EK7Wbu3-.js";import"./CWpJD8K1.js";import"./CzL0xTzV.js";import"./OUYfsp1i.js";import"./CjE5iPSn.js";import"./D9UsdH-b.js";import"./QEC2sJuf.js";import"./CSy6ZCzT.js";import"./abPSHzII.js";import"./BMSQkwth.js";import"./DaWZu8wl.js";import"./5wIHoxV5.js";import"./o4ws_w_T.js";import"./DbqqhwXM.js";import"./RPflLnqr.js";import"./TrJvDfxI.js";import"./jsPNKUA0.js";import"./gaGwb9HC.js";import"./shdu-Ndv.js";import"./CnxT3uvZ.js";import"./DBiaUVBh.js";import"./Cub7JM7Q.js";import"./hsuWSsy6.js";import"./B0g9CpkI.js";import"./DO9M7gn1.js";import"./DBEJUH-Z.js";import"./Dgxt_juz.js";import"./4jjeIyfe.js";import"./9Q2Y_nd6.js";import"./td2xDKru.js";import"./CRu9at2N.js";function Cn(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}const Ee=typeof document<"u";function Ze(e,n="reka"){return e||`${n}-${Zt?.()}`}function E(e,n="Assertion failed!"){if(!e)throw console.error(n),new Error(n)}function ht(e,n=document){if(!Ee)return null;if(n instanceof HTMLElement&&n?.dataset?.panelGroupId===e)return n;const t=n.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return t||null}function Le(e,n=document){if(!Ee)return null;const t=n.querySelector(`[data-panel-resize-handle-id="${e}"]`);return t||null}function gt(e,n,t=document){return Ee?ze(e,t).findIndex(o=>o.getAttribute("data-panel-resize-handle-id")===n)??null:null}function ze(e,n=document){return Ee?Array.from(n.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`)):[]}function En(e,n,t,a=document){const s=Le(n,a),o=ze(e,a),l=s?o.indexOf(s):-1,i=t[l]?.id??null,u=t[l+1]?.id??null;return[i,u]}function yt(e){return e.type==="keydown"}function xt(e){return e.type.startsWith("mouse")}function wt(e){return e.type.startsWith("touch")}function $e(e){if(xt(e))return{x:e.clientX,y:e.clientY};if(wt(e)){const n=e.touches[0];if(n&&n.clientX&&n.clientY)return{x:n.clientX,y:n.clientY}}return{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY}}function St(e,n){const t=e==="horizontal",{x:a,y:s}=$e(n);return t?a:s}function In(e,n,t,a,s){const o=t==="horizontal",l=Le(n,s);E(l);const i=l.getAttribute("data-panel-group-id");E(i);const{initialCursorPosition:u}=a,v=St(t,e),c=ht(i,s);E(c);const r=c.getBoundingClientRect(),y=o?r.width:r.height;return(v-u)/y*100}function Pn(e,n,t,a,s,o){if(yt(e)){const l=t==="horizontal";let i=0;e.shiftKey?i=100:i=s??10;let u=0;switch(e.key){case"ArrowDown":u=l?0:i;break;case"ArrowLeft":u=l?-i:0;break;case"ArrowRight":u=l?i:0;break;case"ArrowUp":u=l?0:-i;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return a==null?0:In(e,n,t,a,o)}function kn({layout:e,panelsArray:n,pivotIndices:t}){let a=0,s=100,o=0,l=0;const i=t[0];E(i!=null),n.forEach((r,y)=>{const{constraints:g}=r,{maxSize:h=100,minSize:S=0}=g;y===i?(a=S,s=h):(o+=S,l+=h)});const u=Math.min(s,100-o),v=Math.max(a,100-l),c=e[i];return{valueMax:u,valueMin:v,valueNow:c}}function Mn({panelDataArray:e}){const n=Array.from({length:e.length}),t=e.map(o=>o.constraints);let a=0,s=100;for(let o=0;o<e.length;o++){const l=t[o];E(l);const{defaultSize:i}=l;i!=null&&(a++,n[o]=i,s-=i)}for(let o=0;o<e.length;o++){const l=t[o];E(l);const{defaultSize:i}=l;if(i!=null)continue;const u=e.length-a,v=s/u;a++,n[o]=v,s-=v}return n}function ye(e,n,t){n.forEach((a,s)=>{const o=e[s];E(o);const{callbacks:l,constraints:i,id:u}=o,{collapsedSize:v=0,collapsible:c}=i,r=t[u];if(r==null||a!==r){t[u]=a;const{onCollapse:y,onExpand:g,onResize:h}=l;h&&h(a,r),c&&(y||g)&&(g&&(r==null||r===v)&&a!==v&&g(),y&&(r==null||r!==v)&&a===v&&y())}})}function An(e,n=10){let t=null;return(...s)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{e(...s)},n)}}const et=10;function _e(e,n,t=et){e=Number.parseFloat(e.toFixed(t)),n=Number.parseFloat(n.toFixed(t));const a=e-n;return a===0?0:a>0?1:-1}function K(e,n,t){return _e(e,n,t)===0}function ve({panelConstraints:e,panelIndex:n,size:t}){const a=e[n];E(a!=null);const{collapsedSize:s=0,collapsible:o,maxSize:l=100,minSize:i=0}=a;if(_e(t,i)<0)if(o){const u=(s+i)/2;_e(t,u)<0?t=s:t=i}else t=i;return t=Math.min(l,t),t=Number.parseFloat(t.toFixed(et)),t}function Ie(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function xe({delta:e,layout:n,panelConstraints:t,pivotIndices:a,trigger:s}){if(K(e,0))return n;const o=[...n],[l,i]=a;E(l!=null),E(i!=null);let u=0;if(s==="keyboard"){{const c=e<0?i:l,r=t[c];if(E(r),r.collapsible){const y=n[c];E(y!=null);const g=t[c];E(g);const{collapsedSize:h=0,minSize:S=0}=g;if(K(y,h)){const p=S-y;_e(p,Math.abs(e))>0&&(e=e<0?0-p:p)}}}{const c=e<0?l:i,r=t[c];E(r);const{collapsible:y}=r;if(y){const g=n[c];E(g!=null);const h=t[c];E(h);const{collapsedSize:S=0,minSize:p=0}=h;if(K(g,p)){const _=g-S;_e(_,Math.abs(e))>0&&(e=e<0?0-_:_)}}}}{const c=e<0?1:-1;let r=e<0?i:l,y=0;for(;;){const h=n[r];E(h!=null);const p=ve({panelConstraints:t,panelIndex:r,size:100})-h;if(y+=p,r+=c,r<0||r>=t.length)break}const g=Math.min(Math.abs(e),Math.abs(y));e=e<0?0-g:g}{let r=e<0?l:i;for(;r>=0&&r<t.length;){const y=Math.abs(e)-Math.abs(u),g=n[r];E(g!=null);const h=g-y,S=ve({panelConstraints:t,panelIndex:r,size:h});if(!K(g,S)&&(u+=g-S,o[r]=S,u.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?r--:r++}}if(K(u,0))return n;{const c=e<0?i:l,r=n[c];E(r!=null);const y=r+u,g=ve({panelConstraints:t,panelIndex:c,size:y});if(o[c]=g,!K(g,y)){let h=y-g,p=e<0?i:l;for(;p>=0&&p<t.length;){const _=o[p];E(_!=null);const q=_+h,D=ve({panelConstraints:t,panelIndex:p,size:q});if(K(_,D)||(h-=D-_,o[p]=D),K(h,0))break;e>0?p--:p++}}}const v=o.reduce((c,r)=>r+c,0);return K(v,100)?o:n}function zt(e,n,t){const a=gt(e,n,t);return a!=null?[a,a+1]:[-1,-1]}function Ln(e,n,t){return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y}function $n(e,n){if(e===n)throw new Error("Cannot compare node with itself");const t={a:ut(e),b:ut(n)};let a;for(;t.a.at(-1)===t.b.at(-1);)e=t.a.pop(),n=t.b.pop(),a=e;E(a);const s={a:rt(it(t.a)),b:rt(it(t.b))};if(s.a===s.b){const o=a.childNodes,l={a:t.a.at(-1),b:t.b.at(-1)};let i=o.length;for(;i--;){const u=o[i];if(u===l.a)return 1;if(u===l.b)return-1}}return Math.sign(s.a-s.b)}const Rn=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Dn(e){const n=getComputedStyle(_t(e)).display;return n==="flex"||n==="inline-flex"}function Nn(e){const n=getComputedStyle(e);return!!(n.position==="fixed"||n.zIndex!=="auto"&&(n.position!=="static"||Dn(e))||+n.opacity<1||"transform"in n&&n.transform!=="none"||"webkitTransform"in n&&n.webkitTransform!=="none"||"mixBlendMode"in n&&n.mixBlendMode!=="normal"||"filter"in n&&n.filter!=="none"||"webkitFilter"in n&&n.webkitFilter!=="none"||"isolation"in n&&n.isolation==="isolate"||Rn.test(n.willChange)||n.webkitOverflowScrolling==="touch")}function it(e){let n=e.length;for(;n--;){const t=e[n];if(E(t),Nn(t))return t}return null}function rt(e){return e&&Number(getComputedStyle(e).zIndex)||0}function ut(e){const n=[];for(;e;)n.push(e),e=_t(e);return n}function _t(e){return e.parentNode instanceof DocumentFragment&&e.parentNode?.host||e.parentNode}const bt=1,Ct=2,Et=4,It=8;function Tn(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}const Hn=Tn()==="coarse",ce=[];let Re=!1;const re=new Map,De=new Map,be=new Set;function Bn(e,n,t,a,s,o){const{ownerDocument:l}=n,i={direction:t,element:n,hitAreaMargins:a,nonce:s,setResizeHandlerState:o},u=re.get(l)??0;return re.set(l,u+1),be.add(i),Ae(),function(){De.delete(e),be.delete(i);const c=re.get(l)??1;re.set(l,c-1),Ae(),kt(),c===1&&re.delete(l)}}function Pe(e){const{target:n}=e,{x:t,y:a}=$e(e);Re=!0,tt({target:n,x:t,y:a}),Ae(),ce.length>0&&(nt("down",e),e.preventDefault())}function se(e){const{x:n,y:t}=$e(e);if(!Re){const{target:a}=e;tt({target:a,x:n,y:t})}nt("move",e),Pt(),ce.length>0&&e.preventDefault()}function ie(e){const{target:n}=e,{x:t,y:a}=$e(e);De.clear(),Re=!1,ce.length>0&&e.preventDefault(),nt("up",e),tt({target:n,x:t,y:a}),Pt(),Ae()}function tt({target:e,x:n,y:t}){ce.splice(0);let a=null;e instanceof HTMLElement&&(a=e),be.forEach(s=>{const{element:o,hitAreaMargins:l}=s,i=o.getBoundingClientRect(),{bottom:u,left:v,right:c,top:r}=i,y=Hn?l.coarse:l.fine;if(n>=v-y&&n<=c+y&&t>=r-y&&t<=u+y){if(a!==null&&o!==a&&!o.contains(a)&&!a.contains(o)&&$n(a,o)>0){let h=a,S=!1;for(;h&&!h.contains(o);){if(Ln(h.getBoundingClientRect(),i)){S=!0;break}h=h.parentElement}if(S)return}ce.push(s)}})}function Ue(e,n){De.set(e,n)}function Pt(){let e=!1,n=!1,t;ce.forEach(s=>{const{direction:o,nonce:l}=s;o.value==="horizontal"?e=!0:n=!0,t=l.value});let a=0;De.forEach(s=>{a|=s}),e&&n?Oe("intersection",a,t):e?Oe("horizontal",a,t):n?Oe("vertical",a,t):kt()}function Ae(){re.forEach((e,n)=>{const{body:t}=n;t.removeEventListener("contextmenu",ie),t.removeEventListener("mousedown",Pe),t.removeEventListener("mouseleave",se),t.removeEventListener("mousemove",se),t.removeEventListener("touchmove",se),t.removeEventListener("touchstart",Pe)}),window.removeEventListener("mouseup",ie),window.removeEventListener("touchcancel",ie),window.removeEventListener("touchend",ie),be.size>0&&(Re?(ce.length>0&&re.forEach((e,n)=>{const{body:t}=n;e>0&&(t.addEventListener("contextmenu",ie),t.addEventListener("mouseleave",se),t.addEventListener("mousemove",se),t.addEventListener("touchmove",se,{passive:!1}))}),window.addEventListener("mouseup",ie),window.addEventListener("touchcancel",ie),window.addEventListener("touchend",ie)):re.forEach((e,n)=>{const{body:t}=n;e>0&&(t.addEventListener("mousedown",Pe),t.addEventListener("mousemove",se),t.addEventListener("touchmove",se,{passive:!1}),t.addEventListener("touchstart",Pe))}))}function nt(e,n){be.forEach(t=>{const{setResizeHandlerState:a}=t,s=ce.includes(t);a(e,s,n)})}let Ke=null,ue=null;function Fn(e,n){if(n){const t=(n&bt)!==0,a=(n&Ct)!==0,s=(n&Et)!==0,o=(n&It)!==0;if(t)return s?"se-resize":o?"ne-resize":"e-resize";if(a)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function kt(){ue!==null&&(document.head.removeChild(ue),Ke=null,ue=null)}function Oe(e,n,t){const a=Fn(e,n);Ke!==a&&(Ke=a,ue===null&&(ue=document.createElement("style"),t&&(ue.nonce=t),document.head.appendChild(ue)),ue.innerHTML=`*{cursor: ${a}!important;}`)}function Gn({defaultSize:e,dragState:n,layout:t,panelData:a,panelIndex:s,precision:o=3}){const l=t[s];let i;return l==null?i=e!==void 0?e.toPrecision(o):"1":a.length===1?i="1":i=l.toPrecision(o),{flexBasis:0,flexGrow:i,flexShrink:1,overflow:"hidden",pointerEvents:n!==null?"none":void 0}}function qn({layout:e,panelConstraints:n}){const t=[...e],a=t.reduce((o,l)=>o+l,0);if(t.length!==n.length)throw new Error(`Invalid ${n.length} panel layout: ${t.map(o=>`${o}%`).join(", ")}`);if(!K(a,100)){console.warn(`WARNING: Invalid layout total size: ${t.map(o=>`${o}%`).join(", ")}. Layout normalization will be applied.`);for(let o=0;o<n.length;o++){const l=t[o];E(l!=null);const i=100/a*l;t[o]=i}}let s=0;for(let o=0;o<n.length;o++){const l=t[o];E(l!=null);const i=ve({panelConstraints:n,panelIndex:o,size:l});l!==i&&(s+=l-i,t[o]=i)}if(!K(s,0))for(let o=0;o<n.length;o++){const l=t[o];E(l!=null);const i=l+s,u=ve({panelConstraints:n,panelIndex:o,size:i});if(l!==u&&(s-=u-l,t[o]=u,K(s,0)))break}return t}function Vn({eagerValuesRef:e,groupId:n,layout:t,panelDataArray:a,panelGroupElement:s,setLayout:o}){Se(l=>{const i=s.value;if(!i)return;const u=ze(n,i);for(let v=0;v<a.length-1;v++){const{valueMax:c,valueMin:r,valueNow:y}=kn({layout:t.value,panelsArray:a,pivotIndices:[v,v+1]}),g=u[v];if(g!=null){const h=a[v];E(h),g.setAttribute("aria-controls",h.id),g.setAttribute("aria-valuemax",`${Math.round(c)}`),g.setAttribute("aria-valuemin",`${Math.round(r)}`),g.setAttribute("aria-valuenow",y!=null?`${Math.round(y)}`:"")}}l(()=>{u.forEach(v=>{v.removeAttribute("aria-controls"),v.removeAttribute("aria-valuemax"),v.removeAttribute("aria-valuemin"),v.removeAttribute("aria-valuenow")})})}),Se(l=>{const i=s.value;if(!i)return;const u=e.value;E(u);const{panelDataArray:v}=u,c=ht(n,i);E(c!=null,`No group found for id "${n}"`);const r=ze(n,i);E(r);const y=r.map(g=>{const h=g.getAttribute("data-panel-resize-handle-id");E(h);const[S,p]=En(n,h,v,i);if(S==null||p==null)return()=>{};const _=q=>{if(!q.defaultPrevented)switch(q.key){case"Enter":{q.preventDefault();const D=v.findIndex(N=>N.id===S);if(D>=0){const N=v[D];E(N);const M=t.value[D],{collapsedSize:V=0,collapsible:X,minSize:A=0}=N.constraints;if(M!=null&&X){const F=xe({delta:K(M,V)?A-V:V-M,layout:t.value,panelConstraints:v.map(Y=>Y.constraints),pivotIndices:zt(n,h,i),trigger:"keyboard"});t.value!==F&&o(F)}}break}}};return g.addEventListener("keydown",_),()=>{g.removeEventListener("keydown",_)}});l(()=>{y.forEach(g=>g())})})}function ct(e){try{if(typeof localStorage<"u")e.getItem=n=>localStorage.getItem(n),e.setItem=(n,t)=>{localStorage.setItem(n,t)};else throw new TypeError("localStorage not supported in this environment")}catch(n){console.error(n),e.getItem=()=>null,e.setItem=()=>{}}}function Mt(e){return`reka:${e}`}function At(e){return e.map(n=>{const{constraints:t,id:a,idIsFromProps:s,order:o}=n;return s?a:o?`${o}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((n,t)=>n.localeCompare(t)).join(",")}function Lt(e,n){try{const t=Mt(e),a=n.getItem(t);if(a){const s=JSON.parse(a);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function Un(e,n,t){const a=Lt(e,t)??{},s=At(n);return a[s]??null}function On(e,n,t,a,s){const o=Mt(e),l=At(n),i=Lt(e,s)??{};i[l]={expandToSizes:Object.fromEntries(t.entries()),layout:a};try{s.setItem(o,JSON.stringify(i))}catch(u){console.error(u)}}const jn=100,we={getItem:e=>(ct(we),we.getItem(e)),setItem:(e,n)=>{ct(we),we.setItem(e,n)}},[$t,Kn]=Kt("PanelGroup");var Wn=fe({__name:"SplitterGroup",props:{id:{type:[String,null],required:!1},autoSaveId:{type:[String,null],required:!1,default:null},direction:{type:String,required:!0},keyboardResizeBy:{type:[Number,null],required:!1,default:10},storage:{type:Object,required:!1,default:()=>we},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["layout"],setup(e,{emit:n}){const t=e,a=n,s={},{direction:o}=je(t),l=Ze(t.id,"reka-splitter-group"),i=Wt(),{forwardRef:u,currentElement:v}=ft(),c=W(null),r=W([]),y=W({}),g=W(new Map),h=W(0),S=B(()=>({autoSaveId:t.autoSaveId,direction:t.direction,dragState:c.value,id:l,keyboardResizeBy:t.keyboardResizeBy,storage:t.storage})),p=W({layout:r.value,panelDataArray:[],panelDataArrayChanged:!1}),_=d=>r.value=d;Vn({eagerValuesRef:p,groupId:l,layout:r,panelDataArray:p.value.panelDataArray,setLayout:_,panelGroupElement:v}),Se(()=>{const{panelDataArray:d}=p.value,{autoSaveId:z}=t;if(z){if(r.value.length===0||r.value.length!==d.length)return;let x=s[z];x||(x=An(On,jn),s[z]=x);const w=[...d],P=new Map(g.value);x(z,w,P,r.value,t.storage)}});function q(d,z){const{panelDataArray:x}=p.value,w=Z(x,d);return Gn({defaultSize:z,dragState:c.value,layout:r.value,panelData:x,panelIndex:w})}function D(d){const{panelDataArray:z}=p.value;z.push(d),z.sort((x,w)=>{const P=x.order,b=w.order;return P==null&&b==null?0:P==null?-1:b==null?1:P-b}),p.value.panelDataArrayChanged=!0}Ce(()=>p.value.panelDataArrayChanged,()=>{if(p.value.panelDataArrayChanged){p.value.panelDataArrayChanged=!1;const{autoSaveId:d,storage:z}=S.value,{layout:x,panelDataArray:w}=p.value;let P=null;if(d){const L=Un(d,w,z);L&&(g.value=new Map(Object.entries(L.expandToSizes)),P=L.layout)}P===null&&(P=Mn({panelDataArray:w}));const b=qn({layout:P,panelConstraints:w.map(L=>L.constraints)});Cn(x,b)||(_(b),p.value.layout=b,a("layout",b),ye(w,b,y.value))}});function N(d){return function(x){x.preventDefault();const w=v.value;if(!w)return()=>null;const{direction:P,dragState:b,id:L,keyboardResizeBy:O}=S.value,{layout:G,panelDataArray:$}=p.value,{initialLayout:U}=b??{},J=zt(L,d,w);let H=Pn(x,d,P,b,O,w);if(H===0)return;const pe=P==="horizontal";i.value==="rtl"&&pe&&(H=-H);const m=$.map(le=>le.constraints),C=xe({delta:H,layout:U??G,panelConstraints:m,pivotIndices:J,trigger:yt(x)?"keyboard":"mouse-or-touch"}),k=!Ie(G,C);(xt(x)||wt(x))&&h.value!==H&&(h.value=H,k?Ue(d,0):pe?Ue(d,H<0?bt:Ct):Ue(d,H<0?Et:It)),k&&(_(C),p.value.layout=C,a("layout",C),ye($,C,y.value))}}function M(d,z){const{layout:x,panelDataArray:w}=p.value,P=w.map(U=>U.constraints),{panelSize:b,pivotIndices:L}=ee(w,d,x);E(b!=null);const G=Z(w,d)===w.length-1?b-z:z-b,$=xe({delta:G,layout:x,panelConstraints:P,pivotIndices:L,trigger:"imperative-api"});Ie(x,$)||(_($),p.value.layout=$,a("layout",$),ye(w,$,y.value))}function V(d,z){const{layout:x,panelDataArray:w}=p.value,P=Z(w,d);w[P]=d,p.value.panelDataArrayChanged=!0;const{collapsedSize:b=0,collapsible:L}=z,{collapsedSize:O=0,collapsible:G,maxSize:$=100,minSize:U=0}=d.constraints,{panelSize:J}=ee(w,d,x);J!==null&&(L&&G&&J===b?b!==O&&M(d,O):J<U?M(d,U):J>$&&M(d,$))}function X(d,z){const{direction:x}=S.value,{layout:w}=p.value;if(!v.value)return;const P=Le(d,v.value);E(P);const b=St(x,z);c.value={dragHandleId:d,dragHandleRect:P.getBoundingClientRect(),initialCursorPosition:b,initialLayout:w}}function A(){c.value=null}function F(d){const{panelDataArray:z}=p.value,x=Z(z,d);x>=0&&(z.splice(x,1),delete y.value[d.id],p.value.panelDataArrayChanged=!0)}function Y(d){const{layout:z,panelDataArray:x}=p.value;if(d.constraints.collapsible){const w=x.map(O=>O.constraints),{collapsedSize:P=0,panelSize:b,pivotIndices:L}=ee(x,d,z);if(E(b!=null,`Panel size not found for panel "${d.id}"`),b!==P){g.value.set(d.id,b);const G=Z(x,d)===x.length-1?b-P:P-b,$=xe({delta:G,layout:z,panelConstraints:w,pivotIndices:L,trigger:"imperative-api"});Ie(z,$)||(_($),p.value.layout=$,a("layout",$),ye(x,$,y.value))}}}function he(d){const{layout:z,panelDataArray:x}=p.value;if(d.constraints.collapsible){const w=x.map(G=>G.constraints),{collapsedSize:P=0,panelSize:b,minSize:L=0,pivotIndices:O}=ee(x,d,z);if(b===P){const G=g.value.get(d.id),$=G!=null&&G>=L?G:L,J=Z(x,d)===x.length-1?b-$:$-b,H=xe({delta:J,layout:z,panelConstraints:w,pivotIndices:O,trigger:"imperative-api"});Ie(z,H)||(_(H),p.value.layout=H,a("layout",H),ye(x,H,y.value))}}}function de(d){const{layout:z,panelDataArray:x}=p.value,{panelSize:w}=ee(x,d,z);return E(w!=null,`Panel size not found for panel "${d.id}"`),w}function Ne(d){const{layout:z,panelDataArray:x}=p.value,{collapsedSize:w=0,collapsible:P,panelSize:b}=ee(x,d,z);return P?b===void 0?d.constraints.defaultSize===d.constraints.collapsedSize:b===w:!1}function Te(d){const{layout:z,panelDataArray:x}=p.value,{collapsedSize:w=0,collapsible:P,panelSize:b}=ee(x,d,z);return E(b!=null,`Panel size not found for panel "${d.id}"`),!P||b>w}Kn({direction:o,dragState:c.value,groupId:l,reevaluatePanelConstraints:V,registerPanel:D,registerResizeHandle:N,resizePanel:M,startDragging:X,stopDragging:A,unregisterPanel:F,panelGroupElement:v,collapsePanel:Y,expandPanel:he,isPanelCollapsed:Ne,isPanelExpanded:Te,getPanelSize:de,getPanelStyle:q});function Z(d,z){return d.findIndex(x=>x===z||x.id===z.id)}function ee(d,z,x){const w=Z(d,z),b=w===d.length-1?[w-1,w]:[w,w+1],L=x[w];return{...z.constraints,panelSize:L,pivotIndices:b}}return(d,z)=>(T(),ae(f(We),{ref:f(u),as:d.as,"as-child":d.asChild,style:pt({display:"flex",flexDirection:f(o)==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"}),"data-panel-group":"","data-orientation":f(o),"data-panel-group-id":f(l)},{default:j(()=>[Xe(d.$slots,"default",{layout:r.value})]),_:3},8,["as","as-child","style","data-orientation","data-panel-group-id"]))}}),Xn=Wn,Jn=fe({__name:"SplitterPanel",props:{collapsedSize:{type:Number,required:!1},collapsible:{type:Boolean,required:!1},defaultSize:{type:Number,required:!1},id:{type:String,required:!1},maxSize:{type:Number,required:!1},minSize:{type:Number,required:!1},order:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["collapse","expand","resize"],setup(e,{expose:n,emit:t}){const a=e,s=t,o=$t();if(o===null)throw new Error("SplitterPanel components must be rendered within a SplitterGroup container");const{collapsePanel:l,expandPanel:i,getPanelSize:u,getPanelStyle:v,isPanelCollapsed:c,resizePanel:r,groupId:y,reevaluatePanelConstraints:g,registerPanel:h,unregisterPanel:S}=o,p=Ze(a.id,"reka-splitter-panel"),_=B(()=>({callbacks:{onCollapse:()=>s("collapse"),onExpand:()=>s("expand"),onResize:(...A)=>s("resize",...A)},constraints:{collapsedSize:a.collapsedSize&&Number.parseFloat(a.collapsedSize.toFixed(et)),collapsible:a.collapsible,defaultSize:a.defaultSize,maxSize:a.maxSize,minSize:a.minSize},id:p,idIsFromProps:a.id!==void 0,order:a.order}));Ce(()=>_.value.constraints,(A,F)=>{(F.collapsedSize!==A.collapsedSize||F.collapsible!==A.collapsible||F.maxSize!==A.maxSize||F.minSize!==A.minSize)&&g(_.value,F)},{deep:!0}),Je(()=>{h(_.value)}),Qe(()=>{S(_.value)});const q=B(()=>v(_.value,a.defaultSize)),D=B(()=>c(_.value)),N=B(()=>!D.value);function M(){l(_.value)}function V(){i(_.value)}function X(A){r(_.value,A)}return n({collapse:M,expand:V,getSize(){return u(_.value)},resize:X,isCollapsed:D,isExpanded:N}),(A,F)=>(T(),ae(f(We),{id:f(p),style:pt(q.value),as:A.as,"as-child":A.asChild,"data-panel":"","data-panel-collapsible":A.collapsible||void 0,"data-panel-group-id":f(y),"data-panel-id":f(p),"data-panel-size":Number.parseFloat(`${q.value.flexGrow}`).toFixed(1),"data-state":A.collapsible?D.value?"collapsed":"expanded":void 0},{default:j(()=>[Xe(A.$slots,"default",{isCollapsed:D.value,isExpanded:N.value,expand:V,collapse:M,resize:X})]),_:3},8,["id","style","as","as-child","data-panel-collapsible","data-panel-group-id","data-panel-id","data-panel-size","data-state"]))}}),dt=Jn;function Qn({disabled:e,handleId:n,resizeHandler:t,panelGroupElement:a}){Se(s=>{const o=a.value;if(e.value||t.value===null||o===null)return;const l=Le(n,o);if(l==null)return;const i=u=>{if(!u.defaultPrevented)switch(u.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{u.preventDefault(),t.value?.(u);break}case"F6":{u.preventDefault();const v=l.getAttribute("data-panel-group-id");E(v);const c=ze(v,o),r=gt(v,n,o);E(r!==null);const y=u.shiftKey?r>0?r-1:c.length-1:r+1<c.length?r+1:0;c[y].focus();break}}};l.addEventListener("keydown",i),s(()=>{l.removeEventListener("keydown",i)})})}var Yn=fe({__name:"SplitterResizeHandle",props:{id:{type:String,required:!1},hitAreaMargins:{type:Object,required:!1},tabindex:{type:Number,required:!1,default:0},disabled:{type:Boolean,required:!1},nonce:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["dragging"],setup(e,{emit:n}){const t=e,a=n,{forwardRef:s,currentElement:o}=ft(),{disabled:l}=je(t),i=$t();if(i===null)throw new Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:u,groupId:v,registerResizeHandle:c,startDragging:r,stopDragging:y,panelGroupElement:g}=i,h=Ze(t.id,"reka-splitter-resize-handle"),S=W("inactive"),p=W(!1),_=W(null),{nonce:q}=je(t),D=Xt(q);return Ce(l,()=>{Ee&&(l.value?_.value=null:_.value=c(h))},{immediate:!0}),Se(N=>{if(l.value||_.value===null)return;const M=o.value;if(!M)return;E(M);const V=(X,A,F)=>{if(A)switch(X){case"down":{S.value="drag",r(h,F),a("dragging",!0);break}case"move":{S.value!=="drag"&&(S.value="hover"),_.value?.(F);break}case"up":{S.value="hover",y(),a("dragging",!1);break}}else S.value="inactive"};N(Bn(h,M,u,{coarse:t.hitAreaMargins?.coarse??15,fine:t.hitAreaMargins?.fine??5},D,V))}),Qn({disabled:l,resizeHandler:_,handleId:h,panelGroupElement:g}),(N,M)=>(T(),ae(f(We),{id:f(h),ref:f(s),style:{touchAction:"none",userSelect:"none"},as:N.as,"as-child":N.asChild,role:"separator","data-resize-handle":"",tabindex:N.tabindex,"data-state":S.value,"data-disabled":f(l)?"":void 0,"data-orientation":f(u),"data-panel-group-id":f(v),"data-resize-handle-active":S.value==="drag"?"pointer":p.value?"keyboard":void 0,"data-resize-handle-state":S.value,"data-panel-resize-handle-enabled":!f(l),"data-panel-resize-handle-id":f(h),onBlur:M[0]||(M[0]=V=>p.value=!1),onFocus:M[1]||(M[1]=V=>p.value=!1)},{default:j(()=>[Xe(N.$slots,"default")]),_:3},8,["id","as","as-child","tabindex","data-state","data-disabled","data-orientation","data-panel-group-id","data-resize-handle-active","data-resize-handle-state","data-panel-resize-handle-enabled","data-panel-resize-handle-id"]))}}),Zn=Yn;const ea={key:0,class:"flex h-full w-full flex-col"},ta={class:"flex items-center justify-between px-4 py-3"},na={class:"flex min-w-0 flex-1 items-center gap-3"},aa={class:"flex size-10 items-center justify-center rounded-lg p-2 shadow-md"},oa={class:"min-w-0 flex-1"},la={class:"text-foreground truncate text-sm font-semibold"},sa={class:"text-muted-foreground truncate text-xs"},ia={class:"flex items-center gap-1"},ra={class:"flex-1 overflow-auto"},ua={key:0,class:"h-full"},ca=["src"],da={key:1,class:"flex h-full items-center justify-center p-4"},fa=["src"],pa={class:"text-muted-foreground"},ma=["href"],va={key:2,class:"flex h-full flex-col items-center justify-center gap-6 p-8"},ha={class:"bg-primary/10 flex size-24 items-center justify-center rounded-full"},ga={class:"text-center"},ya={class:"text-foreground mb-2 truncate px-4 text-base font-medium break-all"},xa=["src"],wa={class:"text-muted-foreground"},Sa=["href"],za={key:3,class:"bg-muted/30 flex h-full flex-col items-center justify-center gap-4 p-8"},_a={class:"text-center"},ba={class:"text-foreground mb-2 truncate px-4 text-base font-medium break-all"},Ca={class:"text-muted-foreground mb-4 truncate text-sm"},Ea=fe({__name:"files",props:{file:{}},emits:["close"],setup(e,{emit:n}){const t=e,a=n,s=B(()=>t.file?.name.split(".").pop()?.toLowerCase()||""),o=B(()=>s.value==="pdf"),l=B(()=>["doc","docx","xls","xlsx","ppt","pptx"].includes(s.value)),i=B(()=>t.file?pn(t.file):!1),u=B(()=>t.file?mn(t.file):!1),v=B(()=>t.file?vn(t.file):"file"),c=B(()=>o.value?"i-lucide-file-text":l.value?"i-lucide-file-box":i.value?"i-lucide-video":u.value?"i-lucide-music":"i-lucide-file"),r=B(()=>v.value==="video"?"Video":v.value==="audio"?"Audio":`${s.value.toUpperCase()} File`),y=()=>a("close"),g=()=>{t.file?.url&&window.open(t.file.url,"_blank")};return(h,S)=>{const p=mt,_=Ye;return e.file?(T(),te("div",ea,[I("div",ta,[I("div",na,[I("div",aa,[R(p,{name:f(c),class:"size-6 flex-none"},null,8,["name"])]),I("div",oa,[I("h3",la,ne(e.file.name),1),I("p",sa,ne(f(r)),1)])]),I("div",ia,[R(_,{icon:"i-lucide-download",color:"neutral",variant:"ghost",size:"sm",onClick:g}),R(_,{icon:"i-lucide-x",color:"neutral",variant:"ghost",size:"sm",onClick:y})])]),I("div",ra,[f(o)?(T(),te("div",ua,[I("iframe",{src:e.file.url,class:"h-full w-full border-0"},null,8,ca)])):f(i)?(T(),te("div",da,[I("video",{src:e.file.url,controls:"",class:"max-h-full max-w-full rounded-lg shadow-lg",preload:"metadata"},[I("p",pa,[S[0]||(S[0]=ke(" Your browser doesn't support video playback. ",-1)),I("a",{href:e.file.url,target:"_blank",class:"text-primary hover:underline"}," Download video file ",8,ma)])],8,fa)])):f(u)?(T(),te("div",va,[I("div",ha,[R(p,{name:"i-lucide-music",class:"text-primary size-12"})]),I("div",ga,[I("p",ya,ne(e.file.name),1),S[1]||(S[1]=I("p",{class:"text-muted-foreground mb-4 text-sm"},"Audio File",-1))]),I("audio",{src:e.file.url,controls:"",class:"w-full max-w-md",preload:"metadata"},[I("p",wa,[S[2]||(S[2]=ke(" Your browser doesn't support audio playback. ",-1)),I("a",{href:e.file.url,target:"_blank",class:"text-primary hover:underline"}," Download audio file ",8,Sa)])],8,xa)])):(T(),te("div",za,[R(p,{name:f(l)?"i-lucide-file-box":"i-lucide-file",class:"text-muted-foreground size-20"},null,8,["name"]),I("div",_a,[I("p",ba,ne(e.file.name),1),I("p",Ca,ne(f(l)?"This file type cannot be previewed directly":"Preview not available for this file type"),1),R(_,{icon:"i-lucide-download",color:"primary",onClick:g},{default:j(()=>[...S[3]||(S[3]=[ke(" Download File ",-1)])]),_:1})])]))])])):oe("",!0)}}}),Ia={key:0,class:"flex h-full w-full flex-col"},Pa={class:"flex items-center justify-between px-4 py-3"},ka={class:"flex min-w-0 flex-1 items-center gap-3"},Ma={class:"flex size-10 items-center justify-center rounded-lg p-2 shadow-md"},Aa={class:"min-w-0 flex-1"},La={class:"text-foreground truncate text-sm font-semibold"},$a={class:"text-muted-foreground truncate text-xs"},Ra={class:"flex items-center gap-1"},Da={class:"flex-1 overflow-auto"},Na=fe({__name:"html",props:{htmlContent:{}},emits:["close"],setup(e,{emit:n}){const t=e,a=n,s=vt("iframeRefs"),o=me("HTML Preview"),l=me(!0),i=c=>{const r=c.match(/<title[^>]*>([^<]+)<\/title>/i);return r&&r?.[1]?.trim()||"HTML Preview"},u=()=>{const c=t.htmlContent,r=s.value?.contentWindow;c&&r&&(r.postMessage({BuildingAICode:c},location.origin),o.value=i(c))},v=c=>{if(c.source===s.value?.contentWindow&&c.origin===location.origin){if(c.data?.iframeLoaded){u();return}c.data?.title&&(o.value=c.data.title)}};return Je(()=>window.addEventListener("message",v)),Qe(()=>window.removeEventListener("message",v)),Ce(()=>t.htmlContent,async()=>{u(),l.value=!1,await Me(),l.value=!0}),(c,r)=>{const y=mt,g=Ye;return e.htmlContent?(T(),te("div",Ia,[I("div",Pa,[I("div",ka,[I("div",Ma,[R(y,{name:"i-lucide-code",class:"size-6 flex-none"})]),I("div",Aa,[I("h3",La,ne(f(o)),1),I("p",$a,ne(c.$t("common.preview")),1)])]),I("div",Ra,[R(g,{icon:"i-lucide-x",color:"neutral",variant:"ghost",size:"sm",onClick:r[0]||(r[0]=h=>a("close"))})])]),I("div",Da,[f(l)?(T(),te("iframe",{key:0,ref_key:"iframeRefs",ref:s,src:"/runchat.html",class:"h-full w-full border-0"},null,512)):oe("",!0)])])):oe("",!0)}}}),Ta={key:0,class:"bg-background border-border flex h-full w-full flex-col border-l"},Ha=fe({__name:"index",props:{type:{},data:{}},emits:["close"],setup(e,{emit:n}){const t=e,a=n,s=()=>a("close");return gn({Escape:()=>s()}),(o,l)=>e.data?(T(),te("div",Ta,[t.type==="file"?(T(),ae(Ea,{key:0,file:t.data,onClose:s},null,8,["file"])):t.type==="html"?(T(),ae(Na,{key:1,"html-content":t.data,onClose:s},null,8,["html-content"])):oe("",!0)])):oe("",!0)}}),Ba="chat:run:html";function Fa(){const e=W(null),n=W(null),t=B(()=>e.value!==null),a=(u,v)=>{e.value=u,n.value=v},s=()=>{e.value=null,n.value=null},o=u=>a("file",u),l=u=>a("html",u),i=(u,v)=>t.value?s():a(u,v);return en().hook(Ba,l),{previewType:e,previewData:n,isPreviewOpen:t,openFilePreview:o,openHtmlPreview:l,closePreview:s,togglePreview:i}}const Ga={class:"ai-chat dark:bg-muted/50 flex h-full min-h-0 w-full overflow-hidden pl-0"},qa={class:"flex w-full items-center justify-center py-2"},Va={class:"w-full max-w-[800px]"},Ua={class:"text-muted-forgeround w-full p-2 text-center text-xs"},el=fe({__name:"[id]",async setup(e){let n,t;const{params:a}=tn(),{t:s}=nn(),o=an(),l=vt("scrollAreaRef"),{height:i}=on(l),u=_n(),v=Gt(),c=B(()=>a.id),r=ln({page:1,pageSize:5}),y=me(!1),g=B(()=>u.selectedModel||{}),h=me([]),S=me(!1),p=me(),{previewType:_,previewData:q,openFilePreview:D,closePreview:N}=Fa(),{data:M,pending:V}=([n,t]=Fe(()=>Ge(`chat-messages-${c.value}`,()=>lt(c.value,r),{transform:m=>(m.items=m.items.reverse(),m)})),n=await n,t(),n);if(!M.value?.items)throw sn({statusCode:404,statusMessage:"Chat not found",fatal:!0});y.value=M.value.total>M.value.items.length;const{data:X}=([n,t]=Fe(()=>Ge(`chat-detail-${c.value}`,()=>wn(c.value))),n=await n,t(),n),{data:A}=([n,t]=Fe(()=>Ge("chat-config",()=>Sn())),n=await n,t(),n),F=M.value.items.map(m=>({id:m.id||st(),role:m.role,metadata:m.metadata,content:m.errorMessage||m.content,status:m.errorMessage?"failed":"completed",mcpToolCalls:m.mcpToolCalls,...m.role==="assistant"&&{createdAt:m.createdAt},updatedAt:m.updatedAt,avatar:m.avatar})),{messages:Y,input:he,files:de,handleSubmit:Ne,reload:Te,stop:Z,status:ee,error:d}=bn({id:c.value,api:xn,initialMessages:F,body:{get modelId(){return g.value?.id},get mcpServers(){return JSON.parse(localStorage.getItem("mcpIds")||"[]")},saveConversation:!0,get conversationId(){return c.value}},onToolCall(){U()},onResponse(m){m.status===401&&ot().logout(!0)},onError(m){const C=m?.message||s("ai-chat.frontend.sendFailed");console.error("Chat error:",C)},onFinish(){ot().getUser(),qe("chats"),qe(`chat-detail-${c.value}`)}}),z=B(()=>ee.value==="loading"),x=W(!0);function w(m){const C=m.target,k=40;x.value=C.scrollHeight-(C.scrollTop+C.clientHeight)<=k}async function P(){if(y.value){r.page++;try{const m=await lt(c.value,r),C=m.items.reverse().map(k=>({id:k.id||st(),role:k.role,content:k.errorMessage||k.content,status:k.errorMessage?"failed":"completed",mcpToolCalls:k.mcpToolCalls,...k.role==="assistant"&&{createdAt:k.createdAt},updatedAt:k.updatedAt,avatar:k.avatar,metadata:k.metadata}));Y.value.unshift(...C),y.value=m.total>Y.value.length}catch(m){r.page--,console.error("Failed to load more messages:",m),y.value=!0}}}const b=W();function L(){try{const m=JSON.parse(localStorage.getItem("mcpIds")||"[]");return Array.isArray(m)?m:[]}catch{return[]}}function O(m){m.length?localStorage.setItem("mcpIds",JSON.stringify(m)):localStorage.removeItem("mcpIds")}const G=()=>{if(!b.value)return;Array.isArray(h.value)||(h.value=[]);const m=L(),C=b.value,k=m.includes(C),le=h.value.includes(C);if(!k&&!le)m.push(C),le||h.value.push(C),O(m);else{const He=m.filter(ge=>ge!==C),Be=h.value.filter(ge=>ge!==C);O(He),h.value=Be}S.value=L().includes(C)},$=async()=>{try{const m=await yn();if(!m)return;p.value=m,b.value=m.id,m.id&&(S.value=L().includes(m.id))}catch(m){console.error("Failed to fetch quick menu:",m)}};async function U(m=!0){await Me(),l.value?.scrollToBottom(m)}async function J(m){try{await zn(c.value,{title:m.target.value}),qe("chats")}catch(C){console.error("Failed to save conversation name:",C)}}async function H(m){if(!(!m.trim()&&!de.value.length||z.value)){if(!g.value.id){o.warning(s("ai-chat.frontend.selectModel"));return}await Ne(m),U()}}Ce(()=>Y.value.at(-1)?.content,()=>Me(()=>{x.value&&U(!0)}),{flush:"post"});let pe=null;return Je(async()=>{U(!1);const m=l.value?.getViewportElement(),C=m&&m.viewportElement;C&&(C.addEventListener("scroll",w,{passive:!0}),w({target:C}),pe=new MutationObserver(()=>{x.value&&U(!1)}),pe.observe(C,{childList:!0,subtree:!0,characterData:!0}));const k=v.getPendingConversation();if(Y.value.length===0&&k&&k.id===c.value){const le=k.files||[];de.value=le,g.value.id=k.modelId||"",await Me(),await H(k.title||"")}v.clearPendingConversation(),await $()}),Qe(()=>{const m=l.value?.getViewportElement();(m&&m.viewportElement)?.removeEventListener("scroll",w),pe?.disconnect()}),(m,C)=>{const k=qt,le=Vt,He=Ut,Be=jt,ge=Ot,Rt=Jt,Dt=Qt,Nt=Yt,Tt=cn,Ht=Ye,Bt=hn,Ft=Ha;return T(),te("div",Ga,[I("div",{class:at(["border-border/50 h-full flex-none border-r pl-0",{"border-none":!f(u).chatSidebarVisible}])},[R(k)],2),R(f(Xn),{id:"chat-main-splitter",direction:"horizontal",class:"h-full min-w-0 flex-1"},{default:j(()=>[R(f(dt),{id:"chat-content-panel","min-size":30,"default-size":f(_)?70:100,class:"flex h-full flex-col items-center justify-center overflow-hidden rounded-lg px-4 xl:px-0"},{default:j(()=>[I("div",qa,[R(le,{"model-value":f(z)?f(s)("ai-chat.frontend.messages.typing"):f(X)?.title,size:"sm",variant:"ghost",ui:{base:"text-center text-lg"},onChange:C[0]||(C[0]=Q=>J(Q))},null,8,["model-value"])]),R(Rt,{class:"revert-layer h-full min-h-0 w-full",type:"auto",ref_key:"scrollAreaRef",ref:l,onInView:C[1]||(C[1]=Q=>U(!1))},{default:j(()=>[R(ge,{loading:f(V),"has-more":f(y),threshold:500,"content-class":"max-w-[800px] w-full space-y-3 py-6",onLoadMore:P},{default:j(()=>[R(Be,{messages:f(Y),"scroll-area-height":f(i),error:f(d),assistant:{actions:[{label:f(s)("ai-chat.frontend.messages.retry"),icon:"i-lucide-rotate-cw-square",onClick:()=>f(Te)()}]},"spacing-offset":160,onFilePreview:f(D)},{content:j(({message:Q})=>[R(He,{content:Q.content},null,8,["content"])]),_:1},8,["messages","scroll-area-height","error","assistant","onFilePreview"])]),_:1},8,["loading","has-more"])]),_:1},512),I("div",Va,[R(Bt,{modelValue:f(he),"onUpdate:modelValue":C[3]||(C[3]=Q=>Ve(he)?he.value=Q:null),"file-list":f(de),"onUpdate:fileList":C[4]||(C[4]=Q=>Ve(de)?de.value=Q:null),"is-loading":f(z),needAuth:!0,attachmentSizeLimit:f(A)?.attachmentSizeLimit,class:"sticky bottom-0 z-10 [view-transition-name:chat-prompt]",onStop:f(Z),onSubmit:H},{"panel-left":j(()=>[R(Dt,{supportedModelTypes:["llm"],"show-billingRule":!0,"open-local-storage":!0,placeholder:"选择AI模型开始对话",onChange:f(u).setSelectedModel},null,8,["onChange"]),R(Nt,{modelValue:f(h),"onUpdate:modelValue":C[2]||(C[2]=Q=>Ve(h)?h.value=Q:null),mcpIds:f(h)||[],capability:"chat",placeholder:"选择MCP..."},null,8,["modelValue","mcpIds"]),f(p)?(T(),ae(Ht,{key:0,color:f(S)?"primary":"neutral",variant:"ghost",icon:f(p)?.icon?"":"tabler:tool",ui:{leadingIcon:"size-4"},class:at({"bg-primary/10":f(S)}),onClick:un(G,["stop"])},{default:j(()=>[f(p)?.icon?(T(),ae(Tt,{key:0,src:f(p)?.icon,ui:{root:"size-4 rounded-md"}},null,8,["src"])):oe("",!0),ke(" "+ne(f(p)?.alias||f(p)?.name),1)]),_:1},8,["color","icon","class"])):oe("",!0)]),_:1},8,["modelValue","file-list","is-loading","attachmentSizeLimit","onStop"])]),I("div",Ua,ne(f(A)?.welcomeInfo?.footer),1)]),_:1},8,["default-size"]),f(_)?(T(),ae(f(Zn),{key:0,id:"chat-resize-handle",class:"w-px origin-center transition-opacity duration-300"})):oe("",!0),rn(R(f(dt),{id:"chat-preview-panel","min-size":20,"default-size":30,class:"preview-panel-wrapper relative h-full overflow-hidden",style:{contain:"layout size style"}},{default:j(()=>[R(dn,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 translate-x-8","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"transition-all duration-300 ease-in","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 translate-x-8"},{default:j(()=>[f(_)?(T(),ae(Ft,{key:0,type:f(_),data:f(q),onClose:f(N)},null,8,["type","data","onClose"])):oe("",!0)]),_:1})]),_:1},512),[[fn,f(_)]])]),_:1})])}}});export{el as default};
