function d(t){const e=new Date(t),n=new Date,a=new Date(n.getFullYear(),n.getMonth(),n.getDate()),c=new Date(e.getFullYear(),e.getMonth(),e.getDate()),o=a.getTime()-c.getTime(),s=Math.floor(o/(1e3*60*60*24));return s===0?"today":s===1?"yesterday":s<=7?"week":s<=30?"month":`${e.getFullYear()}-${e.getMonth()+1}`}function m(t,e){if(!e)switch(t){case"pinned":return"置顶";case"today":return"今天";case"yesterday":return"昨天";case"week":return"7天内";case"month":return"30天内";default:if(typeof t=="string"&&t.includes("-")){const[n,a]=t.split("-"),c=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],o=new Date().getFullYear();return parseInt(n||"0")===o?c[parseInt(a||"0")-1]||"":`${n}年${c[parseInt(a||"0")-1]}`}return t}switch(t){case"pinned":return"";case"today":return e("common.dateGroup.today");case"yesterday":return e("common.dateGroup.yesterday");case"week":return e("common.dateGroup.week");case"month":return e("common.dateGroup.month");default:if(typeof t=="string"&&t.includes("-")){const[n,a]=t.split("-"),c=["january","february","march","april","may","june","july","august","september","october","november","december"],o=new Date().getFullYear(),s=e(`common.dateGroup.months.${c[parseInt(a||"0")-1]}`);return parseInt(n||"0")===o?s:`${n}年${s}`}return t}}function f(t){switch(t){case"pinned":return 0;case"today":return 1;case"yesterday":return 2;case"week":return 3;case"month":return 4;default:if(typeof t=="string"&&t.includes("-")){const[e,n]=t.split("-");return 1e3+parseInt(e||"0")*100+parseInt(n||"0")}return 9999}}function h(t,e="updatedAt",n){const a=[],c=[];t.forEach(r=>{r.isPinned??!1?a.push(r):c.push(r)});const o=new Map;c.forEach(r=>{const u=d(r[e]);o.has(u)||o.set(u,[]);const i=o.get(u);i&&i.push(r)});const s=[];a.length>0&&s.push({label:m("pinned",n),key:"pinned",items:a.sort((r,u)=>new Date(u[e]).getTime()-new Date(r[e]).getTime())});const l=Array.from(o.entries()).map(([r,u])=>({label:m(r,n),key:r,items:u.sort((i,p)=>new Date(p[e]).getTime()-new Date(i[e]).getTime())})).sort((r,u)=>f(r.key)-f(u.key));return s.push(...l),s}export{h as g};
