const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CkI909kw.js","./cd55qm53.js","./Cgyg1gJC.js","./o4ws_w_T.js","./Ghlq83yM.js","./DQMjdCEn.js","./OUYfsp1i.js","./BFo3vNrE.js","./CuVAPZQ8.js","./Z7qkLoXK.js","./CjE5iPSn.js","./D9UsdH-b.js","./MCK2d4XT.js","./EK7Wbu3-.js","./BZx839BO.js","./CSy6ZCzT.js"])))=>i.map(i=>d[i]);
import{d as A,V as D,s as y,p as C,aW as L,f as k,o as s,w as p,r as M,t as o,_ as R,c as u,B as j,g as a,z as d,x as f,D as b,y as g,F as x,E as F,A as W,W as G,X}from"#entry";import q from"./cd55qm53.js";import{_ as H}from"./shdu-Ndv.js";import{_ as J}from"./hsuWSsy6.js";import{a as K,b as Q}from"./BZx839BO.js";const Y={key:0,class:"text-sm"},Z={key:1,class:"text-dimmed text-sm"},ee={class:"flex flex-col gap-2 p-2"},ae={class:"pt-1"},te={key:1,class:"flex flex-col gap-1"},se={key:2,class:"flex h-30 flex-col items-center justify-center gap-2"},ne={class:"text-muted text-sm"},de=A({__name:"tag-create",props:{modelValue:{default:()=>[]},type:{default:"app"}},emits:["update:modelValue","change","close"],setup(U,{emit:z}){const B=G(()=>X(()=>import("./CkI909kw.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),import.meta.url)),w=z,_=U,r=L(_,"modelValue",w),O=D(),v=y(!1),c=y([]),i=y([]),n=y(""),V=async()=>{const e=await K({type:_.type});c.value=e,T()},P=e=>{i.value.includes(e)?i.value=i.value.filter(l=>l.id!==e.id):i.value.push(e),r.value=i.value.map(l=>l.id),w("change",e)},S=async()=>{await Q({name:n.value,type:_.type}),n.value="",await V()},E=async()=>{await O.create(B).open({type:_.type}).result,await V()},T=()=>{if(!c.value?.length){i.value=[];return}i.value=c.value.filter(e=>r.value?.includes(e.id))};return C(()=>r.value,()=>{T()},{deep:!1}),C(v,e=>{e?V():w("close")}),(e,l)=>{const m=j,h=R,I=q,$=H,N=J;return s(),k(N,{open:a(v),"onUpdate:open":l[1]||(l[1]=t=>b(v)?v.value=t:null),content:{align:"center",side:"bottom",sideOffset:8}},{content:p(()=>[f("div",ee,[o(I,{modelValue:a(n),"onUpdate:modelValue":l[0]||(l[0]=t=>b(n)?n.value=t:null),placeholder:e.$t("common.tag.searchOrCreate"),clearable:"",icon:"i-lucide-search",variant:"soft",color:"neutral",ui:{root:"w-full",base:"w-full",trailing:"pr-1"}},null,8,["modelValue","placeholder"]),f("div",ae,[!a(c).filter(t=>t.name===a(n)).length&&a(n)?(s(),u(x,{key:0},[o(h,{color:"neutral",variant:"ghost",ui:{base:"gap-2 w-full"},onClick:S},{default:p(()=>[o(m,{name:"i-lucide-plus",class:"size-4"}),f("span",null,d(e.$t("common.tag.createTag",{name:a(n)})),1)]),_:1}),a(c).length>0?(s(),k($,{key:0,type:"dashed",class:"py-2"})):g("",!0)],64)):g("",!0),a(c).length>0?(s(),u("div",te,[(s(!0),u(x,null,F(a(c),t=>(s(),k(h,{key:t.id,color:"neutral",variant:"ghost",ui:{base:"justify-between"},onClick:le=>P(t)},{default:p(()=>[W(d(t.name)+" ",1),a(r).includes(t.id)?(s(),k(m,{key:0,name:"i-lucide-check",class:"size-4"})):g("",!0)]),_:2},1032,["onClick"]))),128))])):g("",!0),a(c).length===0&&!a(n)?(s(),u("div",se,[o(m,{name:"i-lucide-tags",class:"size-5"}),f("span",ne,d(e.$t("common.tag.noTags")),1)])):g("",!0)]),o($,{type:"dashed"}),f("div",null,[o(h,{label:e.$t("common.tag.manageTags"),color:"neutral",variant:"ghost",icon:"i-lucide-tags",ui:{base:"w-full"},onClick:E},null,8,["label"])])])]),default:p(()=>[M(e.$slots,"trigger",{item:a(i)},()=>[o(h,{color:"neutral",variant:"outline"},{default:p(()=>[o(m,{name:"i-lucide-tag",class:"size-4"}),a(r).length>0?(s(),u("span",Y,d(a(r).length)+d(e.$t("common.tag.tags")),1)):(s(),u("span",Z,d(e.$t("common.tag.allTags")),1)),o(m,{name:"i-lucide-chevron-down",class:"text-dimmed size-4 shrink-0"})]),_:1})])]),_:3},8,["open"])}}});export{de as _};
