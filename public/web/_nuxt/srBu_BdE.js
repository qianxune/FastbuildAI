import{_ as P}from"./CWpJD8K1.js";import{d as M,i as S,l as B,n as F,aN as Q,q as A,c as s,o as n,g as l,F as y,E as _,t as g,x as a,B as E,z as p,C as I,y as N}from"#entry";import{j as $}from"./C0KOn7yN.js";import{L as k}from"./BherOyCc.js";import"./cd55qm53.js";const j={class:"micropage-provider flex h-full flex-col"},q={key:0,class:"flex flex-none flex-wrap gap-3 p-6"},z={key:1,class:"flex flex-1 items-center justify-center"},G={class:"mx-auto max-w-sm text-center"},O={class:"text-foreground mb-2 text-lg font-semibold"},V={class:"text-muted-foreground text-sm"},R={key:2,class:"flex-1 overflow-y-auto p-6"},U={class:"flex flex-wrap gap-3"},D=["onClick"],K={class:"min-w-0 flex-1"},T={class:"text-foreground mb-1 flex items-center truncate text-base font-semibold"},H={key:0,class:"absolute top-0 right-0 flex-none"},ee=M({__name:"micropage-provider",props:{searchQuery:{default:""},selected:{default:null}},emits:["select"],setup(d,{emit:v}){const{t:c}=S(),i=d,w=v,m=B([]),f=F(()=>{if(!i.searchQuery)return m.value;const e=i.searchQuery.toLowerCase();return m.value.filter(o=>o.name?.toLowerCase().includes(e)||o.path?.toLowerCase().includes(e))}),{lockFn:C,isLock:b}=Q(async()=>{try{const o=(await $()).map(r=>({type:k.MICROPAGE,name:r.name,path:`/micropage/${r.id}`,query:{}}));o.sort((r,u)=>{const t=r.name||"",x=u.name||"";return t.localeCompare(x)}),m.value=o}catch(e){console.error(c("console-common.loadingFailed"),e),m.value=[]}}),L=e=>{w("select",e)},h=e=>i.selected?.path===e.path&&i.selected?.type===k.MICROPAGE;return A(()=>C()),(e,o)=>{const r=P,u=E;return n(),s("div",j,[l(b)?(n(),s("div",q,[(n(),s(y,null,_(6,t=>g(r,{class:"h-18 w-44 rounded-xl",key:t})),64))])):f.value.length===0?(n(),s("div",z,[a("div",G,[g(u,{name:"i-heroicons-document-text",class:"text-muted-foreground/50 mx-auto mb-4 h-16 w-16"}),a("h3",O,p(d.searchQuery?l(c)("console-common.linkPicker.emptyState.noMatchingPages"):l(c)("console-common.linkPicker.emptyState.noMicropages")),1),a("p",V,p(d.searchQuery?l(c)("console-common.linkPicker.emptyState.tryOtherKeywords"):l(c)("console-common.linkPicker.emptyState.contactAdmin")),1)])])):(n(),s("div",R,[a("div",U,[(n(!0),s(y,null,_(f.value,t=>(n(),s("div",{key:t.path,class:I(["group relative flex cursor-pointer items-center gap-4 rounded-xl px-4 py-3 transition-all duration-200",h(t)?"bg-primary/5 shadow-sm":"bg-accent hover:bg-primary/5"]),onClick:x=>L(t)},[a("div",K,[a("div",T,p(t.name),1)]),h(t)?(n(),s("div",H,[...o[0]||(o[0]=[a("div",{class:"bg-primary flex size-3 items-center justify-center rounded-full"},null,-1)])])):N("",!0)],10,D))),128))])]))])}}});export{ee as default};
