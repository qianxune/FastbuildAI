import{d as b,n as q,c as _,o as c,t as r,w as x,r as R,m as P,g as e,a0 as E,f as U,u as j,x as n,z as v,G as M,av as Q,i as K,aQ as Z,s as w,b2 as C,p as H,y as B,K as J,b3 as S,B as O,aZ as X,F as Y,E as ee}from"#entry";import te from"./cd55qm53.js";import{u as ae,P as se,_ as ne}from"./Cie-o9Wa.js";import{_ as oe}from"./abPSHzII.js";import{_ as ie}from"./B8dIIAdq.js";import{n as le}from"./DUoaAyrs.js";import{_ as re}from"./DbqqhwXM.js";import"./jsPNKUA0.js";import"./DNSLGqNg.js";import"./psimjGaX.js";import"./CuVAPZQ8.js";import"./B3rWqoNg.js";import"./EK7Wbu3-.js";var ce=b({inheritAttrs:!1,__name:"AspectRatio",props:{ratio:{type:Number,required:!1,default:1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const s=t,{forwardRef:o}=ae(),m=q(()=>1/s.ratio*100);return(i,a)=>(c(),_("div",{style:E(`position: relative; width: 100%; padding-bottom: ${m.value}%`),"data-reka-aspect-ratio-wrapper":""},[r(e(se),P({ref:e(o),"as-child":i.asChild,as:i.as,style:{position:"absolute",inset:"0px"}},i.$attrs),{default:x(()=>[R(i.$slots,"default",{aspect:m.value})]),_:3},16,["as-child","as"])],4))}}),de=ce;const ue=b({inheritAttrs:!1,__name:"index",props:{ratio:{default:16/9}},setup(t){const s=t;return(o,m)=>(c(),U(e(de),P({ratio:s.ratio,class:"bd-aspect-ratio"},o.$attrs),{default:x(()=>[R(o.$slots,"default",{},void 0,!0)]),_:3},16,["ratio"]))}}),pe=oe(ue,[["__scopeId","data-v-b74f39d5"]]);function me(){return j("/apps-decorate")}function D(t){return j("/extension",t)}const fe={class:"flex flex-row justify-between gap-3"},_e={class:"min-w-0 flex-1"},xe={class:"text-foreground text-4 line-clamp-1 truncate font-semibold"},ge={class:"text-muted-foreground mt-1 line-clamp-2 h-10 text-sm"},he={class:"bg-background flex size-18 flex-none items-center justify-center overflow-hidden rounded-xl"},ve=b({__name:"app-card",props:{extension:{}},emits:["click"],setup(t,{emit:s}){const o=t,m=s,i=()=>{m("click",o.extension)};return(a,f)=>{const d=re,u=M;return c(),_("div",{class:"group bg-muted border-border cursor-pointer rounded-lg border px-4 py-6 transition-all duration-200 hover:shadow-md",onClick:i},[n("div",fe,[n("div",_e,[r(d,{text:t.extension.alias||t.extension.name},{default:x(()=>[n("h3",xe,v(t.extension.alias||t.extension.name),1)]),_:1},8,["text"]),n("p",ge,v(t.extension.aliasDescription||t.extension.description||a.$t("extensions.manage.noDescription")),1)]),n("div",he,[r(u,{src:t.extension.aliasIcon?t.extension.aliasIcon:t.extension.icon,alt:t.extension.name,icon:"i-lucide-puzzle",ui:{root:`size-full rounded-xl ${t.extension.icon?"":"bg-primary"}`,icon:"size-7 text-white"}},null,8,["src","alt","ui"])])])])}}}),be={class:"container mx-auto flex h-full flex-col overflow-hidden"},ye={class:"bg-background flex flex-none flex-col gap-3 p-4"},we={class:"flex items-center justify-between"},$e={class:"hidden flex-none font-bold sm:block sm:text-base lg:text-lg"},ke={class:"relative flex justify-center"},Ae={class:"min-h-0 flex-1"},Ie={key:0,class:"grid grid-cols-1 gap-6 px-4 pt-2 pb-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},ze={key:1},Ce={class:"flex h-full min-h-[50vh] w-full items-center justify-center"},Be={class:"flex flex-col items-center gap-3"},Se={class:"text-muted-foreground"},Ee=b({__name:"index",async setup(t){let s,o;const m=Q(),{t:i}=K(),a=Z({name:"",page:1,pageSize:20}),f=w(!1),d=w(!0),u=w([]),$=()=>({name:a.name,page:a.page,pageSize:a.pageSize}),{data:g}=([s,o]=C(()=>S("apps-decorate",()=>me())),s=await s,o(),s),{data:y,pending:k}=([s,o]=C(()=>S("public-apps-initial",()=>D($()))),s=await s,o(),s);y.value&&(u.value=y.value.items||[],d.value=y.value.totalPages>(a.page||1));const A=async(p=!1)=>{if(!f.value){f.value=!0,p&&(a.page=1,u.value=[],d.value=!0);try{const l=await D($());p?u.value=l.items||[]:u.value.push(...l.items||[]),d.value=l.totalPages>(a.page||1)}catch(l){console.error("获取应用列表失败:",l),d.value=!1}finally{f.value=!1}}},V=async()=>{!d.value||f.value||(a.page=(a.page||1)+1,await A())},I=J(()=>A(!0),500);H(()=>a.name,I);const F=p=>{p.identifier&&m.push(`/app/${p.identifier}`)};return(p,l)=>{const z=O,N=te,G=X,L=pe,T=ie,W=ne;return c(),_("div",be,[n("div",ye,[n("div",we,[n("h2",$e,v(e(i)("menu.apps")),1),n("div",ke,[r(N,{modelValue:e(a).name,"onUpdate:modelValue":l[0]||(l[0]=h=>e(a).name=h),placeholder:e(i)("extensions.manage.search"),class:"sm:w-full lg:w-md",variant:"soft",onInput:e(I)},{leading:x(()=>[r(z,{name:"i-lucide-search"})]),_:1},8,["modelValue","placeholder","onInput"])])])]),e(g)?.enabled&&e(g)?.heroImageUrl?(c(),_("div",{key:0,class:"flex-none cursor-pointer overflow-hidden px-4 pb-4",onClick:l[1]||(l[1]=h=>e(g)?.link&&("navigateToWeb"in p?p.navigateToWeb:e(le))(e(g).link))},[r(L,{ratio:1488/170},{default:x(()=>[r(G,{src:e(g).heroImageUrl,alt:e(g).title||"banner",class:"h-full w-full rounded-lg object-contain"},null,8,["src","alt"])]),_:1})])):B("",!0),n("div",Ae,[r(W,{class:"h-full"},{default:x(()=>[r(T,{loading:e(f)||e(k),"has-more":e(d),"no-more-text":e(a).page===1?" ":"",onLoadMore:V},{default:x(()=>[e(u).length>0?(c(),_("div",Ie,[(c(!0),_(Y,null,ee(e(u),h=>(c(),U(ve,{key:h.id,extension:h,onClick:F},null,8,["extension"]))),128))])):!e(f)&&!e(k)?(c(),_("div",ze,[n("div",Ce,[n("div",Be,[r(z,{name:"i-lucide-box",class:"text-muted-foreground size-12"}),n("span",Se,v(e(i)("extensions.manage.empty.title")),1)])])])):B("",!0)]),_:1},8,["loading","has-more","no-more-text"])]),_:1})])])}}});export{Ee as default};
